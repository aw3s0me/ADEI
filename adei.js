function ADEI(C,A,B,E,D){this.maindiv_node=document.getElementById(C);this.statusbar_node=document.getElementById(B);if(A){this.sidebar_node=document.getElementById(A)}else{this.sidebar_node=false}if((!this.statusbar_node)||(!this.maindiv_node)){alert("ADEI INTERNAL ERROR: Some of importnant HTML elements are not found")}this.config=new CONFIG;this.config.ConfigureHistory();this.module=new MODULE(null,this.SetupModule,this);if(this.sidebar_node){this.popup=new POPUP(Geometry,null)}this.search=null;this.xslpool=new XSLPOOL(false);this.virtual=null;this.status=new STATUS(this.statusbar_node);this.SetStatus(translate("Starting..."),0,true);this.updater=new UPDATER(this.config,this.module,this.popup);if(E){this.menu=new MENU(this.config,this.updater,E)}else{this.menu=null}this.screen_width=false;this.screen_height=false;this.source=null;this.source_interval=null;this.source_window=null;this.data_export=null;this.data_aggregator=null;this.graph=null;this.plot=null;this.superpopup_geometry_node=null;this.extra_cropper_buttons=new Array();this.options=null;this.cfg=new Object({window_border:10,parse_delay:100,subsecond_threshold:0,zoom_ratio:2,query:null});if(typeof D=="undefined"){this.adei_session=Math.floor(Math.random()*4294967295)}else{this.adei_session=D}this.AddToQuery("adei_session="+D);this.key=false;document.onkeydown=this.keyDown(this);document.onkeyup=this.keyUp(this);document.onkeypress=this.keyPress(this)}ADEI.prototype.keyDown=function(A){return function(B){var C=(window.event)?event.keyCode:B.keyCode;A.key=C;A.keyHelp(C)}};ADEI.prototype.keyUp=function(A){return function(B){A.key=false;if(A.key_status_id){A.ClearStatus(A.key_status_id);A.key_status_id=false}}};ADEI.prototype.keyPress=function(A){return function(B){var C=(window.event)?event.keyCode:B.keyCode;if(C==0){C=B.charCode}}};ADEI.prototype.keyHelp=function(A){var B=3;if(this.config.GetModule()=="graph"){switch(A){case 72:this.key_status_id=this.SetStatus("wheel: Navigate history",B);break;case 83:this.key_status_id=this.SetStatus("wheel: Select Server",B);break;case 68:this.key_status_id=this.SetStatus("wheel: Select Database",B);break;case 71:this.key_status_id=this.SetStatus("wheel: Select Group",B);break;case 77:this.key_status_id=this.SetStatus("wheel: Select Mask",B);break;case 73:this.key_status_id=this.SetStatus("wheel: Select Item",B);break;case 69:this.key_status_id=this.SetStatus("wheel: Select Experiment",B);break;case 84:case 16:this.key_status_id=this.SetStatus("wheel: Move on time scale",B);break;case 86:this.key_status_id=this.SetStatus("wheel: Move on value scale",B);break;case 87:this.key_status_id=this.SetStatus("wheel: Edge-zoom on time scale",B);break;case 89:this.key_status_id=this.SetStatus("wheel: zoom value scale at mouse position",B);break;case 67:this.key_status_id=this.SetStatus("wheel: Zoom time scale at middle of window, click: Center window",B);break;case 76:this.key_status_id=this.SetStatus("wheel: Zoom time scale at mouse position",B);break;case 90:this.key_status_id=this.SetStatus("wheel: Zoom time scale at mouse position, click: Deep Zoom",B);break;default:this.key_status_id=false;this.SetStatus("Unknown key (code: "+A+")",B)}this.SetExtraStatus("Zoom(z,c,l,w,y), Shift(t,v,c), Source (s,d,g,m,i,e), Other (h) ",this.key_status_id)}};ADEI.prototype.SetOptions=function(A){this.options=A};ADEI.prototype.SetProperty=function(A,B){this.cfg[A]=B};ADEI.prototype.AddToQuery=function(A){if(this.cfg.query){this.cfg.query+="&"+A}else{this.cfg.query=A}};ADEI.prototype.RegisterSearchEngine=function(A){this.search=A};ADEI.prototype.RegisterModule=function(B,A){this.module.Register(B,A)};ADEI.prototype.RegisterSuperPopup=function(A,B){this.superpopup_geometry_node=document.getElementById(B);if(this.popup){this.popup.TryFixedSizeMode(this.sidebar_node,A,B)}};ADEI.prototype.RegisterVirtualControl=function(A){this.virtual=A;this.virtual.AttachConfig(this.config)};ADEI.prototype.RegisterCustomProperty=function(C,B,A){this.config.RegisterCustomProperty(C,B,A)};ADEI.prototype.RegisterCropperButton=function(A){if(this.graph){this.graph.RegisterCropperButton(A)}else{this.extra_cropper_buttons.push(A)}};ADEI.prototype.AttachSourceModule=function(C,A,B){this.source=C;this.source_interval=A;this.source_window=B;C.AttachConfig(this.config);C.Init(this.updater,this.options);if(this.menu){this.menu.AttachWindow(B)}};ADEI.prototype.AttachExportModule=function(A){this.data_export=A;A.AttachConfig(this.config);A.Init();if(this.menu){this.menu.AttachExporter(A)}};ADEI.prototype.AttachAggregationModule=function(A){this.data_aggregator=A;A.AttachConfig(this.config);A.Init(this.updater)};ADEI.prototype.AttachPlotModule=function(A){this.plot=A;A.AttachConfig(this.config);A.Init(this.updater)};ADEI.prototype.AttachGraphModule=function(B){this.graph=B;B.AttachConfig(this.config);B.AttachWindow(this.source_window);B.AttachSource(this.source);B.AttachExporter(this.data_export);for(var A=0;A<this.extra_cropper_buttons.length;A++){this.graph.RegisterCropperButton(this.extra_cropper_buttons[A])}this.extra_cropper_buttons=new Array()};ADEI.prototype.Start=function(B,A){if(this.virtual){this.virtual.Start()}this.module.Open(B);if(this.menu){this.menu.Load()}this.updater.Start(A)};ADEI.prototype.OpenModule=function(A){this.module.Open(A)};ADEI.prototype.SwitchPopup=function(A){if(this.popup){this.popup.Switch(A)}};ADEI.prototype.SetupModule=function(B,C){B.config.SetupModule(C);B.UpdateModuleGeometry(C,B.screen_width,B.screen_height);var A=B.module.GetModule(C);B.source.SetupModule(A);if((B.config)&&(B.config.ready)){B.updater.Update()}};ADEI.prototype.UpdateModuleGeometry=function(E,G,B){if((!G)||(!B)){return}this.screen_width=G;this.screen_height=B;var A=this.module.GetModule(E);if(!A){return}var D=domGetNodeOffset(this.maindiv_node);var F=this.statusbar_node.offsetTop-D[1];var C=G-D[0];adei.config.SetupPageGeometry(C,F);if(typeof A.AdjustGeometry!="undefined"){A.AdjustGeometry(C,F,G,this.statusbar_node.offsetTop)}else{if(typeof A.GetNode()!="undefined"){var H=A.GetNode();if(H.offsetParent){var D=domGetNodeOffset(H);var C=(G)-D[0];var F=(this.statusbar_node.offsetTop)-D[1]-1;domAdjustGeometry(H,C,F,true)}}}if(this.popup){this.popup.UpdateGlobalGeometry(F,this.statusbar_node.offsetTop)}this.status.UpdateWidth(G)};ADEI.prototype.GetURL=function(B,A){A=objectToProps(A);if(this.cfg.query){if(A){return B+"?"+this.cfg.query+"&"+A}return B+"?"+this.cfg.query}else{if(A){return B+"?"+A}return B}};ADEI.prototype.GetServiceURL=function(A,B){return this.GetURL("services/"+A+".php",B)};ADEI.prototype.GetService=function(A,B){return this.GetServiceURL(A,B)};ADEI.prototype.GetListService=function(A,B){B=objectToProps(B);return this.GetService("list",B?(B+"&target="+A):("target="+A))};ADEI.prototype.GetSelectService=function(A,B){B=objectToProps(B);return this.GetService("list",B?(B+"&menu=1&target="+A):("menu=1&target="+A))};ADEI.prototype.GetToolService=function(A,B){B=objectToProps(B);return this.GetService("tools",B?(B+"&target="+A):("target="+A))};ADEI.prototype.GetSearchService=function(C,A){var B=this.config.GetProps();return this.GetService("search",urlJoinProps(B,A,"search="+C))};ADEI.prototype.SetSuccessStatus=function(C,B,A){if(this.status){if((A)||(this.config.ready)){if(typeof B=="undefined"){return this.status.Set(C,this.cfg.default_status_duration,true)}else{return this.status.Set(C,B,true)}}}};ADEI.prototype.SetStatus=function(C,B,A){if(this.status){if((A)||(this.config.ready)){if(typeof B=="undefined"){return this.status.Set(C,this.cfg.default_status_duration)}else{return this.status.Set(C,B)}}}};ADEI.prototype.SetExtraStatus=function(A,B){if(this.status){this.status.SetComment(A,B)}};ADEI.prototype.ProposeStatus=function(B,A){if(this.status){if(this.config.ready){if(typeof A=="undefined"){return this.status.Propose(B,this.cfg.default_status_duration)}else{return this.status.Propose(B,A)}}}};ADEI.prototype.ClearStatus=function(A){if(this.status){this.status.Clean(A)}};ADEI.prototype.Search=function(A){if(this.search){this.search.StartSearch(A)}};ADEI.prototype.OpenControl=function(A){if(this.popup){this.popup.OpenControl(A)}};ADEI.prototype.divUpdateCallback=function(A,B,C){return function(D,E){if(D){htmlReplace(D,A,B);if(C){C()}}else{htmlReplace(translate('Update failed due "%s"',E),A)}}};ADEI.prototype.UpdateDIV=function(F,D,C,B,E){var A=false;if(typeof B=="undefined"){B=false}if(typeof E=="undefined"){E=false}if((B)||(E)){A=this.divUpdateCallback(F,B,E)}this.xslpool.Load(C,D,A,F)};ADEI.prototype.ServiceDIV=function(G,C,E,A,D,F){if(typeof D=="undefined"){D=false}if(typeof F=="undefined"){F=false}var B=this.config.Get(A);this.UpdateDIV(G,this.GetService(C,B),E,D,F)};ADEI.prototype.ReportError=function(C,B,A){adeiReportError(C,B,A)};ADEI.prototype.ReportException=function(B,D,C,A){adeiReportException(B,D,C,A)};ADEI.prototype.SetConfiguration=function(A){this.config.Load(A,true)};ADEI.prototype.RegisterCustomProperty=function(C,B,A){if(typeof A=="undefined"){A=false}if(typeof B=="undefined"){B=null}this.config.RegisterCustomProperty(C,B,A)};ADEI.prototype.RegisterExtraProperty=function(B,A){if(typeof A=="undefined"){A=null}this.config.RegisterCustomProperty(B,A,true)};ADEI.prototype.SetCustomProperties=function(B,A){if(typeof A=="undefined"){this.config.Load(B,true,true)}else{this.config.SetCustomProperties(B,A)}};function AGGREGATOR_CONFIG(){this.aggregator=null;this.interpolation=null;this.show_marks=null;this.show_gaps=null}function AGGREGATOR(D,C,A,B){this.cfg=new AGGREGATOR_CONFIG();this.asel=new SELECT(D,aggregatorUpdateAggregator,this);this.isel=new SELECT(C,aggregatorUpdateInterpolation,this);this.marksel=new SELECT(A,aggregatorUpdateMarks,this);this.gapsel=new SELECT(B,aggregatorUpdateGaps,this);this.updater=null;this.config=null}AGGREGATOR.prototype.AttachConfig=function(A){this.config=A;A.Register(this)};AGGREGATOR.prototype.Init=function(B,A){if(typeof A=="undefined"){A=new Object}this.updater=B;A.reload=true;A.confirm=true;this.Update(A)};AGGREGATOR.prototype.SetAggregator=function(A){this.Update(new Object({aggregation:A,apply:true}))};AGGREGATOR.prototype.SetInterpolation=function(A){this.Update(new Object({interpolate:A,apply:true}))};AGGREGATOR.prototype.SetMarks=function(A){this.Update(new Object({show_marks:A,apply:true}))};AGGREGATOR.prototype.SetGaps=function(A){this.Update(new Object({show_gaps:A,apply:true}))};AGGREGATOR.prototype.ReadConfig=function(A){if(this.config){var A=new Object();if(this.config.cfg.aggregation){A.aggregation=this.config.cfg.aggregation}if(this.config.cfg.interpolate){A.interpolate=this.config.cfg.interpolate}if(this.config.cfg.show_marks){A.show_marks=this.config.cfg.show_marks}if(this.config.cfg.show_gaps){A.show_gaps=this.config.cfg.show_gaps}this.Update(A)}};AGGREGATOR.prototype.Update=function(A){if(A){if(A.reload){this.asel.Update(adei.GetSelectService("aggregation_modes"),A,A?A.aggregation:null);this.isel.Update(adei.GetSelectService("interpolation_modes"),A,A?A.interpolate:null);this.marksel.Update(adei.GetSelectService("marks_modes"),A,A?A.show_marks:null);this.gapsel.Update(adei.GetSelectService("gaps_modes"),A,A?A.show_gaps:null)}else{if(A.aggregation){this.UpdateAggregator(A.aggregation,A);if(this.asel.GetValue()!=A.aggregation){this.asel.SetValue(A.aggregation)}}if(A.interpolate){this.UpdateInterpolation(A.interpolate,A);if(this.isel.GetValue()!=A.interpolate){this.isel.SetValue(A.interpolate)}}if(A.show_marks){this.UpdateMarks(A.show_marks,A);if(this.marksel.GetValue()!=A.show_marks){this.marksel.SetValue(A.show_marks)}}if(A.show_gaps){this.UpdateGaps(A.show_gaps,A);if(this.gapsel.GetValue()!=A.show_gaps){this.gapsel.SetValue(A.show_gaps)}}}}};AGGREGATOR.prototype.UpdateAggregator=function(B,A){this.cfg.aggregator=B;if((typeof A=="undefined")||(A.apply)){this.Apply(B,null,null,null)}};AGGREGATOR.prototype.UpdateInterpolation=function(B,A){this.cfg.interpolation=B;if((typeof A=="undefined")||(A.apply)){this.Apply(null,B,null,null)}};AGGREGATOR.prototype.UpdateMarks=function(B,A){this.cfg.show_marks=B;if((typeof A=="undefined")||(A.apply)){this.Apply(null,null,B,null)}};AGGREGATOR.prototype.UpdateGaps=function(B,A){this.cfg.show_gaps=B;if((typeof A=="undefined")||(A.apply)){this.Apply(null,null,null,B)}};AGGREGATOR.prototype.Apply=function(D,A,C,B){if((D)||(A)||(C)||(B)){this.config.SetAggregationSettings(D,A,C,B)}else{this.config.SetAggregationSettings(this.cfg.aggregator,this.cfg.interpolation,this.cfg.show_marks,this.cfg.show_gaps)}this.config.Save();if(this.updater){this.updater.Update()}};function aggregatorUpdateAggregator(A,C,B){return A.UpdateAggregator(C,B)}function aggregatorUpdateInterpolation(A,C,B){return A.UpdateInterpolation(C,B)}function aggregatorUpdateMarks(A,C,B){return A.UpdateMarks(C,B)}function aggregatorUpdateGaps(A,C,B){return A.UpdateGaps(C,B)}function Animator(A){this.setOptions(A);var B=this;this.timerDelegate=function(){B.onTimerEvent()};this.subjects=[];this.target=0;this.state=0;this.lastTime=null}Animator.prototype={setOptions:function(A){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},A)},seekTo:function(A){this.seekFromTo(this.state,A)},seekFromTo:function(B,A){this.target=Math.max(0,Math.min(1,A));this.state=Math.max(0,Math.min(1,B));this.lastTime=new Date().getTime();if(!this.intervalId){this.intervalId=window.setInterval(this.timerDelegate,this.options.interval)}},jumpTo:function(A){this.target=this.state=Math.max(0,Math.min(1,A));this.propagate()},toggle:function(){this.seekTo(1-this.target)},addSubject:function(A){this.subjects[this.subjects.length]=A;return this},clearSubjects:function(){this.subjects=[]},propagate:function(){var B=this.options.transition(this.state);for(var A=0;A<this.subjects.length;A++){if(this.subjects[A].setState){this.subjects[A].setState(B)}else{this.subjects[A](B)}}},onTimerEvent:function(){var C=new Date().getTime();var A=C-this.lastTime;this.lastTime=C;var B=(A/this.options.duration)*(this.state<this.target?1:-1);if(Math.abs(B)>=Math.abs(this.state-this.target)){this.state=this.target}else{this.state+=B}try{this.propagate()}finally{this.options.onStep.call(this);if(this.target==this.state){window.clearInterval(this.intervalId);this.intervalId=null;this.options.onComplete.call(this)}}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){var B="#<Animator:\n";for(var A=0;A<this.subjects.length;A++){B+=this.subjects[A].inspect()}B+=">";return B}};Animator.applyDefaults=function(C,B){B=B||{};var D,A={};for(D in C){A[D]=B[D]!==undefined?B[D]:C[D]}return A};Animator.makeArray=function(C){if(C==null){return[]}if(!C.length){return[C]}var A=[];for(var B=0;B<C.length;B++){A[B]=C[B]}return A};Animator.camelize=function(C){var E=C.split("-");if(E.length==1){return E[0]}var B=C.indexOf("-")==0?E[0].charAt(0).toUpperCase()+E[0].substring(1):E[0];for(var D=1,A=E.length;D<A;D++){var F=E[D];B+=F.charAt(0).toUpperCase()+F.substring(1)}return B};Animator.apply=function(C,B,A){if(B instanceof Array){return new Animator(A).addSubject(new CSSStyleSubject(C,B[0],B[1]))}return new Animator(A).addSubject(new CSSStyleSubject(C,B))};Animator.makeEaseIn=function(A){return function(B){return Math.pow(B,A*2)}};Animator.makeEaseOut=function(A){return function(B){return 1-Math.pow(1-B,A*2)}};Animator.makeElastic=function(A){return function(B){B=Animator.tx.easeInOut(B);return((1-Math.cos(B*Math.PI*A))*(1-B))+B}};Animator.makeADSR=function(D,B,C,A){if(A==null){A=0.5}return function(E){if(E<D){return E/D}if(E<B){return 1-((E-D)/(B-D)*(1-A))}if(E<C){return A}return A*(1-((E-C)/(1-C)))}};Animator.makeBounce=function(A){var B=Animator.makeElastic(A);return function(C){C=B(C);return C<=1?C:2-C}};Animator.tx={easeInOut:function(A){return((-Math.cos(A*Math.PI)/2)+0.5)},linear:function(A){return A},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)};function NumericalStyleSubject(B,C,E,D,A){this.els=Animator.makeArray(B);if(C=="opacity"&&window.ActiveXObject){this.property="filter"}else{this.property=Animator.camelize(C)}this.from=parseFloat(E);this.to=parseFloat(D);this.units=A!=null?A:"px"}NumericalStyleSubject.prototype={setState:function(E){var D=this.getStyle(E);var A=(this.property=="opacity"&&E==0)?"hidden":"";var B=0;for(var C=0;C<this.els.length;C++){try{this.els[C].style[this.property]=D}catch(F){if(this.property!="fontWeight"){throw F}}if(B++>20){return}}},getStyle:function(A){A=this.from+((this.to-this.from)*A);if(this.property=="filter"){return"alpha(opacity="+Math.round(A*100)+")"}if(this.property=="opacity"){return A}return Math.round(A)+this.units},inspect:function(){return"\t"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n"}};function ColorStyleSubject(A,B,D,C){this.els=Animator.makeArray(A);this.property=Animator.camelize(B);this.to=this.expandColor(C);this.from=this.expandColor(D);this.origFrom=D;this.origTo=C}ColorStyleSubject.prototype={expandColor:function(B){var C,E,D,A;C=ColorStyleSubject.parseColor(B);if(C){E=parseInt(C.slice(1,3),16);D=parseInt(C.slice(3,5),16);A=parseInt(C.slice(5,7),16);return[E,D,A]}if(window.DEBUG){alert("Invalid colour: '"+B+"'")}},getValueForState:function(A,B){return Math.round(this.from[A]+((this.to[A]-this.from[A])*B))},setState:function(C){var A="#"+ColorStyleSubject.toColorPart(this.getValueForState(0,C))+ColorStyleSubject.toColorPart(this.getValueForState(1,C))+ColorStyleSubject.toColorPart(this.getValueForState(2,C));for(var B=0;B<this.els.length;B++){this.els[B].style[this.property]=A}},inspect:function(){return"\t"+this.property+"("+this.origFrom+" to "+this.origTo+")\n"}};ColorStyleSubject.parseColor=function(D){var A="#",C;if(C=ColorStyleSubject.parseColor.rgbRe.exec(D)){var B;for(var E=1;E<=3;E++){B=Math.max(0,Math.min(255,parseInt(C[E])));A+=ColorStyleSubject.toColorPart(B)}return A}if(C=ColorStyleSubject.parseColor.hexRe.exec(D)){if(C[1].length==3){for(var E=0;E<3;E++){A+=C[1].charAt(E)+C[1].charAt(E)}return A}return"#"+C[1]}return false};ColorStyleSubject.toColorPart=function(A){if(A>255){A=255}var B=A.toString(16);if(A<16){return"0"+B}return B};ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i;ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;function DiscreteStyleSubject(B,C,E,D,A){this.els=Animator.makeArray(B);this.property=Animator.camelize(C);this.from=E;this.to=D;this.threshold=A||0.5}DiscreteStyleSubject.prototype={setState:function(C){var A=0;for(var B=0;B<this.els.length;B++){this.els[B].style[this.property]=C<=this.threshold?this.from:this.to}},inspect:function(){return"\t"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n"}};function CSSStyleSubject(D,M,J){D=Animator.makeArray(D);this.subjects=[];if(D.length==0){return}var A,N,B;if(J){B=this.parseStyle(M,D[0]);N=this.parseStyle(J,D[0])}else{N=this.parseStyle(M,D[0]);B={};for(A in N){B[A]=CSSStyleSubject.getStyle(D[0],A)}}var A;for(A in B){if(B[A]==N[A]){delete B[A];delete N[A]}}var A,H,E,I,L,K;for(A in B){var G=String(B[A]);var C=String(N[A]);if(N[A]==null){if(window.DEBUG){alert("No to style provided for '"+A+'"')}continue}if(L=ColorStyleSubject.parseColor(G)){K=ColorStyleSubject.parseColor(C);I=ColorStyleSubject}else{if(G.match(CSSStyleSubject.numericalRe)&&C.match(CSSStyleSubject.numericalRe)){L=parseFloat(G);K=parseFloat(C);I=NumericalStyleSubject;E=CSSStyleSubject.numericalRe.exec(G);var F=CSSStyleSubject.numericalRe.exec(C);if(E[1]!=null){H=E[1]}else{if(F[1]!=null){H=F[1]}else{H=F}}}else{if(G.match(CSSStyleSubject.discreteRe)&&C.match(CSSStyleSubject.discreteRe)){L=G;K=C;I=DiscreteStyleSubject;H=0}else{if(window.DEBUG){alert("Unrecognised format for value of "+A+": '"+B[A]+"'")}continue}}}this.subjects[this.subjects.length]=new I(D,A,L,K,H)}}CSSStyleSubject.prototype={parseStyle:function(B,C){var G={};if(B.indexOf(":")!=-1){var I=B.split(";");for(var E=0;E<I.length;E++){var D=CSSStyleSubject.ruleRe.exec(I[E]);if(D){G[D[1]]=D[2]}}}else{var A,H,F;F=C.className;C.className=B;for(var E=0;E<CSSStyleSubject.cssProperties.length;E++){A=CSSStyleSubject.cssProperties[E];H=CSSStyleSubject.getStyle(C,A);if(H!=null){G[A]=H}}C.className=F}return G},setState:function(B){for(var A=0;A<this.subjects.length;A++){this.subjects[A].setState(B)}},inspect:function(){var B="";for(var A=0;A<this.subjects.length;A++){B+=this.subjects[A].inspect()}return B}};CSSStyleSubject.getStyle=function(B,C){var A;if(document.defaultView&&document.defaultView.getComputedStyle){A=document.defaultView.getComputedStyle(B,"").getPropertyValue(C);if(A){return A}}C=Animator.camelize(C);if(B.currentStyle){A=B.currentStyle[C]}return A||B.style[C]};CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/;CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/;CSSStyleSubject.discreteRe=/^\w+$/;CSSStyleSubject.cssProperties=["azimuth","background","background-attachment","background-color","background-image","background-position","background-repeat","border-collapse","border-color","border-spacing","border-style","border-top","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width","border-width","bottom","clear","clip","color","content","cursor","direction","display","elevation","empty-cells","css-float","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-top","margin-right","margin-bottom","margin-left","max-height","max-width","min-height","min-width","orphans","outline","outline-color","outline-style","outline-width","overflow","padding","padding-top","padding-right","padding-bottom","padding-left","pause","position","right","size","table-layout","text-align","text-decoration","text-indent","text-shadow","text-transform","top","vertical-align","visibility","white-space","width","word-spacing","z-index","opacity","outline-offset","overflow-x","overflow-y"];function AnimatorChain(C,A){this.animators=C;this.setOptions(A);for(var B=0;B<this.animators.length;B++){this.listenTo(this.animators[B])}this.forwards=false;this.current=0}AnimatorChain.prototype={setOptions:function(A){this.options=Animator.applyDefaults({resetOnPlay:true},A)},play:function(){this.forwards=true;this.current=-1;if(this.options.resetOnPlay){for(var A=0;A<this.animators.length;A++){this.animators[A].jumpTo(0)}}this.advance()},reverse:function(){this.forwards=false;this.current=this.animators.length;if(this.options.resetOnPlay){for(var A=0;A<this.animators.length;A++){this.animators[A].jumpTo(1)}}this.advance()},toggle:function(){if(this.forwards){this.seekTo(0)}else{this.seekTo(1)}},listenTo:function(A){var B=A.options.onComplete;var C=this;A.options.onComplete=function(){if(B){B.call(A)}C.advance()}},advance:function(){if(this.forwards){if(this.animators[this.current+1]==null){return}this.current++;this.animators[this.current].play()}else{if(this.animators[this.current-1]==null){return}this.current--;this.animators[this.current].reverse()}},seekTo:function(A){if(A<=0){this.forwards=false;this.animators[this.current].seekTo(0)}else{this.forwards=true;this.animators[this.current].seekTo(1)}}};function Accordion(J){this.setOptions(J);var B=this.options.initialSection,G;if(this.options.rememberance){G=document.location.hash.substring(1)}this.rememberanceTexts=[];this.ans=[];var F=this;for(var C=0;C<this.options.sections.length;C++){var A=this.options.sections[C];var D=new Animator(this.options.animatorOptions);var I=this.options.from+(this.options.shift*C);var H=this.options.to+(this.options.shift*C);D.addSubject(new NumericalStyleSubject(A,this.options.property,I,H,this.options.units));D.jumpTo(0);var E=this.options.getActivator(A);E.index=C;E.onclick=function(){F.show(this.index)};this.ans[this.ans.length]=D;this.rememberanceTexts[C]=E.innerHTML.replace(/\s/g,"");if(this.rememberanceTexts[C]===G){B=C}}this.show(B)}Accordion.prototype={setOptions:function(A){this.options=Object.extend({sections:null,getActivator:function(B){return document.getElementById(B.getAttribute("activator"))},shift:0,initialSection:0,rememberance:true,animatorOptions:{}},A||{})},show:function(B){for(var A=0;A<this.ans.length;A++){this.ans[A].seekTo(A>B?1:0)}if(this.options.rememberance){document.location.hash=this.rememberanceTexts[B]}}};function CALLBACK(B,C,A){this.obj=B;this.method=C;this.attr=A}CALLBACK.prototype.Call=function(value){eval("this.obj."+this.method+"(value, this.attr)")};function classExtend(A,C){function B(){}B.prototype=C.prototype;A.prototype=new B();A.prototype.constructor=A.constructor;A.superclass=C;A.superproto=C.prototype}function isIE(){return !!(window.attachEvent&&!window.opera)}function isIE6(){if(isIE()){return((!window.XMLHttpRequest)&&(typeof document.addEventListener!="function"))}return false}function isOpera(){return !!(window.opera)}function isKonqueror(){return(navigator.userAgent.toLowerCase().indexOf("konqueror")>-1)?true:false}function isiDevice(){return(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod")>-1||navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("android")>-1)?true:false}function isiPhone(){return(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPod"))?true:false}function isiPad(){return(navigator.userAgent.indexOf("iPad")>-1)?true:false}function isSafari(){return(navigator.userAgent.indexOf("Safari")>-1)?true:false}function CLIENT(){this.browser=0;this.version=0}CLIENT.prototype.isIE=function(){return isIE()};CLIENT.prototype.isIE6=function(){return isIE6()};CLIENT.prototype.isOpera=function(){return isOpera()};CLIENT.prototype.isSafari=function(){return isSafari()};CLIENT.prototype.isKonqueror=function(){return isKonqueror()};CLIENT.prototype.isiDevice=function(){return isiDevice()};CLIENT.prototype.isiPhone=function(){return isiPhone()};CLIENT.prototype.isiPad=function(){return isiPad()};client=new CLIENT();function CONFIG_CUSTOM(A){if(typeof A!="undefined"){for(i in A){this[i]=A[i]}}}function CONFIG_CONFIG(A){this.db_server=null;this.db_name=null;this.db_group=null;this.control_group=null;this.db_mask=null;this.experiment="0-0";this.window="0";this.width=0;this.height=0;this.aggregation=null;this.interpolate=null;this.show_marks=null;this.show_gaps=null;this.plot_mode=0;this.virtual=null;this.srctree=null;this.pageid=null;this.module=null;this.custom=new CONFIG_CUSTOM(A)}function CONFIG_EXTRA(A){this.format=null;this.resample=null;this.mask_mode=null;this.custom=new CONFIG_CUSTOM(A)}CONFIG_CONFIG.prototype.Clone=function(B){if(typeof B=="undefined"){B=false}var A=new Object;for(i in this){if((this[i])&&(typeof this[i]=="object")){if(!B){A[i]=objectClone(this[i])}}else{A[i]=this[i]}}return A};function CONFIG(){this.custom_props=new Object;this.custom_extra=new Object;this.autoreg_props=[];this.autoreg_extra=[];this.cfg=new CONFIG_CONFIG(this.custom_props);this.cfg_extra=new CONFIG_EXTRA(this.custom_extra);this.win_width=0;this.win_from="";this.win_to="";this.win_min="";this.win_max="";this.sel_from=0;this.sel_to=0;this.confirmed=0;this.initializing=true;this.ready=false;this.page_width=0;this.page_height=0;this.groups={page:{notifier:"Page",props:["module"],saved:null},source:{notifier:"Source",props:["db_server","db_name","db_group","db_mask","srctree"],saved:null},window:{notifier:"Interval",props:["interval","window"],saved:null}};this.objlist=new Array}CONFIG.prototype.ConfigureHistory=function(){this.history=new HISTORY(this.HistoryEvent(this))};CONFIG.prototype.RegisterUpdater=function(A){this.updater=A};CONFIG.prototype.Register=function(A){this.objlist.push(A)};CONFIG.prototype.RegisterCustomProperty=function(C,B,A){if(typeof A=="undefined"){A=false}if(typeof B=="undefined"){if(A){if(typeof this.custom_extra[C]=="undefined"){this.custom_extra[C]=null;this.cfg_extra.custom[C]=null}}else{if(typeof this.custom_props[C]=="undefined"){this.custom_props[C]=null;this.cfg.custom[C]=null}}}else{if(A){this.custom_extra[C]=B;this.cfg_extra.custom[C]=B}else{this.custom_props[C]=B;this.cfg.custom[C]=B}}};CONFIG.prototype.RegisterPropertyGroup=function(B,A){if(typeof A=="undefined"){A=false}if(A){this.autoreg_extra.push(B)}else{this.autoreg_props.push(B)}};CONFIG.prototype.SetSource=function(D,B,C,E,A){this.cfg.db_server=D;this.cfg.db_name=B;this.cfg.db_group=C;this.cfg.control_group=E;this.cfg.db_mask=A};CONFIG.prototype.SetInterval=function(B,A){this.cfg.experiment=B+"-"+A};CONFIG.prototype.GetAxisName=function(A){var C;if(isNaN(A)){C=A+"_axis"}else{var B=parseInt(A);if(B>0){C="axis"+B}else{C="axis"}}return C};CONFIG.prototype.SetAxisRange=function(D,B,A){var C;var E=this.GetAxisName(D)+"_range";if((B)||(A)){C=B+":"+A}else{C=null}this.cfg.custom[E]=C};CONFIG.prototype.SetAxisMode=function(C,A){var B;var D=this.GetAxisName(C)+"_mode";if(typeof A=="undefined"){B=null}else{if(A){B="log"}else{B="std"}}this.cfg.custom[D]=B};CONFIG.prototype.GetAxisRange=function(C){var D=this.GetAxisName(C)+"_range";if(typeof this.cfg.custom[D]=="string"){var B=this.cfg.custom[D];var A=/^(-?[^:]+):(-?[^:]+)$/.exec(B);if(A){return[A[1],A[2]]}}return false};CONFIG.prototype.GetAxisMode=function(B){var C=this.GetAxisName(B)+"_mode";if(typeof this.cfg.custom[C]=="string"){var A=this.cfg.custom[C];if(A=="log"){return[true]}else{return[false]}}return false};CONFIG.prototype.SetWindow=function(B,E,D,A,C){if(B<0){this.win_width=-1;this.win_min=A+"";this.win_max=C+"";this.win_from=E+"";this.win_to=D+"";if((this.win_from||this.win_to)&&(this.win_min&&this.win_max)){this.cfg.window=this.win_from+"-"+this.win_to+","+this.win_min+":"+this.win_max}else{if(this.win_min&&this.win_max){this.cfg.window=this.win_min+":"+this.win_max}else{if(this.win_from||this.win_to){this.cfg.window=this.win_from+"-"+this.win_to}else{this.win_width=0;this.cfg.window=0}}}}else{this.win_width=B;this.win_from="";this.win_to="";this.win_min="";this.win_max="";this.cfg.window=B}};CONFIG.prototype.SetSelection=function(B,A){if(typeof B=="undefined"){this.sel_from=0;this.sel_to=0}else{this.sel_from=B;this.sel_to=A}};CONFIG.prototype.SetExportSettings=function(C,B,A){if(C){this.cfg_extra.format=C}if(B){this.cfg_extra.resample=B}if(A){this.cfg_extra.mask_mode=A}this.updater.Notify("ExportSettings")};CONFIG.prototype.SetAggregationSettings=function(A,B,D,C){if(A){this.cfg.aggregation=A}if(B){this.cfg.interpolate=B}if(D){this.cfg.show_marks=D}if(C){this.cfg.show_gaps=C}};CONFIG.prototype.SetPlotSettings=function(A){if(A){this.cfg.plot_mode=A}};CONFIG.prototype.SetVirtualSettings=function(mode,settings){if(mode){this.cfg.virtual=mode;eval("this.cfg."+mode+"=settings")}else{this.cfg.virtual=null}};CONFIG.prototype.SetWikiSettings=function(A){this.cfg.pageid=A};CONFIG.prototype.ParseWindow=function(B){var E;if(typeof E=="undefined"){E=this.cfg.window}else{E=B}if(isNaN(E)){this.win_width=-1;this.win_from="";this.win_to="";this.win_min="";this.win_max="";var A=false;var D=E.split(",");if((D.legth<1)||(D.length>2)){A=true}else{var C=function(H,G){var I=G.split(":");if(I.length==2){if((isNaN(I[0]))||(isNaN(I[1]))){return true}else{H.win_min=I[0];H.win_max=I[1]}}else{var F=/^(-?[^\-]*)-(-?[^\-]*)$/.exec(G);if(F){if((isNaN(F[1]))||(isNaN(F[2]))){return true}else{H.win_from=F[1];H.win_to=F[2]}}else{return true}}return false};A=C(this,D[0]);if((!A)&&(D.length==2)){A=C(this,D[1])}}if(A){this.win_width=0;adeiReportError(translate('Invalid window "%s" is specified',E))}}else{this.win_width=E;this.win_from="";this.win_to="";this.win_min="";this.win_max=""}if(typeof E!="undefined"){this.SetWindow(this.win_width,this.win_from,this.win_to,this.min,this.max)}};CONFIG.prototype.ApplyConfig=function(save_on_apply,filter){this.ParseWindow();var len=this.objlist.length;for(var i=0;i<len;i++){var obj=this.objlist[i];if(obj.SimpleReadConfig){obj.SimpleReadConfig()}}for(var i=0;i<len;i++){var obj=this.objlist[i];if(obj.ReadConfig){var opts=new Object({reset:true,success_cb:this.UpdateAndSaveFunction(this,save_on_apply,filter)});if(!this.ready){opts.reload=true}if(typeof filter!="undefined"){eval("if (obj instanceof "+filter+") obj.ReadConfig(opts);")}else{obj.ReadConfig(opts)}}}};CONFIG.prototype.UpdateAndSaveFunction=function(self,save_on_apply,filter){return function(){var len=self.objlist.length;for(var i=0;i<len;i++){var obj=self.objlist[i];if(obj.ApplyConfig){if(typeof filter!="undefined"){eval("if (obj instanceof "+filter+") obj.ApplyConfig(true);")}else{obj.ApplyConfig(true)}}}if(self.cfg.module){adei.OpenModule(self.cfg.module)}if(self.updater){self.updater.Update()}if(save_on_apply){self.Save()}}};CONFIG.prototype.SetupGeometry=function(A,B){if(typeof A=="object"){this.cfg.width=A.offsetWidth;this.cfg.height=A.offsetHeight}else{this.cfg.width=A;this.cfg.height=B}};CONFIG.prototype.SetupPageGeometry=function(A,B){this.page_width=A;this.page_height=B};CONFIG.prototype.SetupModule=function(A){if(A!=this.cfg.module){if(this.cfg.module){this.cfg.module=A;this.Save()}else{this.cfg.module=A}}};CONFIG.prototype.GetModule=function(){return this.cfg.module};CONFIG.prototype.GetConfig=function(){return this.cfg};CONFIG.prototype.Get=function(B){var A=this.cfg.Clone(true);Object.extend(A,this.cfg.custom);Object.extend(A,this.cfg_extra);Object.extend(A,this.cfg_extra.custom);A.custom=null;if(typeof B!="undefined"){Object.extend(A,B)}if(this.page_width>0){Object.extend(A,{page_width:this.page_width,page_height:this.page_height})}return A};CONFIG.prototype.GetJSON=function(B){var A=this.Get(B);return Object.toJSON(A)};CONFIG.prototype.GetProps=function(window_type){var res;with(this.cfg){var win=this.cfg.window;if(typeof window_type!="undefined"){if(window_type>0){win="0"}else{if(window_type<0){if(this.sel_from!=this.sel_to){win=this.sel_from+"-"+this.sel_to}else{adeiReportError("The selection is empty. Storing full window","CONFIG")}}}}res="";if(this.cfg.module){res+="module="+this.cfg.module+"&"}if(this.cfg.pageid){res+="pageid="+this.cfg.pageid+"&"}if(db_server){res+="db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name+"&db_group="+this.cfg.db_group+"&control_group="+this.cfg.control_group+"&db_mask="+this.cfg.db_mask+"&experiment="+this.cfg.experiment+"&window="+win;if(this.cfg.aggregation){res+="&aggregation="+this.cfg.aggregation}if(this.cfg.interpolate){res+="&interpolate="+this.cfg.interpolate}if(this.cfg.show_marks){res+="&show_gaps="+this.cfg.show_marks}if(this.cfg.show_gaps){res+="&show_gaps="+this.cfg.show_gaps}if(this.cfg.module){res+="&module="+this.cfg.module}if(this.cfg.virtual){res+="&virtual="+this.cfg.virtual;if(this.cfg.virtual){eval('res += "&" + this.cfg.virtual + "=" + this.cfg.'+this.cfg.virtual)}}}else{res+="no_source"}}with(this.cfg_extra){if(format){res+="&format="+format}if(resample){res+="&resample="+resample}if(mask_mode){res+="&mask_mode="+mask_mode}}for(var i in this.cfg.custom){if(typeof this.cfg.custom[i]!="object"){if((this.cfg.custom[i]!=null)&&(this.cfg.custom[i]!=false)){res+="&"+i+"="+this.cfg.custom[i]}}}for(var i in this.cfg_extra.custom){if(typeof this.cfg.custom[i]!="object"){if((this.cfg_extra.custom[i]!=null)&&(this.cfg_extra.custom[i]!=false)){res+="&"+i+"="+this.cfg_extra.custom[i]}}}return res};CONFIG.prototype.ExtractProps=function(C){res="";for(var A=0;A<C.length;A++){var B=C[A];if(typeof this.cfg[B]!="undefined"){res+="&"+B+"="+this.cfg[B]}else{if(typeof this.cfg_extra[B]!="undefined"){res+="&"+B+"="+this.cfg_extra[B]}else{if(typeof this.cfg.custom[B]!="undefined"){res+="&"+B+"="+this.cfg.custom[B]}else{if(typeof this.cfg_extra.custom[B]!="undefined"){res+="&"+B+"="+this.cfg_extra.custom[B]}}}}}return res.substr(1)};CONFIG.prototype.ParseProps=function(I,J,D){var G;var A;var E=false;if(typeof J=="undefined"){J=false}if(typeof D=="undefined"){D=false}if(J){G=objectClone(this.cfg);A=objectClone(this.cfg_extra);if(/db_server=/.exec(I)){G.db_name=null;G.db_group=null;G.control_group=null;G.db_mask=null}else{if(/db_name=/.exec(I)){G.db_group=null;G.control_group=null;G.db_mask=null}else{if(/db_group=/.exec(I)){G.db_mask=null}}}if(/experiment=/.exec(I)){G.window="0"}}else{G=new CONFIG_CONFIG(this.custom_props);A=new CONFIG_EXTRA(this.custom_extra)}var H=I.split("&");for(var F=0;F<H.length;F++){var C=H[F].split("=",2);if(C.length!=2){continue}if(typeof G[C[0]]!="undefined"){if(C[0]=="virtual"){G[C[1]]=null}G[C[0]]=C[1];E=true}else{if(typeof A[C[0]]!="undefined"){A[C[0]]=C[1];E=true}else{if(typeof G.custom[C[0]]!="undefined"){G.custom[C[0]]=C[1];E=true}else{if(/axis\d*_(range|mode)$/.exec(C[0])){G.custom[C[0]]=C[1];E=true}else{if(typeof A.custom[C[0]]!="undefined"){A.custom[C[0]]=C[1];E=true}else{if(D){this.RegisterCustomProperty(C[0]);if(typeof this.custom_props[C[0]]!="undefined"){G.custom[C[0]]=C[1]}else{A.custom[C[0]]=C[1]}E=true}else{var K=false;for(var B=0;B<this.autoreg_props.length;B++){if(this.autoreg_props[B].exec(C[0])){G.custom[C[0]]=C[1];K=true;break}}if(!K){for(var B=0;B<this.autoreg_extra.length;B++){if(this.autoreg_extra[B].exec(C[0])){A.custom[C[0]]=C[1];break}}}}}}}}}}G.width=this.cfg.width;G.height=this.cfg.height;if(E){return new Object({cfg:G,extra:A})}return false};CONFIG.prototype.Notify=function(){for(var A in this.groups){var B=this.ExtractProps(this.groups[A].props);if(B!=this.groups[A].saved){this.updater.Notify(this.groups[A].notifier);this.groups[A].saved=B}}};CONFIG.prototype.Save=function(){if((this.cfg)&&(this.history)){this.Notify();this.history.Add(this.GetProps(),this.cfg.Clone())}};CONFIG.prototype.FixLocation=function(C,A){if((this.cfg)&&(this.history)){if(typeof C=="undefined"){var C=this.history.GetProps();if(typeof A=="undefined"){var A=this.history.GetID()}}var B=this.GetProps();if(C!=B){this.history.ReplaceLocation(B,C,A)}}};CONFIG.prototype.ReplaceURL=function(){this.FixLocation()};CONFIG.prototype.ReplaceConfig=function(){if((this.cfg)&&(this.history)){adeiReportError(translate("ReplaceConfig is not supported, yet"))}};CONFIG.prototype.HistoryEvent=function(A){return function(C,D,B){if((!D)||(typeof D.Clone!="function")){return}A.cfg=D.Clone();A.Notify();A.FixLocation(C,B);A.ApplyConfig()}};CONFIG.prototype.SetCustomProperties=function(D,C){if((typeof C!="undefined")&&(C==this.cfg.module)){this.Load(D,true,true)}else{var A=this.ParseProps(D,true,true);var D=this.GetProps();this.cfg=A.cfg;this.cfg_extra=A.extra;var B=this.GetProps();if(this.ready){if(D!=B){this.history.ReplaceLocation(B,D,this.history.GetID())}}}};CONFIG.prototype.Load=function(D,B,F){if(typeof D=="undefined"){D=this.history.GetProps()}if(D){if(typeof B=="undefined"){B=false}if(typeof F=="undefined"){F=false}var A=this.ParseProps(D,B,F);if(A){if(this.cfg.module){adei.module.Open(this.cfg.module)}if(A.cfg.db_server){this.cfg=A.cfg;this.cfg_extra=A.extra;adei.SetStatus(translate("Loading..."),0);this.ApplyConfig(true)}else{var E=false;for(var C in A.cfg.custom){E=true;break}if(!E){for(var C in A.extra.custom){E=true;break}}if(E){this.cfg=A.cfg;this.cfg_extra=A.extra;adei.SetStatus(translate("Loading..."),0);this.ApplyConfig(true)}}}}};CONFIG.prototype.ApplyDataSource=function(D,E,B,A,C,F){if(typeof D!="undefined"){this.cfg.db_server=D}else{this.cfg.db_server=null}if(typeof E!="undefined"){this.cfg.db_name=E}else{this.cfg.db_name=null}if(typeof B!="undefined"){this.cfg.db_group=B}else{this.cfg.db_group=null}if(typeof A!="undefined"){this.cfg.control_group=A}else{this.cfg.control_group=null}if(typeof C!="undefined"){this.cfg.db_mask=C}else{this.cfg.db_mask=null}if(typeof F!="undefined"){this.cfg.experiment=F;this.cfg.window="0"}this.ApplyConfig(true,"SOURCE")};CONFIG.prototype.Confirm=function(B,C){if(B instanceof SOURCE){this.confirmed|=1}if((this.confirmed&1)==1){this.confirmed=0;if(this.initializing){this.ready=true;this.initializing=false;adei.SetStatus(translate("Ready..."),0);this.Load()}else{if(this.onConfirmation){var A=this.onConfirmation;this.onConfirmation=null;A()}}}};function configSetupModule(B,A){B.SetupModule(A)}function adeiDateFormat(E,B){var C=new Date(Math.floor(E)*1000);if((B)&&(B<=adei.cfg.subsecond_threshold)){var D=E.toString();var A=D.indexOf(".");if(A>=0){return dateFormat(C)+"."+D.substr(A+1)}else{return dateFormat(C)}}else{return dateFormat(C)}}function adeiDateReadableFormat(C,A){if((A)&&(A<=adei.cfg.subsecond_threshold)){var B=new Date(Math.floor(C*1000))}else{var B=new Date(Math.floor(C)*1000)}return B.format("isoFullDateTime",true)}function adeiDateParse(D){var B=D.indexOf(".");if(B<0){var C=Date.parse(D+" UTC");if(isNaN(C)){C=serverGetResult(adei.GetToolService("parse_date","timezone=UTC&date="+D));if(isNaN(C)){return""}return C}return C/1000}var A=D.substr(0,B);if(A.indexOf(".")<0){var C=Date.parse(A+" UTC");if(isNaN(C)){C=serverGetResult(adei.GetToolService("parse_date","timezone=UTC&date="+D));if(isNaN(C)){return""}return C}}else{C=serverGetResult(adei.GetToolService("parse_date","timezone=UTC&date="+D));if(isNaN(C)){return""}return C}return Math.floor(C/1000)+"."+D.substr(B+1)}var HISTORY_MODULE_TYPE=1;var CONTROL_MODULE_TYPE=2;function DIALOG_DRAGGER(A){if(typeof A.node=="undefined"){this.dialog=new Object;this.dialog.node=A;this.dialog.maximize_node=null;this.dialog.titlebar=null;this.dialog.content=null;this.float_mode=false}else{this.dialog=A;this.float_mode=true}this.resizeCornerSize=16;this.minimumWidth=60;this.minimumHeight=15;this.MouseMoveBind=this.MouseMove.bindAsEventListener(this);this.MouseOutBind=this.MouseOut.bindAsEventListener(this);this.MaximizeBind=this.Maximize.bindAsEventListener(this);this.ResizeBind=this.Resize.bindAsEventListener(this);this.MoveBind=this.Move.bindAsEventListener(this);this.TrackBind=this.Track.bindAsEventListener(this);this.DoneBind=this.Done.bindAsEventListener(this);this.label_displayed=true;this.in_resize=false;this.in_move=false;this.maximized=false;this.is_moved=false;this.is_resized=false;this.cb_start=null;this.cb_step=null;this.cb_end=null;this.cb_attr=null;this.ctrl_min=false;this.allow_move=true;this.allow_resize=true;this.allow_resize_e=true;this.allow_resize_w=true;this.allow_resize_n=true;this.allow_resize_s=true}DIALOG_DRAGGER.prototype.RegisterCallbacks=function(B,A,D,C){this.cb_start=B;this.cb_step=A;this.cb_end=D;this.cb_attr=C};DIALOG_DRAGGER.prototype.ControlMinimumSize=function(B,A){if((Prototype.Browser.Gecko)&&(domGetStyleProp(this.dialog.node,this.dialog.node.style.minWidth,"min-width"))){this.ctrl_min=true;this.min_width=B;this.min_height=A}};DIALOG_DRAGGER.prototype.Disable=function(A,B){if(!A){this.allow_move=false}if(typeof B=="string"){if(B.indexOf("n")>=0){this.allow_resize_n=false}if(B.indexOf("s")>=0){this.allow_resize_s=false}if(B.indexOf("w")>=0){this.allow_resize_w=false}if(B.indexOf("e")>=0){this.allow_resize_e=false}}else{if(!B){this.allow_resize=false}}};DIALOG_DRAGGER.prototype.Setup=function(){if(this.dialog.content){domSetWidth(this.dialog.node,this.dialog.node.offsetWidth)}if(this.dialog.iframe){this.SaveDimenssions();this.Restore()}if(this.dialog.maximize_node){Event.observe(this.dialog.maximize_node,"click",this.MaximizeBind)}if((this.allow_move)&&(this.dialog.titlebar)){Event.observe(this.dialog.titlebar,"mousedown",this.MoveBind)}if(this.allow_resize){Event.observe(this.dialog.node,"mousedown",this.ResizeBind)}Event.observe(this.dialog.node,"mousemove",this.MouseMoveBind);Event.observe(this.dialog.node,"mouseout",this.MouseOutBind)};DIALOG_DRAGGER.prototype.Clean=function(){if(this.dialog.maximize_node){Event.stopObserving(this.dialog.maximize_node,"click",this.MaximizeBind)}if((this.allow_move)&&(this.dialog.titlebar)){Event.stopObserving(this.dialog.titlebar,"mousedown",this.MoveBind)}if(this.allow_resize){Event.stopObserving(this.dialog.node,"mousedown",this.ResizeBind)}Event.stopObserving(this.dialog.node,"mousemove",this.MouseMoveBind);Event.stopObserving(this.dialog.node,"mouseout",this.MouseOutBind)};DIALOG_DRAGGER.prototype.MouseMove=function(F){if((this.in_resize)||(this.in_move)){return}var D=domGetEventTarget(F);if(D!=this.dialog.node){this.resizeDirection="";this.dialog.node.style.cursor="";return}var B=this.dialog.node.offsetWidth;var H=this.dialog.node.offsetHeight;var C=domGetEventLayerOffset(F);var I=C[0];var E=C[1];if(!this.float_mode){var G=domGetNodeOffset(this.dialog.node);I-=G[0];E-=G[1]}var A="";if((this.allow_resize_n)&&(E<this.resizeCornerSize)){A+="n"}else{if((this.allow_resize_s)&&(E>(H-this.resizeCornerSize))){A+="s"}}if((this.allow_resize_w)&&(I<this.resizeCornerSize)){A+="w"}else{if((this.allow_resize_e)&&(I>(B-this.resizeCornerSize))){A+="e"}}if(A){this.resizeDirection=A;this.dialog.node.style.cursor=A+"-resize"}else{this.resizeDirection="";this.dialog.node.style.cursor=""}};DIALOG_DRAGGER.prototype.MouseOut=function(A){};DIALOG_DRAGGER.prototype.Move=function(B){var C=domGetEventTarget(B);if((C!=this.dialog.titlebar)&&(C!=this.dialog.label)){return}Event.observe(document,"mousemove",this.TrackBind);Event.observe(document,"mouseup",this.DoneBind);var A=this.dialog.node;var D=domGetEventPageOffset(B);this.xOffset=parseInt(domGetStyleProp(A,A.style.left,"left"),10)-D[0];this.yOffset=parseInt(domGetStyleProp(A,A.style.top,"top"),10)-D[1];this.in_move=true};DIALOG_DRAGGER.prototype.SaveDimenssions=function(){var D=this.dialog.node;this.oldLeft=parseInt(domGetStyleProp(D,D.style.left,"left"),10);this.oldTop=parseInt(domGetStyleProp(D,D.style.top,"top"),10);var C=domGetNodeSize(D);D.style.width=C[0]+"px";D.style.height=C[1]+"px";var B=domGetNodeSize(D);this.corr_x=B[0]-C[0];this.corr_y=B[1]-C[1];this.oldWidth=C[0]-this.corr_x;this.oldHeight=C[1]-this.corr_y;D.style.width=this.oldWidth+"px";D.style.height=this.oldHeight+"px";if(this.ctrl_min){D.style.minWidth=this.min_width+"px";D.style.minHeight=this.min_height+"px"}if(this.dialog.content){var A=this.dialog.content;C=domGetNodeSize(A);A.style.height=C[1]+"px";var B=domGetNodeSize(A);this.corr_cy=B[1]-C[1];this.cHeight=C[1]-this.corr_cy;A.style.height=this.cHeight+"px"}};DIALOG_DRAGGER.prototype.Resize=function(F){var G=domGetEventTarget(F);if(G!=this.dialog.node){return}var E=this.dialog.node;Event.observe(document,"mousemove",this.TrackBind);Event.observe(document,"mouseup",this.DoneBind);this.in_resize=true;if(this.dialog.titlebar){var A=this.dialog.titlebar;var B=parseInt(domGetStyleProp(A,A.style.maxHeight,"max-height"),10);if((!B)||((A.offsetHeight-B)>10)){domSetWidth(E,E.offsetWidth);if(B>0){domSetHeight(A,B)}else{domSetHeight(A,21)}}}if(this.dialog.label){if(!this.label_width){this.label_width=this.dialog.label.offsetWidth+this.dialog.label.offsetLeft}}var H=domGetEventPageOffset(F);this.xPosition=H[0];this.yPosition=H[1];this.SaveDimenssions();if(this.dialog.titlebar){var D=this.dialog.titlebar;var C=domGetNodeSize(D);C[1]+=this.corr_y;if((C[1]+10)>this.minimumHeight){this.minimumHeight=C[1]+10}}if(F&&F.preventDefault){F.preventDefault()}else{window.event.returnValue=false}return false};DIALOG_DRAGGER.prototype.Restore=function(C){var B=this.dialog.node;var A=this.dialog.content;B.style.left=this.oldLeft+"px";B.style.top=this.oldTop+"px";B.style.width=this.oldWidth+"px";B.style.height=this.oldHeight+"px";A.style.height=this.cHeight+"px";cssSetClass(this.dialog.maximize_node,"maximize");this.maximized=false};DIALOG_DRAGGER.prototype.Maximize=function(D){var C=this.dialog.node;var A=this.dialog.content;if(this.maximized){this.Restore()}else{this.SaveDimenssions();C.style.left=0;C.style.top=0;var E=windowGetWidth();var B=windowGetHeight();C.style.width=(E-this.corr_x)+"px";if((B-this.corr_y)>this.oldHeight){C.style.height=(B-this.corr_y)+"px";A.style.height=(this.cHeight+(B-this.corr_y-this.oldHeight))+"px"}cssSetClass(this.dialog.maximize_node,"restore");this.maximized=true}};DIALOG_DRAGGER.prototype.Track=function(H){var A=this.dialog.node;if(this.in_resize){var B=false;var E=false;var F=false;var K=false;if(this.resizeDirection.charAt(0)=="n"){B=this.allow_resize_n}if(this.resizeDirection.charAt(0)=="s"){E=this.allow_resize_s}if(this.resizeDirection.charAt(0)=="e"||this.resizeDirection.charAt(1)=="e"){F=this.allow_resize_e}if(this.resizeDirection.charAt(0)=="w"||this.resizeDirection.charAt(1)=="w"){K=this.allow_resize_w}var C=domGetEventPageOffset(H);var N=C[0]-this.xPosition;var L=C[1]-this.yPosition;if(K){N=-N}if(B){L=-L}var J=this.oldWidth+N;var D=this.oldHeight+L;if(J<this.minimumWidth){J=this.minimumWidth;N=J-this.oldWidth}if(D<this.minimumHeight){D=this.minimumHeight;L=D-this.oldHeight}if(F||K){if(J<this.label_width){if(this.label_displayed){this.dialog.titlebar.removeChild(this.dialog.label);this.label_displayed=false}}else{if(!this.label_displayed){this.dialog.titlebar.appendChild(this.dialog.label);this.label_displayed=true}}A.style.width=J+"px";if(K){A.style.left=(this.oldLeft-N)+"px"}}if(B||E){A.style.height=D+"px";if(this.dialog.content){var I=this.dialog.content;if((this.cHeight+L)<0){I.style.height=0+"px"}else{I.style.height=(this.cHeight+L)+"px"}if(L<0){var M=domGetNodeSize(I);var G=M[1]-this.corr_cy-this.cHeight;if(G>L){A.style.height=(this.oldHeight+G)+"px"}}}if(B){A.style.top=(this.oldTop-L)+"px"}}this.is_resized=true}else{if(this.in_move){var C=domGetEventPageOffset(H);A.style.left=(C[0]+this.xOffset)+"px";A.style.top=(C[1]+this.yOffset)+"px";this.is_moved=true}}Event.stop(H)};DIALOG_DRAGGER.prototype.Done=function(A){if(this.in_resize){this.in_resize=false}if(this.in_move){this.in_move=false}Event.stopObserving(document,"mousemove",this.TrackBind);Event.stopObserving(document,"mouseup",this.DoneBind);Event.stop(A);if(this.cb_end){this.cb_end(this.cb_attr,this)}};function DIALOG(C,I,F,A){var B=document.createElement("div");cssSetClass(B,"dialog");if(typeof"id"=="string"){B.setAttribute("id",A)}B.style.display="none";B.style.left="0px";B.style.top="0px";var J=document.createElement("span");J.appendChild(document.createTextNode(I));var K=document.createElement("div");K.appendChild(J);cssSetClass(K,"titlebar");var G=document.createElement("div");cssSetClass(G,"close");var E=document.createElement("div");cssSetClass(E,"maximize");var H=document.createElement("div");cssSetClass(H,"content");if(typeof css_class!="undefined"){cssSetClass(H,css_class)}if(typeof F=="string"){H.innerHTML=F}else{H.appendChild(F)}B.appendChild(G);B.appendChild(E);B.appendChild(K);B.appendChild(H);if(isIE()){var D=document.createElement("div");D.innerHTML="<!--[if lte IE 6.5]><iframe></iframe><![endif]-->";B.appendChild(D);this.iframe=D}this.CloseBind=C.bindAsEventListener(this);this.node=B;this.close_node=G;this.maximize_node=E;this.titlebar=K;this.label=J;this.content=H;this.parent=null;this.dragger=new DIALOG_DRAGGER(this)}DIALOG.prototype.AlterContent=function(A){if((!this.node.style.height)||(!this.node.style.width)){this.Resize(this.node.offsetWidth,this.node.offsetHeight,true)}if(typeof A=="string"){this.content.innerHTML=A}else{this.content.replaceChild(A,this.content.firstChild)}};DIALOG.prototype.Setup=function(B,A){this.node.style.display="block";domAlignNode(this.node,adei.cfg.window_border,B,A,this.ResizeFunction(this,true));Event.observe(this.close_node,"click",this.CloseBind);this.dragger.Setup()};DIALOG.prototype.Clean=function(){this.dragger.Clean();Event.stopObserving(this.node,"click",this.LegendCloseBind)};DIALOG.prototype.Show=function(C,D,B,A){if(this.parent){return}if((typeof D!="undefined")&&(D)){D.Clean();C.replaceChild(this.node,D.node);D.parent=null}else{C.appendChild(this.node)}this.parent=C;setTimeout(this.SetupFunction(this,B,A),adei.cfg.parse_delay)};DIALOG.prototype.Hide=function(){if(this.parent){this.Clean();this.parent.removeChild(this.node);this.parent=null}};DIALOG.prototype.Resize=function(C,A,B){var D=this.node;if(C){D.style.width=C+"px";if(B){var E=(D.offsetWidth-C);if(E){D.style.width=(C-E)+"px"}}}if(A){var G=D.offsetHeight;var F=this.content.offsetHeight;this.content.style.height="0px";D.style.height=A+"px";if(B){var E=(D.offsetHeight-A);if(E){D.style.height=(A-E)+"px"}}F+=(D.offsetHeight-G);this.content.style.height=F+"px";E=this.content.offsetHeight-F;this.content.style.height=(F-E)+"px"}};DIALOG.prototype.CheckReusability=function(){if((this.dragger.is_moved)){var A=this.node;var C=parseInt(domGetStyleProp(A,A.style.left,"left"),10);C+=this.dragger.minimumWidth+adei.cfg.window_border;var B=parseInt(domGetStyleProp(A,A.style.top,"top"),10);B+=this.dragger.minimumHeight+adei.cfg.window_border;if((C<windowGetWidth())&&(B<windowGetHeight())){return true}}return false};DIALOG.prototype.ResizeFunction=function(A,B){return function(E,D,C){A.Resize(D,C,B)}};DIALOG.prototype.SetupFunction=function(B,A,C){return function(){B.Setup(A,C)}};function domGetStyleProp(D,C,A){if(C){return C}if((D.currentStyle)&&(D.currentStyle[A])){return D.currentStyle[A]}if((document.defaultView)&&(document.defaultView.getComputedStyle)){var B=document.defaultView.getComputedStyle(D,null);if(B){return B.getPropertyValue(A)}}return null}function domNodeSetText(B,C){var A=document.createTextNode(C);if(B.firstChild){B.replaceChild(A,B.firstChild)}else{B.appendChild(A)}}function domHide(B){var A=document.getElementById(B);if(A){A.style.display="none"}return A}function domShow(C,B){if(typeof B=="undefined"){B="block"}var A=document.getElementById(C);if(A){A.style.display=B}return A}function cssSetClass(B,A){if(typeof B=="string"){B=document.getElementById(B)}if(B){B.className=A}return B}function cssSetProperty(C,G,D){var F;var B;if(document.styleSheets[0].cssRules){F=false;B=document.styleSheets[0].cssRules}else{F=true;B=document.styleSheets[0].rules}for(i=0;i<B.length;i++){if(B[i].selectorText.toLowerCase()==C){B[i].style[G]=D;return}}try{var A=document.styleSheets[0];if(F){A.addRule(C,G+":"+D)}else{A.insertRule(C+"{"+G+":"+D+"}",B.length)}}catch(E){}}function cssHideClass(A){cssSetProperty(A,"display","none")}function cssShowClass(A){cssSetProperty(A,"display","inline")}function domGetValue(B){var A=document.getElementById(B);if(A){return A.value}else{return null}}function windowGetWidth(){return window.innerWidth!=null?window.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body!=null?document.body.clientWidth:null}function windowGetHeight(){return window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:null}function domAdjustGeometry(E,D,A,C){if(typeof C=="undefined"){C=false}if(E){var B=0;if(!C){B=E.offsetHeight}if(B<A){E.style.height=A+"px"}if(!C){B=E.offsetWidth}if(B<D){E.style.width=D+"px"}}}function domGetMouseOffset(A){if(A.offsetX!=null){return[A.offsetX,A.offsetY]}var E=A.target||A.srcElement;var B=E;var D=0,C=0;while(B.offsetParent){C+=B.offsetLeft;D+=B.offsetTop;B=B.offsetParent}return[A.clientX-C,A.clientY-D]}function domGetEventTarget(A){if(typeof A.target!="undefined"){return A.target}else{return A.srcElement}}function domGetEventPageOffset(A){if(typeof A.pageX=="undefined"){return[A.x,A.y]}else{return[A.pageX,A.pageY]}}function domGetEventLayerOffset(A){if(typeof A.layerX=="undefined"){return[A.offsetX,A.offsetY]}else{return[A.layerX,A.layerY]}}function domGetScrollEventDelta(A){var B=0;if(A.detail){B=A.detail}else{if(A.wheelDelta){B=-A.wheelDelta/40}}return B}function domGetNodeOffset(A){var B=curtop=0;if(A.offsetParent){do{B+=A.offsetLeft;curtop+=A.offsetTop}while(A=A.offsetParent)}else{alert("Can't calculate node position")}return[B,curtop]}function domGetNodeSize(A){return[A.offsetWidth,A.offsetHeight]}function domAlignNode(F,G,I,H,C){var B=windowGetWidth();var J=windowGetHeight();var N=domGetNodeSize(F);var M=0;var K=0;var A=I;var L=H;if((A+N[0]+G)>B){var E=G+(A+N[0])-B;if(E>A){if(A>G){E=A-G}else{if(C){M=(B-2*G)*2/3;E=A-(G+(B-2*G)/6)}else{E=0}}}if(E){A-=E}}if((L+N[1]+G)>J){var E=G+(L+N[1])-J;if(E>L){if(C){K=(J-2*G);E=L-G}else{if(L>G){E=L-G}else{E=0}}}if(E){L-=E}}if((M)||(K)){if(typeof C=="function"){C(F,M,K)}else{if(M){F.style.width=M+"px"}if(K){F.style.height=K+"px"}}}F.style.left=A+"px";F.style.top=L+"px";if((!M)&&(!K)){var D=domGetNodeSize(F);if((D[0]!=N[0])||(D[1]!=N[1])){if(D[0]==N[0]){M=0}else{M=N[0]}if(D[1]==N[1]){K=0}else{K=N[1]}if(typeof C=="function"){C(F,M,K)}else{if(M){F.style.width=M+"px"}if(K){F.style.height=K+"px"}}}}}function domSetMinHeight(B,A,D,C){if(typeof B.corr_y=="undefined"){if(domGetStyleProp(B,B.style.minHeight,"min-height")){B.style.minHeight=A+"px"}else{B.style.height=A+"px"}if(C){B.corr_y=C.offsetHeight-A}else{B.corr_y=B.offsetHeight-A}if(!B.corr_y){return}else{if((!D)&&(B.corr_y<0)){B.corr_y=0;return}}}if(domGetStyleProp(B,B.style.minHeight,"min-height")){B.style.minHeight=(A-B.corr_y)+"px"}else{B.style.height=(A-B.corr_y)+"px"}}function domSetHeight(D,A,G,E,B,F){if(typeof D.corr_y=="undefined"){D.style.height=A+"px";if(E){var C;if((typeof F=="undefined")||(!F)){C=E.offsetHeight}else{C=E.scrollHeight}if(B){D.corr_y=C-B}else{D.corr_y=C-A}}else{D.corr_y=D.offsetHeight-A}if(!D.corr_y){return}else{if((!G)&&(D.corr_y<0)){D.corr_y=0;return}}}D.style.height=(A-D.corr_y)+"px"}function domSetMinWidth(B,A,D,C){if(typeof B.corr_x=="undefined"){if((Prototype.Browser.Gecko)&&(domGetStyleProp(B,B.style.minWidth,"min-width"))){B.style.minWidth=A+"px"}else{B.style.width=A+"px"}if(C){B.corr_x=C.offsetWidth-A}else{B.corr_x=B.offsetWidth-A}if(!B.corr_x){return}else{if((!D)&&(B.corr_x<0)){B.corr_x=0;return}}}if((Prototype.Browser.Gecko)&&(domGetStyleProp(B,B.style.minWidth,"min-width"))){B.style.minWidth=(A-B.corr_x)+"px"}else{B.style.width=(A-B.corr_x)+"px"}}function domSetWidth(B,A,D,C){if(typeof B.corr_x=="undefined"){B.style.width=A+"px";if(C){B.corr_x=C.offsetWidth-A}else{B.corr_x=B.offsetWidth-A}if(!B.corr_x){return}else{if((!D)&&(B.corr_x<0)){B.corr_x=0;return}}}B.style.width=(A-B.corr_x)+"px"}function domGetChildsByName(C,B){var D=B.toUpperCase();var A=new Array();for(var E=C.firstChild;E;E=E.nextSibling){if(E.nodeName.toUpperCase()==D){A.push(E)}}return A}function domGetFirstChildByName(B,A){var C=A.toUpperCase();for(var D=B.firstChild;D;D=D.nextSibling){if(D.nodeName.toUpperCase()==C){return D}}return false}function domGetLastChildByName(C,A){var D=A.toUpperCase();var B=false;for(var E=C.firstChild;E;E=E.nextSibling){if(E.nodeName.toUpperCase()==D){B=E}}return B}function dateFormat(A){return(A.getUTCMonth()+1)+"/"+A.getUTCDate()+"/"+A.getUTCFullYear()+" "+A.getUTCHours()+":"+A.getUTCMinutes()+":"+A.getUTCSeconds()}function eventCanceler(A){Event.stop(A)}function tableAddRow(D,F){if(typeof D=="string"){var D=document.getElementById(D)}if(!D){return}var C=D.rows.length;var E=D.insertRow(C);for(var B=0;B<F.length;B++){var A=E.insertCell(B);A.innerHTML=F[B]}return E}function DLMANAGER(){this.config=new CONFIG();this.tm=null;this.rate=2000;this.defopts="target=dlmanager_run";this.download=0;this.finalizing=false;this.starting=false;this.stop=false;this.idleruns=0}function dlmanagerstart(){dlmanager.idleruns=0;dlmanager.Request()}DLMANAGER.prototype.Request=function(A){if(!A){var A=this.defopts}new Ajax.Request(adei.GetServiceURL("download",A),{method:"post",onSuccess:dlUpdaterRequest(this),onFailure:function(){adei.SetStatus(translate("Downloadmanager updater POST request failed"),0);this.Stop()}})};function dlUpdaterRequest(A){return function(E){var J=false;var N;var I=E.responseXML;if(I){var M=I.getElementsByTagName("result");if(M.length>1){J=translate("download service returned multiple result nodes")}else{if(M.length==0){var K=I.getElementsByTagName("error");if(K.length>0){J=K[0].firstChild.data}else{J=translate("download service returned no result or error nodes",url)}}else{N=M[0]}}}if(J){adeiReportError(J)}var C=N.getAttribute("job");switch(C){case"Showprogress":A.idleruns=0;var B=N.getAttribute("dl_id");var L="fcount"+B;var D=N.getAttribute("frem");var F=N.getAttribute("progress");var G=N.getAttribute("finalizing");var H="progress"+B;con=new CONFIG();if(con.GetModule()=="download"){setTimeout("dlmanager.Request()",A.rate)}if(G!=1){A.finalizing=false}if(G==1){A.finalizing=true;$(H).style.width="100%";$(H).innerHTML="Finalizing file..."}else{if(F<100&&F!=""){$(H).style.width=F+"%";$(H).innerHTML=F+"%";$(L).innerHTML="Data groups left: "+D}}break;case"Idle":var G=N.getAttribute("finalizing");A.idleruns=A.idleruns+1;if((G)||(A.finalizing)){A.finalizing=false;adei.updater.Update()}else{if(A.idleruns<4){setTimeout("dlmanager.Request()",A.rate)}}break;case"Done":adei.updater.Update();break}}}DLMANAGER.prototype.RemoveDownload=function(B){var A=confirm("Are you sure you want to delete download?");if(A){var C="target=dlmanager_remove&dl_id="+B;this.Request(C)}else{return}};DLMANAGER.prototype.AddDownload=function(A){A+="&target=dlmanager_add";this.Request(A);if(this.config.GetModule()!="download"){adei.OpenModule("download")}};DLMANAGER.prototype.Stop=function(){window.clearInterval(this.tm)};DLMANAGER.prototype.SortBy=function(A){var B="target=dlmanager_sort&sortby="+A;this.Request(B)};DLMANAGER.prototype.ToggleAutodelete=function(A){var B="target=dlmanager_toggleautodelete&dl_id="+A;this.Request(B)};function adeiGetErrorMessage(C,B,A){if(typeof B=="undefined"){return C}else{return"Error in '"+B+"': "+C}}function adeiReportError(C,B,A){alert(adeiGetErrorMessage(C,B,A))}function adeiGetExceptionMessage(B,C){var A;if(C){A=C+", "+translate("error: ")}else{A=translate("Exception caught, error: ")}if(B.description){A+=B.description}else{if(B.message){A+=B.message}else{A+=translate("Unknown error")}}if(B.fileName){A+="("+B.fileName;if(B.lineNumber){A+=":"+B.lineNumber}A+=")"}if(B.stack){A+="\n\n"+B.stack}return A}function adeiReportException(C,E,D,B){var A=adeiGetExceptionMessage(C,E);adeiReportError(A,D,B)}function EXPORT_CONFIG(){this.format=null;this.resample=null;this.mask=null;this.window=null;this.frame_height=768;this.frame_width=1024}function EXPORT(C,A,B,D){this.cfg=new EXPORT_CONFIG();this.formatsel=new SELECT(C,exportUpdateFormat,this);this.samplesel=new SELECT(A,exportUpdateSampling,this);this.masksel=new SELECT(B,exportUpdateMask,this);this.winsel=new SELECT(D,exportUpdateWindow,this);this.config=null}EXPORT.prototype.AttachConfig=function(A){this.config=A;A.Register(this)};EXPORT.prototype.Init=function(A){if(typeof A=="undefined"){A=new Object}A.reload=true;A.confirm=true;this.Update(A)};EXPORT.prototype.Export=function(C,B){var A="format="+this.cfg.format+"&resample="+this.cfg.resample+"&mask_mode="+this.cfg.mask;if(this.GetFormatType(this.cfg.format)=="image"){A+="&width="+this.cfg.frame_width+"&height="+this.cfg.frame_height}if(typeof B!="undefined"){A+="&"+this.config.GetProps(B)}else{if(C){A+="&"+this.config.GetProps(-1)}else{A+="&"+this.config.GetProps(this.cfg.window)}}if(this.GetFormatType(this.cfg.format)=="image"||!window.dlmanager){document.location=adei.GetServiceURL("getdata",A)}else{if(this.cfg.format==null){alert("Please select data source.")}else{dlmanager.AddDownload(A)}}};EXPORT.prototype.StartDownload=function(A){var B="target=dlmanager_download&dl_id="+A;document.location=adei.GetServiceURL("download",B)};EXPORT.prototype.SetFormat=function(A){this.Update(new Object({format:A,apply:true}))};EXPORT.prototype.SetSampling=function(A){this.Update(new Object({export_sampling:A,apply:true}))};EXPORT.prototype.SetMask=function(A){this.Update(new Object({export_mask:A,apply:true}))};EXPORT.prototype.ReadConfig=function(A){if(this.config){var A=new Object({apply:true});if(this.config.cfg_extra.format){A.format=this.config.cfg_extra.format}if(this.config.cfg_extra.resample){A.export_sampling=this.config.cfg_extra.resample}if(this.config.cfg_extra.mask_mode){A.export_mask=this.config.cfg_extra.mask_mode}this.Update(A)}};EXPORT.prototype.Update=function(A){if(A){if(A.reload){this.formatsel.Update(adei.GetSelectService("formats"),A,A?A.format:null);this.samplesel.Update(adei.GetSelectService("sampling_rates"),A,A?A.export_sampling:null);this.masksel.Update(adei.GetSelectService("export_mask_modes"),A,A?A.export_mask:null);this.winsel.Update(adei.GetSelectService("export_window_modes"),A,A?A.export_window:null)}else{if(A.format){this.UpdateFormat(A.format,A);if(this.formatsel.GetValue()!=A.format){this.formatsel.SetValue(A.format)}}if(A.export_sampling){this.UpdateSampling(A.export_sampling,A);if(this.samplesel.GetValue()!=A.export_sampling){this.samplesel.SetValue(A.export_sampling)}}if(A.export_mask){this.UpdateMask(A.export_mask,A);if(this.masksel.GetValue()!=A.export_mask){this.masksel.SetValue(A.export_mask)}}if(A.export_window){this.UpdateWindow(A.export_window,A);if(this.winsel.GetValue()!=A.export_window){this.winsel.SetValue(A.export_window)}}}}};EXPORT.prototype.GetFormatType=function(A){return(typeof adei.cfg.export_formats[A].type=="undefined")?"data":adei.cfg.export_formats[A].type};EXPORT.prototype.UpdateFormat=function(C,B){this.cfg.format=C;var A=this.GetFormatType(C);$$(".export_control").each(function(D){if(D.hasClassName(A+"_export_control")){D.show()}else{D.hide()}});if((typeof B=="undefined")||(B.apply)){this.Apply(C,null,null)}};EXPORT.prototype.UpdateResolutionX=function(A){this.cfg.frame_width=A};EXPORT.prototype.UpdateResolutionY=function(A){this.cfg.frame_height=A};EXPORT.prototype.UpdateSampling=function(B,A){this.cfg.resample=B;if((typeof A=="undefined")||(A.apply)){this.Apply(null,B,null)}};EXPORT.prototype.UpdateMask=function(B,A){this.cfg.mask=B;if((typeof A=="undefined")||(A.apply)){this.Apply(null,null,B)}};EXPORT.prototype.UpdateWindow=function(B,A){this.cfg.window=B};EXPORT.prototype.Apply=function(C,B,A){if((C)||(B)||(A)){this.config.SetExportSettings(C,B,A)}else{this.config.SetExportSettings(this.cfg.format,this.cfg.resample,this.cfg.mask)}this.config.ReplaceURL()};EXPORT.prototype.GetTooltip=function(){var A=this.formatsel.GetTitle();if((this.cfg.resample)&&(this.cfg.resample!="0")){A+=", "+translate("Resampling %s",this.samplesel.GetTitle())}if((this.cfg.mask)&&(this.cfg.mask!="0")){A+=", "+translate("MultiMask")}return A};function exportUpdateFormat(A,C,B){return A.UpdateFormat(C,B)}function exportUpdateSampling(A,C,B){return A.UpdateSampling(C,B)}function exportUpdateMask(A,C,B){return A.UpdateMask(C,B)}function exportUpdateWindow(A,C,B){return A.UpdateWindow(C,B)}function GRAPHCONTROL(F,D,H,G,A,C,E){this.showhidebutton=document.getElementById(D);this.controls=document.getElementById(F);this.imgdiv=document.getElementById(H);this.graphimg=document.getElementById(A);this.emaildiv=document.getElementById(C);this.sensordiv=document.getElementById(E);var B=0;this.win=G;this.path;Event.observe(this.showhidebutton,"click",this.showhide.bindAsEventListener(this));Event.observe(this.controls,"click",this.showhide.bindAsEventListener(this))}GRAPHCONTROL.prototype.showhide=function(A){if(this.num==1){this.controls.style.visibility="visible";this.num=0}else{this.controls.style.visibility="hidden";this.num=1}this.StopPropagation(A)};GRAPHCONTROL.prototype.StopPropagation=function(A){if(!A){var A=window.event}if(A){if(A.cancelBubble){A.cancelBubble=true}}if(A){if(A.stopPropagation){A.stopPropagation()}}};GRAPHCONTROL.prototype.sendEmail=function(){try{var A="url="+window.location;A+="&from="+document.getElementById("from").value;A+="&to="+document.getElementById("tomail").value;A+="&message="+document.getElementById("message").value;A+="&attachement="+this.path;A+="&task=Send";A=A.replace("#","&");new Ajax.Request(adei.GetServiceURL("email",A),{method:"get",onSuccess:this.MailSent(this),onFailure:this.MailFail(this)})}catch(B){alert("FAILED : "+B)}};GRAPHCONTROL.prototype.MailSent=function(A){return function(B){if(!B&&!B.responseText){alert("Unexpected content received")}else{alert("Success : "+B.responseText)}}};GRAPHCONTROL.prototype.MailFail=function(A){return function(B){alert("No data was returned by the service")}};GRAPHCONTROL.prototype.openMailForm=function(){var A=adei.GetService("email");this.emaildiv.style.visibility="visible";adei.UpdateDIV("emailform",A,"email")};GRAPHCONTROL.prototype.closediv=function(A){if(A=="imgdiv"){this.imgdiv.style.visibility="hidden"}if(A=="emailform"){this.emaildiv.style.visibility="hidden"}if(A=="sensordiv"){this.sensordiv.style.visibility="hidden"}this.StopPropagation()};GRAPHCONTROL.prototype.getSensors=function(){if(this.sensordiv){var A=adei.GetService("email");A+="&"+adei.config.GetProps();A+="&task=getSensorList";this.sensordiv.style.visibility="visible";adei.UpdateDIV("sensorlist",A,"sensorlist",true)}};GRAPHCONTROL.prototype.loadImage=function(){var A=adei.config.GetProps();A+="&width=1024&height=640&task=genpic";try{new Ajax.Request(adei.GetServiceURL("email",A),{method:"get",onSuccess:this.getFilePath(this),onFailure:this.failed(this)});this.openMailForm()}catch(B){alert("Request Failed : "+B)}};GRAPHCONTROL.prototype.failed=function(A){return function(B){alert("Request returned onFailure : "+B.responseText)}};GRAPHCONTROL.prototype.getFilePath=function(A){return function(B){if(!B&&!B.responseText){alert("Request returned no content")}else{if(B.responseText=="FAIL"){alert("Creating temporary folder for image failed")}else{A.path=B.responseText}}}};GRAPHCONTROL.prototype.genIMG=function(A){this.StopPropagation();this.loadImage()};GRAPHCONTROL.prototype.UseWindow=function(A){switch(A){case"centerzoomin":this.win.window.CenterZoomIn();break;case"centerzoomout":this.win.window.CenterZoomOut();break;case"moveright":this.win.window.MoveRight();break;case"moveleft":this.win.window.MoveLeft();break;case"moveup":this.win.window.MoveUp();break;case"movedown":this.win.window.MoveDown();break}this.StopPropagation()};function GRAPH(B,A){this.config=null;this.window=null;this.source=null;this.exporter=null;this.selector=document.getElementById(A);this.frame=document.getElementById(B);this.start_xy=[0,0];this.margins={left:0,top:0,right:0,bottom:0};this.crop_margins={left:0,top:0,right:0,bottom:0};this.allWidth=10;this.allHeight=10;this.height=0;this.width=0;this.plot_mode=-1;this.idevice=isiDevice();this.startX=0;this.startY=0;this.curX=0;this.curY=0;this.startValuesSet=0;this.swiping=0;this.fader=0;this.throwLeft=0;this.test=0;this.onlyLegend=0;if(this.idevice){this.fader=new Animator().addSubject(new NumericalStyleSubject($("graph_image_div"),"opacity",1,0.13))}if(this.frame){this.img=this.frame.getElementsByTagName("img")[0]}else{this.frame=null}this.crop=null;this.extraButtons=new Array();if(this.img){Event.observe(this.img,"load",this.Configure.bindAsEventListener(this))}else{if(this.frame){alert('The "img" element is not found within specified block "'+B+'"')}else{alert('GRAPH is not able to locate specified ("'+B+'") element')}}this.LegendCloseBind=this.LegendClose.bindAsEventListener(this);this.LegendCloseHelperBind=eventCanceler.bindAsEventListener();if(!isIE()){this.img.addEventListener("DOMMouseScroll",this.onLocalScroll(this),false)}this.onload_message=0;this.img.onmousewheel=this.onLocalScroll(this);this.img.ondblclick=this.onLocalDblClick(this);this.img.onload=this.onImageLoad(this)}GRAPH.prototype.onImageLoad=function(A){return function(){adei.SetSuccessStatus(A.onload_message?A.onload_message:translate("Done"));if(A.fader){A.AnimatorEffects(A,2)}}};GRAPH.prototype.RegisterCropperButton=function(A){A.onClick=this.onButtonClick(this,A);this.extraButtons.push(A)};GRAPH.prototype.AttachConfig=function(A){this.config=A};GRAPH.prototype.Clear=function(){if(this.crop){this.crop.clear()}};GRAPH.prototype.PointerToY=function(A,C){if(this.ylog[A]){var B=(Math.log(this.ymax[A])-(Math.log(this.ymax[A])-Math.log(this.ymin[A]))*(C-this.margins.top)/this.real_height)/Math.LN10;return Math.pow(10,B)}else{var B=this.ymax[A]-(this.ymax[A]-this.ymin[A])*(C-this.margins.top)/this.real_height;return B}};GRAPH.prototype.onEndCrop=function(A){return function(H,F){if(A.window){if((F.width<A.allWidth)&&(F.height<A.allHeight)){A.window.SetCustomWindow();for(var E=0;E<A.axis.length;E++){A.window.SetCustomAxis(A.axis[E])}}else{if(F.height<A.allHeight){var G=A.xmin+(A.xmax-A.xmin)*(H.x1-A.margins.left)/A.real_width;var C=A.xmin+(A.xmax-A.xmin)*(H.x2-A.margins.left)/A.real_width;A.window.SetCustomWindow(G,C);for(var E=0;E<A.axis.length;E++){A.window.SetCustomAxis(A.axis[E])}}else{for(var E=0;E<A.axis.length;E++){var D=A.PointerToY(E,H.y2);var B=A.PointerToY(E,H.y1);A.window.SetCustomAxis(A.axis[E],D,B)}if(F.width>=A.allWidth){var G=A.xmin+(A.xmax-A.xmin)*(H.x1-A.margins.left)/A.real_width;var C=A.xmin+(A.xmax-A.xmin)*(H.x2-A.margins.left)/A.real_width;A.window.SetCustomWindow(G,C)}}}}}};GRAPH.prototype.onCancelCrop=function(A){return function(){if(A.window){A.window.SetCustomWindow();for(var B=0;B<A.axis.length;B++){A.window.SetCustomAxis(A.axis[B])}}if(adei.updater){adei.updater.Notify("SelectionCancel")}}};GRAPH.prototype.onApply=function(A){return function(C,B){A.window.Apply();A.crop.clear()}};GRAPH.prototype.onSave=function(A){return function(C,B){if(A.exporter){A.exporter.Export(true)}else{adeiReportError("Data Exporter is not registered","GRAPH")}}};GRAPH.prototype.onButtonClick=function(self,info){return function(corrds,dimensions){var from=self.config.sel_from;var to=self.config.sel_to;eval("info.object."+info.callback+"(from, to)")}};GRAPH.prototype.GetYAxisNumber=function(A){if(A>this.margins.left){return 0}var C=this.margins.left-A;var B=Math.floor(C/this.axis_size);if(B>=this.axis.length){B=this.axis.length-1}return B};GRAPH.prototype.ProcessMouseScroll=function(G,D,C){switch(adei.key){case 72:if(this.source){if(G>0){this.config.history.Back()}else{this.config.history.Forward()}}break;case 83:if(this.source){if(G>0){this.source.NextServer()}else{this.source.PrevServer()}}break;case 68:if(this.source){if(G>0){this.source.NextDatabase()}else{this.source.PrevDatabase()}}break;case 71:if(this.source){if(G>0){this.source.NextGroup()}else{this.source.PrevGroup()}}break;case 77:if(this.source){if(G>0){this.source.NextMask()}else{this.source.PrevMask()}}break;case 73:if(this.source){if(G>0){this.source.NextItem()}else{this.source.PrevItem()}}break;case 69:alert("not supported");if(this.experiment){if(G>0){this.experiment.NextItem()}else{this.experiment.PrevItem()}}break;case 84:case 16:if(G>0){this.window.MoveLeft()}else{if(G<0){this.window.MoveRight()}}break;case 86:if(G>0){this.window.MoveDown()}else{if(G<0){this.window.MoveUp()}}break;case 87:if(G>0){this.window.IncreaseWidth()}else{if(G<0){this.window.DecreaseWidth()}}break;case 89:for(var E=0;E<this.axis.length;E++){var F=this.PointerToY(E,C);if(G>0){this.window.YZoomOut(E,F)}else{if(G<0){this.window.YZoomIn(E,F)}}}break;case 67:if(G>0){this.window.CenterZoomOut()}else{if(G<0){this.window.CenterZoomIn()}}break;case 76:case 90:A=adeiMathPreciseAdd(this.xmin,this.xsize*(D-this.margins.left)/this.real_width);if(G>0){this.window.LocalZoomOut(A)}else{if(G<0){this.window.LocalZoomIn(A)}}break;case false:if(C>(this.height-this.margins.bottom)){if(G>0){this.window.MoveLeft()}else{if(G<0){this.window.MoveRight()}}}else{if(D<this.margins.left){if(this.axis_size){var B=this.GetYAxisNumber(D);if(G>0){this.window.MoveDown(B)}else{if(G<0){this.window.MoveUp(B)}}}else{for(var B=0;B<this.axis.length;B++){if(G>0){this.window.MoveDown(B)}else{if(G<0){this.window.MoveUp(B)}}}}}else{if((C>=this.margins.top)&&(D<=(this.width-this.margins.right))){var A=adeiMathPreciseAdd(this.xmin,this.xsize*(D-this.margins.left)/this.real_width);if(G>0){this.window.ZoomOut(A)}else{if(G<0){this.window.ZoomIn(A)}}}}}break}};GRAPH.prototype.onMouseScroll=function(A){return function(C,B){A.ProcessMouseScroll(C,B.x,B.y)}};GRAPH.prototype.onLocalDblClick=function(A){return function(B){A.window.ResetXY()}};GRAPH.prototype.onLocalScroll=function(A){return function(B){switch(adei.key){case 83:case 68:var C=domGetScrollEventDelta(B);A.ProcessMouseScroll(C,0,0);break;case 71:case 67:case 76:case false:A.window.CenterZoomOut();break}}};GRAPH.prototype.onMouseMove=function(A){return function(C,G,E){if((!C)||((C.x<A.margins.left)||(C.x>(A.width-A.margins.right)))||((C.y<A.margins.top)||(C.y>(A.height-A.margins.bottom)))){adei.ClearStatus(A.mousepos_status_id);return}var B=adeiMathPreciseAdd(A.xmin,A.xsize*(C.x-A.margins.left)/A.real_width);var D=translate("Mouse cursor is at time: ")+adeiDateReadableFormat(B,A.xsize)+", Y: ";for(var F=A.axis.length-1;F>=0;F--){var H=A.PointerToY(F,C.y);D+='<span style="color: '+A.color[F]+'">'+H.toPrecision(4)+"</span>";if(F){D+=", "}}A.mousepos_status_id=adei.ProposeStatus(D,0)}};GRAPH.prototype.LegendClose=function(A){return function(B){if(A.legend){A.legend.Hide();A.legend=null}Event.stop(B)}};GRAPH.prototype.ShowLegend=function(C,B,A){return function(F){var D=F.responseText;if((C.legend)&&(C.legend.CheckReusability())){C.legend.AlterContent(D);adei.SetSuccessStatus("Legend is updated")}else{var E=new DIALOG(C.LegendClose(C),"Legend",D,"legend");E.Show(C.frame,C.legend,B,A);C.legend=E;adei.ClearStatus(C.legend_status_id)}}};GRAPH.prototype.onClick=function(A){return function(E,C){if((C.x<A.margins.left)||(C.x>(A.width-A.margins.right))){return}if((C.y<A.margins.top)||(C.y>(A.height-A.margins.bottom))){return}var B=adeiMathPreciseAdd(A.xmin,A.xsize*(C.x-A.margins.left)/A.real_width);var G=new Array();for(var D=0;D<A.axis.length;D++){G[D]=A.PointerToY(D,C.y)}switch(adei.key){case 67:A.window.Center(B,G);return;case 90:A.window.DeepZoom(B);return}var F={xmin:A.xmin.toString(),xmax:A.xmax.toString(),ymin:A.ymin,ymax:A.ymax,x:B,y:G,xslt:"legend",time_format:"text"};if(adei.config.cfg.plot_mode==0){A.legend_status_id=adei.SetStatus(translate("Loading legend..."),0);new Ajax.Request(adei.GetServiceURL("legend"),{method:"post",requestHeaders:{Accept:"application/json"},parameters:{props:A.config.GetJSON(F)},onSuccess:A.ShowLegend(A,E.clientX,E.clientY),onFailure:function(){alert("GetLegend request is failed")}})}}};GRAPH.prototype.onDblClick=function(A){return function(D,C){if(C.x<A.margins.left){if(A.axis_size){var B=A.GetYAxisNumber(C.x);A.window.ResetY(A.axis[B])}else{A.window.ResetY()}}else{if(C.y>(A.height-A.margins.bottom)){A.window.ResetXY()}}}};GRAPH.prototype.onTouchStart=function(A){return function(B,C){if(A.startValuesSet==0){A.startX=C.x;A.startY=C.y;A.startValuesSet=1;if(B.touches.length==1){A.onlyLegend=1}}if(B.touches.length==2){A.onlyLegend=0}}};GRAPH.prototype.onTouchMove=function(A){return function(C,B){if(C.touches.length==1){A.swiping=1;A.curX=B.x;A.curY=B.y;A.onlyLegend=0}if(C.touches.length>1){A.swiping=0;A.onlyLegend=0}}};GRAPH.prototype.onTouchEnd=function(A){return function(F){F.preventDefault();A.startValuesSet=0;if(A.swiping==1){var E=A.getSwipeDirection(A);A.swiping=0;if(E!=0){if(A.fader!=0){A.AnimatorEffects(A,1)}A.window.Swipe(E)}}else{if(A.onlyLegend===1&&A.swiping===0){var D=isiPhone();if(!D){var B=adeiMathPreciseAdd(A.xmin,A.xsize*(A.startX-A.margins.left)/A.real_width);var H=new Array();for(var C=0;C<A.axis.length;C++){H[C]=A.PointerToY(C,A.startY)}var G={xmin:A.xmin.toString(),xmax:A.xmax.toString(),ymin:A.ymin,ymax:A.ymax,x:B,y:H,xslt:"legend",time_format:"text"};A.legend_status_id=adei.SetStatus(translate("Loading legend..."),0);new Ajax.Request(adei.GetServiceURL("legend"),{method:"post",requestHeaders:{Accept:"application/json"},parameters:{props:A.config.GetJSON(G)},onSuccess:A.ShowLegend(A,A.startX,A.startY),onFailure:function(){alert("GetLegend request is failed")}});A.onlyLegend=0}}}}};GRAPH.prototype.onGestureStart=function(A){return function(B){A.swiping=0;A.onlyLegend=0}};GRAPH.prototype.onGestureMove=function(A){return function(B,C){}};GRAPH.prototype.onGestureEnd=function(A){return function(D,F,E){var B=new Object();B.x=adeiMathPreciseAdd(A.xmin,A.xsize*(A.startX-A.margins.left)/A.real_width);B.marginsLeft=A.margins.left;B.device=A.idevice;B.y=new Array();for(var C=0;C<A.axis.length;C++){B.y[C]=A.PointerToY(C,A.startY)}if(A.fader!=0){A.AnimatorEffects(A,1)}B.scale=F;B.startX=A.startX;A.window.PinchZoom(B);A.startValuesSet=0;A.window.Apply()}};GRAPH.prototype.onOrientationChange=function(A){return function(B){if(A.fader!=0){A.AnimatorEffects(A,1)}A.window.Apply()}};GRAPH.prototype.getSwipeDirection=function(A){var E=0;var C=0;var G=0;var B=0;var F=(A.real_width)/100;var D=(A.real_height)/100;if(A.startX>A.curX){E=(A.startX-A.curX)/F-20;G=1}else{if(A.startX<A.curX){E=(A.curX-A.startX)/F+20;G=2}}if(A.startY>A.curY){C=(A.startY-A.curY)/D+20;B=3}else{if(A.startY<A.curY){C=(A.curY-A.startY)/D+20;B=4}}if(E<30&&C<30){return 0}if(E>C){return G}else{if(E<C){return B}}};GRAPH.prototype.AnimatorEffects=function(A,B){if(A.fader){switch(B){case 1:A.fader.play();break;case 2:A.fader.reverse();break;default:break}}};GRAPH.prototype.AttachWindow=function(A){this.window=A;A.RegisterGraph(this)};GRAPH.prototype.AttachSource=function(A){this.source=A};GRAPH.prototype.AttachExporter=function(A){this.exporter=A};GRAPH.prototype.SetMargins=function(B,C,D,A){this.margins={left:B,top:C,right:D,bottom:A};this.crop_margins={left:B,top:C,right:D,bottom:A};if(this.crop){this.crop.setMargins(B,C,D,A)}};GRAPH.prototype.SetAllSizes=function(A,B){this.allWidth=A;this.allHeight=B};GRAPH.prototype.Prepare=function(){var B=document.body.offsetWidth-windowGetWidth();if(B>0){var A=this.frame.offsetWidth-B;if(A>0){this.config.SetupGeometry(A,this.frame.offsetHeight);return}}this.config.SetupGeometry(this.frame)};GRAPH.prototype.ConfigureFunction=function(A){return function(){return A.Configure()}};GRAPH.prototype.Configure=function(){this.real_height=this.img.height-this.margins.top-this.margins.bottom;this.real_width=this.img.width-this.margins.left-this.margins.right;if(this.xsize){var A=this.img.width;var B=this.img.height;if(this.crop){if((A!=this.width)||(B!=this.height)){this.width=A;this.height=B;this.crop.setParams()}if(adei.config.cfg.plot_mode!=this.plot_mode){this.crop.setCropMode(((adei.config.cfg.plot_mode==0)?true:false))}}else{var C;if(this.exporter){C=" ("+this.exporter.GetTooltip()+")"}else{C=""}if(this.idevice){this.crop=new Cropper.Img("graph_image",{onOrientationChange:this.onOrientationChange(this),onTouchStart:this.onTouchStart(this),onTouchMove:this.onTouchMove(this),onTouchEnd:this.onTouchEnd(this),onGestureStart:this.onGestureStart(this),onGestureMove:this.onGestureMove(this),onGestureEnd:this.onGestureEnd(this),onApplyClick:this.onApply(this),onSaveClick:this.onSave(this),extraButtons:this.extraButtons,margins:this.crop_margins,allWidth:this.allWidth,allHeight:this.allHeight,monitorImage:false,verticalCrop:((adei.config.cfg.plot_mode==0)?true:false),imageReady:true});this.width=A;this.height=B}else{this.crop=new Cropper.Img("graph_image",{onEndCrop:this.onEndCrop(this),onCancelCrop:this.onCancelCrop(this),onClick:this.onClick(this),onDblClick:this.onDblClick(this),onDblSelClick:this.onApply(this),onMouseScroll:this.onMouseScroll(this),onMouseMove:this.onMouseMove(this),onApplyClick:this.onApply(this),onSaveClick:this.onSave(this),extraButtons:this.extraButtons,margins:this.crop_margins,allWidth:this.allWidth,allHeight:this.allHeight,monitorImage:false,verticalCrop:((adei.config.cfg.plot_mode==0)?true:false),imageReady:true,tooltips:new Object({apply:translate("Zoom to the Selection"),save:translate("Export Selected Data")+C})});this.width=A;this.height=B;this.plot_mode=adei.config.cfg.plot_mode}}if((this.crop)&&(!this.crop.initialized)){this.crop=null;setTimeout(this.ConfigureFunction(this),1000)}}};GRAPH.prototype.Update=function(B,D){if(B.draw){if(B.nodata){this.img.src=adei.GetServiceURL("getimage","id="+B.image);if(this.crop){this.crop.remove();this.crop=null}this.xsize=0}else{if(this.img){var E=1;if(this.crop){var C=this.crop;if((C.selected)||(C.dragging)||(C.resizing)||(C.calcW()>this.allWidth)||(C.calcH()>this.allHeight)){if(D){this.crop.clear()}else{adei.SetStatus(translate("Canceled because of selection"));E=0}}}if(E){adei.SetStatus(translate("Loading Image..."));this.img.src=adei.GetServiceURL("getimage","id="+B.image);this.xmin=parseFloat(B.xmin);this.xmax=parseFloat(B.xmax);this.imin=parseFloat(B.imin);this.imax=parseFloat(B.imax);this.prec=parseFloat(B.precision);this.ymin=parseFloatArray(B.ymin);this.ymax=parseFloatArray(B.ymax);this.ylog=parseFloatArray(B.ylog);this.yzoom=parseIntArray(B.yzoom);this.axis=parseStringArray(B.axis);this.color=parseArray(B.color);this.name=parseArray(B.name);this.axis_size=parseFloat(B.axis_size);this.onload_message=B.warning;if(B.margins){this.SetMargins(B.margins[0],B.margins[1],B.margins[2],B.margins[3])}this.xsize=parseFloat(adeiMathPreciseSubstract(this.xmax,this.xmin));this.ysize=new Object;for(var A=0;A<this.axis.length;A++){this.ysize[A]=this.ymax[A]-this.ymin[A]}this.window.NewGraph(this,this.xmin,this.xmax)}}}}};GRAPH.prototype.SetExportTooltip=function(){var A=this.exporter.GetTooltip();if((this.crop)&&(A)){this.crop.setTooltip(new Object({save:translate("Export Selected Data (%s)",A)}))}};GRAPH.prototype.NotifyExportSettings=function(){this.SetExportTooltip()};GRAPH.prototype.AdjustGeometry=function(E,A,F,G){if(this.frame.offsetParent){var C=domGetNodeOffset(this.frame);var B=F-C[0];var D=G-C[1]-1;domAdjustGeometry(this.frame,B,D,true)}};GRAPH.prototype.GetPrecision=function(B){var A=this.prec;if(B>A){A=B}return(this.xsize*A)/this.real_width};function HISTORY(B){window.dhtmlHistory.create({toJSON:function(C){return Object.toJSON(C)},fromJSON:function(C){return C.evalJSON()}});dhtmlHistory.initialize();var A=new Date();this.busy=A.getTime();this.endpos=false;this.automode=false;this.started=false;this.callback=B;dhtmlHistory.addListener(this.onHistoryEvent(this))}HISTORY.prototype.onHistoryEvent=function(A){return function(E,G){if(E=="__startup__"){history.forward();if(!A.automode){adeiReportError(translate("History is exhausted"))}return}var D=A.GetProps(E);var B=A.GetID(E);var C=A.callback(D,G,B);A.automode=false;var F=new Date();A.busy=F.getTime();return C}};HISTORY.prototype.GetProps=function(A){if(typeof A=="undefined"){var A=dhtmlHistory.getCurrentLocation()}return A.replace(/\&history_id=\d+/,"")};HISTORY.prototype.GetID=function(B){if(typeof B=="undefined"){var B=dhtmlHistory.getCurrentLocation()}var A=/\&history_id=(\d+)/.exec(B);if(A){return A[1]}return 0};HISTORY.prototype.CreateLocation=function(C,A){var B=C+"&history_id="+A;return B};HISTORY.prototype.Add=function(B,A){if(!this.started){dhtmlHistory.add("__startup__",A);this.started=true}var D=new Date();this.endpos=D.getTime();var C=this.CreateLocation(B,this.endpos);dhtmlHistory.add(C,A)};HISTORY.prototype.ReplaceLocation=function(C,E,B){if(typeof F=="undefined"){var F=dhtmlHistory.getCurrentLocation();if(typeof B=="undefined"){var B=this.GetID(F)}}var G=this.CreateLocation(E,B);var A=this.CreateLocation(C,B);var H=window.location.toString();var D;if(H.match("#")){D=H.replace(/#.*$/,"#"+A);this.AddSynonim(G,A)}else{D="#"+A}window.location.replace(D)};HISTORY.prototype.AddSynonim=function(C,A){var B=historyStorage.get(C);if(B){if(historyStorage.hasKey(A)){historyStorage.remove(A)}historyStorage.put(A,B)}};HISTORY.prototype.Back=function(){if(!this.busy){return}var A=new Date();if((A.getTime()-this.busy)<50){return}this.busy=false;this.automode=true;history.back()};HISTORY.prototype.Forward=function(){var B=this.GetID();if(B==this.endpos){return}if(!this.busy){return}var A=new Date();if((A.getTime()-this.busy)<50){return}this.busy=false;history.forward()};function INFOTAB(A,C,B,D){this.module=A;if(typeof D=="object"){this.div=D}else{this.div=document.getElementById(D);if(!this.div){adei.ReportError(translate('Element "%s" is not present in current document model',D))}}if(typeof B=="object"){this.ctrldiv=B}else{this.ctrldiv=document.getElementById(B);if(!this.ctrldiv){adei.ReportError(translate('Element "%s" is not present in current document model',B))}}this.infomode=new SELECT(C,infotabUpdateModule,this);this.infomode.SetupSource(adei.GetService("view","target=list"),"infomod");adei.RegisterCropperButton({name:"view_info",tooltip:"View Info",object:this,callback:"onSelect",css:"imgCrop_button_info",vertical:true,keep_selection:true});this.mod=null;this.window=null;this.displayed=false;this.page=false;this.width=0;this.height=0;adei.updater.RegisterListener(this);adei.RegisterExtraProperty("infomod");adei.config.RegisterPropertyGroup(/view_/,true);adei.config.Register(this)}INFOTAB.prototype.RegisterPage=function(A){this.page=A};INFOTAB.prototype.SetupGeometry=function(){this.width=this.div.offsetWidth;this.height=this.div.offsetHeight};INFOTAB.prototype.NotifySource=function(){this.window=null;this.displayed=false;this.div.innerHTML="";var A=undefined;if(this.mod){A=this.mod}else{if(adei.config.cfg_extra.custom.infomod){A=adei.config.cfg_extra.custom.infomod}}this.infomode.Update(adei.GetService("view",urlJoinProps(adei.config.GetProps(),"target=list")),undefined,A)};INFOTAB.prototype.NotifyInterval=function(){this.window=null;this.displayed=false;this.div.innerHTML="";var A=undefined;if(this.mod){A=this.mod}else{if(adei.config.cfg_extra.custom.infomod){A=adei.config.cfg_extra.custom.infomod}}this.infomode.Update(adei.GetService("view",urlJoinProps(adei.config.GetProps(),"target=list")),undefined,A)};INFOTAB.prototype.NotifySelectionCancel=function(){this.window=null};INFOTAB.prototype.NotifyPage=function(){this.div.innerHTML="";this.window=null};INFOTAB.prototype.ReadConfig=function(A){if(A){if(A.reload){A=new Object;if(typeof adei.config.cfg_extra.custom.infomod!="undefined"){A.infomod=adei.config.cfg_extra.custom.infomod}this.infomode.Update(A)}else{if(typeof adei.config.cfg_extra.custom.infomod!="undefined"){var B=this.infomode.GetValue();this.mod=adei.config.cfg_extra.custom.infomod;if((B!=this.mod)&&(this.mod)){this.infomode.SetValue(this.mod);this.Reload()}}}}};INFOTAB.prototype.ApplyOptions=function(){var C=/^view_(.*)$/;var A=this.ctrldiv.getElementsByTagName("input");for(var B in A){var D=A[B].id;if(C.exec(D)){adei.RegisterExtraProperty(D);adei.SetCustomProperties(D+"="+A[B].value,false)}}A=this.ctrldiv.getElementsByTagName("select");for(var B in A){var D=A[B].id;if(C.exec(D)){adei.RegisterExtraProperty(D,null);adei.SetCustomProperties(D+"="+A[B].value,false)}}};INFOTAB.prototype.LoadOptions=function(){var B=/^view_(.*)$/;for(var A in adei.config.cfg_extra.custom){if(a=B.exec(A)){var C=document.getElementById(A);if(C){C.value=adei.config.cfg_extra.custom[A]}}}this.ApplyOptions()};INFOTAB.prototype.optionsLoadCallback=function(A,B){return function(){A.LoadOptions();A.SetupGeometry();B.infotab_width=A.width;B.infotab_height=A.height;if(A.page==adei.module.current_module){adei.updater.Update()}if(A.displayed){B.target="get";adei.ServiceDIV(A.div,"view","views/"+A.mod,B,true)}}};INFOTAB.prototype.Reload=function(){var A=new Object;if(this.window){A.window=this.window}A.view_object="infotab";this.div.innerHTML="";if(this.mod){adei.SetCustomProperties("infomod="+this.mod,false)}A.target="get_options";adei.ServiceDIV(this.ctrldiv,"view","views/"+this.mod+"_options",A,true,this.optionsLoadCallback(this,A))};INFOTAB.prototype.Update=function(){this.displayed=true;this.Reload()};INFOTAB.prototype.UpdateModule=function(B,A){if(typeof B=="undefined"){B=this.infomode.GetValue()}this.mod=B;if(typeof A=="undefined"){this.displayed=true}this.Reload()};INFOTAB.prototype.OptionsUpdater=function(B,A){adei.RegisterExtraProperty(B);if(typeof A=="boolean"){if(A){A=1}else{A=0}}adei.SetCustomProperties(B+"="+A,false);this.displayed=true;this.Reload()};INFOTAB.prototype.onSelect=function(B,A){this.displayed=true;this.window=B+"-"+A;this.Reload();adei.OpenControl(this.module)};function infotabUpdateModule(C,A,B){return C.UpdateModule(A,B)}function INTERVAL_CONFIG(){this.start="";this.end="";this.custom=0}function INTERVAL(D,C,B,A){this.cfg=new INTERVAL_CONFIG;this.window=D;this.props=null;this.source_expsel=new SELECT(C,intervalUpdateExperiment,this);this.sin=document.getElementById(B);if(!this.sin){adeiReportError('Custom experiment start time input field ("'+B+'") is not found')}this.ein=document.getElementById(A);if(!this.ein){adeiReportError('Custom experiment end time input field ("'+A+'") is not found')}this.source_expsel.SetupSource(adei.GetSelectService("experiments"),"experiment");this.source_expsel.SetupCompletionCallbacks(intervalEnableControls,intervalEnableControls);this.source_expsel.AddChild(D.source_winsel)}INTERVAL.prototype.DisableControls=function(){this.source_expsel.Disable();this.window.DisableControls()};INTERVAL.prototype.EnableControls=function(){this.window.EnableControls();this.source_expsel.Enable()};INTERVAL.prototype.SetConfig=function(A){this.config=A;this.window.SetConfig(A)};INTERVAL.prototype.SetUpdater=function(A){this.updater=A;this.window.SetUpdater(A)};INTERVAL.prototype.ApplyConfig=function(A){this.window.ApplyConfig(A);var C,B;if(this.cfg.custom){if(this.sin.value){C=adeiDateParse(this.sin.value)}else{C=""}if(this.ein.value){B=adeiDateParse(this.ein.value)}else{B=""}this.cfg.start=C;this.cfg.end=B}else{C=this.cfg.start;B=this.cfg.end}this.config.SetInterval(C,B)};INTERVAL.prototype.ReadConfig=function(A){A.experiment=this.config.cfg.experiment;this.window.ReadConfig(A)};INTERVAL.prototype.FixOptions=function(A){this.window.FixOptions(A)};INTERVAL.prototype.Update=function(A,B){if(A){this.props=A}if(B){if(B.reload){this.DisableControls();this.source_expsel.Update(this.props,B,B?B.experiment:null,this.experiment)}else{if((B.experiment)||(B.reset)){this.UpdateExperiment(B.experiment,B)}}}};INTERVAL.prototype.UpdateExperiment=function(B,A){if(typeof B=="undefined"){B=this.source_expsel.GetValue()}if((A)&&(A.confirmed)){this.experiment=B;if(B=="0"){if(this.cfg.custom==0){cssShowClass(".hide_experiment_custom");this.cfg.custom=1;if(!this.module_on_display){this.fix_hidden=true}if(typeof this.geometry_cb=="function"){this.geometry_cb(this.geometry_cbattr)}}}else{if(this.cfg.custom){cssHideClass(".hide_experiment_custom");this.cfg.custom=0;if(!this.module_on_display){this.fix_hidden=true}}var C=B.split("-",2);this.cfg.start=C[0];this.cfg.end=C[1]}}else{if(((A)&&(A.reload))||(B!=this.experiment)){if(typeof A=="undefined"){A=new Object}A.reload=true;this.DisableControls();this.FixOptions(A);this.source_expsel.UpdateChilds(null,A,B,this.experiment)}else{if((A)&&((A.window)||(typeof A.window_width!="undefined"))){this.window.UpdateWidth(A.window_width,A)}}}};INTERVAL.prototype.RegisterGeometryCallback=function(A,B){this.window.RegisterGeometryCallback(A,B);this.geometry_cb=A;this.geometry_cbattr=B};INTERVAL.prototype.FixHidden=function(){if((this.fix_hidden)&&(this.module_on_display)){if(this.cfg.custom){cssHideClass(".hide_experiment_custom");cssShowClass(".hide_experiment_custom")}else{cssShowClass(".hide_experiment_custom");cssHideClass(".hide_experiment_custom")}this.fix_hidden=false}this.window.FixHidden()};function intervalUpdateExperiment(A,C,B){A.UpdateExperiment(C,B)}function intervalEnableControls(A){A.EnableControls()}function adeiMathPreciseSubstract(J,I){var C,B;var G=J.toString();var D=I.toString();var H=G.indexOf(".");if(H<0){C=0}else{C=parseFloat("0."+G.substr(H+1))}H=D.indexOf(".");if(H<0){B=0}else{B=parseFloat("0."+D.substr(H+1))}if((C)||(B)){var F=Math.floor(J);var E=Math.floor(I);var A=C-B;if(A<0){var K=(A+1).toString();H=K.indexOf(".");return(F-E-1).toString()+K.substr(H)}else{if(A>0){var K=A.toString();H=K.indexOf(".");return(F-E).toString()+K.substr(H)}else{return F-E}}}return J-I}function adeiMathPreciseAdd(J,I){var C,B;var G=J.toString();var D=I.toString();var H=G.indexOf(".");if(H<0){C=0}else{C=parseFloat("0."+G.substr(H+1))}H=D.indexOf(".");if(H<0){B=0}else{B=parseFloat("0."+D.substr(H+1))}if((C)||(B)){var F=Math.floor(J);var E=Math.floor(I);var A=C+B;if(A>1){var K=A.toString();H=K.indexOf(".");return(F+E+1).toString()+K.substr(H)}else{if(A<1){var K=A.toString();H=K.indexOf(".");return(F+E).toString()+K.substr(H)}else{return F+E+1}}}return J+I}function MENU(C,H,F,G){var A=document.getElementById(F);if(isIE()){A.style.zIndex=400}var G=false;var E=/dhtmlxmenu_(.*).css$/;for(var D=0;D<document.styleSheets.length;D++){if((document.styleSheets[D])&&(document.styleSheets[D].href)){var B=document.styleSheets[D].href;if(m=E.exec(B)){G=m[1];break}}}if(!G){adeiReportError("No DHTMLX skin is loaded, check if dhtmlx css files are in place")}this.aMenuBar=new dhtmlXMenuObject(F,G);this.aMenuBar.setImagePath("includes/dhtmlx/imgs/");this.aMenuBar.setIconsPath("images/");this.aMenuBar.attachEvent("onClick",this.onClick(this));this.config=C;if(C){C.Register(this)}this.updater=H;this.window=null;this.exporter=null}MENU.prototype.Load=function(){this.ReLoad()};MENU.prototype.AttachWindow=function(A){this.window=A};MENU.prototype.AttachExporter=function(A){this.exporter=A};MENU.prototype.OnLoad=function(A){return function(){if(adei.cfg.menu_scroll_limit){A.aMenuBar.setOverflowHeight(adei.cfg.menu_scroll_limit)}}};MENU.prototype.ReLoad=function(){this.aMenuBar.loadXML(adei.GetServiceURL("menu"),this.OnLoad(this))};MENU.prototype.SetQuery=function(C,D,A,B,E){if(typeof E=="undefined"){E="0-0"}this.config.ApplyDataSource(C,D,A,undefined,B,E)};MENU.prototype.SetSource=function(C,D,A,B){this.config.ApplyDataSource(C,D,A,undefined,B)};MENU.prototype.SetWindow=function(A){if(this.window){this.window.UpdateWidth(A)}};MENU.prototype.SetFormat=function(A){if(this.exporter){this.exporter.SetFormat(A)}};MENU.prototype.SetExportSampling=function(A){if(this.exporter){this.exporter.SetSampling(A)}};MENU.prototype.LockWindow=function(){if(this.window){this.window.Lock()}};MENU.prototype.ReDraw=function(){if(this.updater){this.updater.Update()}};MENU.prototype.ExportWindow=function(){if(this.exporter){this.exporter.Export(true,0)}};MENU.prototype.SetExportMask=function(A){if(this.exporter){this.exporter.SetMask(A)}};MENU.prototype.onClick=function(self){return function(itemId,itemValue){var params=itemId.split("__");if(params[0]=="folder"){return}var args="";if(params.length>1){args='"'+params[1]+'"';for(var i=2;i<params.length;i++){args+=', "'+params[i]+'"'}}var cmd="if (typeof self."+params[0]+' == "function") {self.'+params[0]+"("+args+');} else {adeiReportError("Invalid menu action ('+params[0]+')", "MENU");}';eval(cmd)}};var currnet_module=null;var module_callback=null;function MODULE(A,C,B){if(typeof C=="undefined"){C=null}if(typeof B=="undefined"){B=null}this.module_name=A;this.current_module=null;this.no_height_adjustments=false;this.module_height=0;this.module=new Array();this.names=new Array();this.geometry_callback=new Array();this.module_callback=new Array();if(C){this.RegisterCallback(C,B)}}MODULE.prototype.DisableHeightAdjustments=function(){this.no_height_adjustments=true};MODULE.prototype.Register=function(A,B){if(B){this.names.push(A);this.module[A]=B;return true}return false};MODULE.prototype.RegisterCallback=function(A,B){this.module_callback.push({cb:A,cbattr:B})};MODULE.prototype.RegisterGeometryCallback=function(A,B){this.geometry_callback.push({cb:A,cbattr:B})};MODULE.prototype.GetModule=function(A){return this.module[A]};MODULE.prototype.GetOpenModule=function(){if(this.current_module){return this.GetModule(this.current_module)}return null};MODULE.prototype.Open=function(A){var B;if(A!=this.current_module){this.UpdateGeometry();if(this.module_name){B=this.module_name+"_"}else{B=""}if(this.current_module){domHide("module_"+B+this.current_module);cssSetClass("module_link_"+B+this.current_module,"module_"+B+"link")}domShow("module_"+B+A);cssSetClass("module_link_"+B+A,"module_"+B+"link_current");this.current_module=A;this.RunModuleCallbacks();this.UpdateGeometry()}};MODULE.prototype.RunGeometryCallbacks=function(){for(var B=0;B<this.geometry_callback.length;B++){var A=this.geometry_callback[B];A.cb(A.cbattr)}};MODULE.prototype.RunModuleCallbacks=function(){for(var B=0;B<this.module_callback.length;B++){var A=this.module_callback[B];A.cb(A.cbattr,this.current_module)}};MODULE.prototype.UpdateGeometry=function(){if(this.no_height_adjustments){return}with(this){if(module_name){prefix=module_name+"_"}else{prefix=""}var node=document.getElementById("module_"+prefix+current_module);if(node){var cur_height_value=node.offsetHeight;var runcb=false;if(node.scrollHeight){var full_height=node.scrollHeight;if(full_height>cur_height_value){if(full_height>module_height){module_height=full_height;runcb=true}cur_height_value=0}}if(cur_height_value>module_height){module_height=cur_height_value;domSetMinHeight(node,module_height);this.RunGeometryCallbacks()}else{if(module_height>0){domSetMinHeight(node,module_height);this.RunGeometryCallbacks()}}}}};var default_module=new MODULE(null);function moduleSetCurrent(A){default_module.SetCurrent(A)}function moduleOpen(A){default_module.Open(A)}function moduleUpdateGeometry(A){A.UpdateGeometry()}function moduleGetElement(A,B){if(typeof B=="undefined"){prefix=""}else{prefix=B+"_"}return document.getElementById("module_"+prefix+A)}function PLOT_CONFIG(){this.plot_mode=null}function PLOT(A){this.cfg=new PLOT_CONFIG();this.plotsel=new SELECT(A,plotUpdatePlotMode,this);this.updater=null;this.config=null}PLOT.prototype.AttachConfig=function(A){this.config=A;A.Register(this)};PLOT.prototype.Init=function(B,A){if(typeof A=="undefined"){A=new Object}this.updater=B;A.reload=true;A.confirm=true;this.Update(A)};PLOT.prototype.SetPlot=function(A){this.Update(new Object({plot_mode:A,apply:true}))};PLOT.prototype.ReadConfig=function(A){if(this.config){var A=new Object();if(this.config.cfg.plot_mode){A.plot_mode=this.config.cfg.plot_mode}this.Update(A)}};PLOT.prototype.Update=function(A){if(A){if(A.reload){this.plotsel.Update(adei.GetSelectService("plot_modes"),A,A?A.plot_mode:null)}else{if(A.plot_mode){this.UpdatePlotMode(A.plot_mode,A);if(this.plotsel.GetValue()!=A.plot_mode){this.plotsel.SetValue(A.plot_mode)}}}}};PLOT.prototype.UpdatePlotMode=function(B,A){this.cfg.plot_mode=B;if((typeof A=="undefined")||(A.apply)){this.Apply(B)}};PLOT.prototype.Apply=function(A){if(A){this.config.SetPlotSettings(A)}else{this.config.SetPlotSettings(this.cfg.plot_mode)}this.config.Save();if(this.updater){this.updater.Update()}};function plotUpdatePlotMode(A,C,B){return A.UpdatePlotMode(C,B)}function POPUP(A,B){this.popup_states=new Array();this.popup_callback=new Array();this.popup_rewidth_callback=new Array();this.popup_reheight_callback=new Array();this.popup_on_callbacks=new Array();this.popup_off_callbacks=new Array();this.current_height=new Array();this.popups=new Array();this.modules=new Array();this.controls=new Array();this.popups_width=300;this.num_opened=0;this.super_popup=false;this.resizable=null;if(typeof A!="undefined"){this.RegisterCallback(A,B)}}POPUP.prototype.RegisterPopup=function(A){this.popups.push(A);this.controls[A]=new Array();this.popup_states[A]=0};POPUP.prototype.RegisterControlsModule=function(B,A){if(typeof this.controls[B]=="undefined"){this.RegisterPopup(B)}this.modules[B]=A};POPUP.prototype.RegisterControl=function(A,B){if(typeof this.controls[A]=="undefined"){this.RegisterPopup(A)}this.controls[A].push(B)};POPUP.prototype.FindControl=function(D){for(var C=0;C<this.popups.length;C++){var A=this.popups[C];if(typeof this.controls[A]!="undefind"){for(var B=0;B<this.controls[A].length;B++){if(this.controls[A][B]==D){return A}}}}return false};POPUP.prototype.OpenControl=function(C){var A=this.FindControl(C);var B=this.modules[A];if((A)&&(B)){this.Open(A);B.Open(C)}};POPUP.prototype.TryFixedSizeMode=function(F,A,B){this.super_popup=false;var D=domGetLastChildByName(F,"div");if(!D){return}if(!domGetFirstChildByName(D,"table")){D=domGetLastChildByName(D,"div");if(!D){return}var E=D.getElementsByTagName("table");if((!E)||(!E.length)){alert("problem detecting popups structure")}}this.super_node=D;var C=document.getElementById("popup_switch_"+A);nodes=C.getElementsByTagName("button");if((!nodes)||(!nodes.length)){alert("problem detecting popups structure");return}this.geometry_nodes=new Array();if(B){D=document.getElementById(B);if(!D){alert("Invalid geometry_node is supplied");return}this.geometry_nodes.push(D)}this.super_button=nodes[0];this.super_popup=A};POPUP.prototype.RegisterOnCallback=function(B,A,C,D){if(typeof this.popup_on_callbacks[B]=="undefined"){this.popup_on_callbacks[B]=new Array()}if(typeof D=="undefined"){D=false}this.popup_on_callbacks[B].push({cb:A,cbattr:C,once:D})};POPUP.prototype.RegisterOffCallback=function(B,A,C){if(typeof this.popup_off_callbacks[B]=="undefined"){this.popup_off_callbacks[B]=new Array()}this.popup_off_callbacks[B].push({cb:A,cbattr:C})};POPUP.prototype.RegisterCallback=function(A,B){this.popup_callback.push({cb:A,cbattr:B})};POPUP.prototype.RegisterReWidthCallback=function(A,B){this.popup_rewidth_callback.push({cb:A,cbattr:B})};POPUP.prototype.RegisterReHeightCallback=function(A,B){this.popup_reheight_callback.push({cb:A,cbattr:B})};POPUP.prototype.GetEncompasingNode=function(A){return A.parentNode.parentNode.parentNode.parentNode};POPUP.prototype.RunReWidthCallbacksFunction=function(A){return function(){for(var C=0;C<A.popup_rewidth_callback.length;C++){var B=A.popup_rewidth_callback[C];B.cb(B.cbattr)}}};POPUP.prototype.RunReHeightCallbacksFunction=function(A){return function(){for(var C=0;C<A.popup_reheight_callback.length;C++){var B=A.popup_reheight_callback[C];B.cb(B.cbattr)}}};POPUP.prototype.RunReWidthCallbacks=function(){setTimeout(this.RunReWidthCallbacksFunction(this),adei.cfg.parse_delay)};POPUP.prototype.RunReHeightCallbacks=function(){setTimeout(this.RunReHeightCallbacksFunction(this),adei.cfg.parse_delay)};POPUP.prototype.UpdateGeometry=function(module){this.UpdateGlobalGeometry();with(this){var node=document.getElementById("popup_"+module);var switch_node=document.getElementById("popup_switch_"+module);var tbl_node=this.GetEncompasingNode(node);if(node){var cur_width_value=tbl_node.offsetWidth;if(cur_width_value>this.popups_width){this.popups_width=cur_width_value;for(var i=0;i<this.popups.length;i++){var popup=this.popups[i];if(this.popup_states[popup]){var popup_node=document.getElementById("popup_"+popup);var popup_tbl_node=this.GetEncompasingNode(node);if(popup_node){domSetMinWidth(popup_node,this.popups_width,false,popup_tbl_node.parentNode)}}}if(this.num_opened){this.RunReWidthCallbacks()}}else{if(cur_width_value<this.popups_width){domSetMinWidth(node,this.popups_width,false,tbl_node.parentNode)}}}if((node)&&(switch_node)&&(module!=this.super_popup)){var a=switch_node.getElementsByTagName("button")[0];if(a){var new_height_value=node.parentNode.offsetHeight;if(!this.current_height[module]){this.current_height[module]=a.offsetHeight}if(this.current_height[module]<new_height_value){this.current_height[module]=new_height_value;domSetMinHeight(a,new_height_value,false,a.parentNode);this.RunReHeightCallbacks()}}}}};POPUP.prototype.Open=function(A){if(!this.popup_states[A]){this.Switch(A)}};POPUP.prototype.Close=function(A){if(this.popup_states[A]){this.Switch(A)}};POPUP.prototype.Switch=function(module){with(this){if(typeof this.popup_states[module]=="undefined"){this.RegisterPopup(module)}if(this.popup_states[module]){if(client.isKonqueror()){var node=document.getElementById("popup_"+module);if(node){var tdnode=node.parentNode;tdnode.style.width="0px"}}domHide("popup_"+module);this.popup_states[module]=0;if(typeof this.popup_off_callbacks[module]!="undefined"){for(var i=0;i<this.popup_off_callbacks[module].length;i++){var cb=this.popup_off_callbacks[module][i];cb.cb(cb.cbattr,false)}}this.num_opened--;if(!this.num_opened){this.RunReWidthCallbacks()}}else{domShow("popup_"+module);if(client.isKonqueror()){var node=document.getElementById("popup_"+module);if(node){var tdnode=node.parentNode;tdnode.style.width="1px"}}this.UpdateGeometry(module);popup_states[module]=1;if(typeof this.popup_on_callbacks[module]!="undefined"){for(var i=0;i<this.popup_on_callbacks[module].length;i++){var cb=this.popup_on_callbacks[module][i];cb.cb(cb.cbattr,true);if(cb.once){this.popup_on_callbacks[module].splice(i,1);i=i-1}}}if(!this.num_opened){this.RunReWidthCallbacks()}this.num_opened++}for(var i=0;i<popup_callback.length;i++){var cb=popup_callback[i];cb.cb(cb.cbattr)}}};POPUP.prototype.RunCallbacks=function(){with(this){for(var i=0;i<popup_callback.length;i++){var cb=popup_callback[i];cb.cb(cb.cbattr)}}};POPUP.prototype.UpdateGlobalGeometry=function(A,G){if(!this.super_popup){return}if(G){this.global_end=G}else{if(this.global_end){G=this.global_end}else{return}}var B=domGetNodeOffset(this.super_node);var F=G-B[1];var B=domGetNodeOffset(this.super_button);var E=G-B[1];domSetHeight(this.super_button,E,true,this.super_node,F);if(!this.popup_states.controls){return}for(var C=0;C<this.geometry_nodes.length;++C){var D=this.geometry_nodes[C];var B=domGetNodeOffset(D);var E=G-B[1];domSetHeight(D,E,true,this.super_node,F)}};function popupUpdateGeometryCallback(B,A){B.popup.UpdateGeometry(B.module)}function SEARCH(A,B){if(typeof B=="object"){this.div=B}else{this.div=document.getElementById(B)}if(!this.div){adei.ReportError(translate('Element "%s" is not present in current document model',B))}this.module=A}SEARCH.prototype.StartSearch=function(A){this.div.innerHTML="Searching...";adei.xslpool.Load("search",adei.GetSearchService(A),searchResults,this)};SEARCH.prototype.Results=function(A,B){adei.OpenControl(this.module);if(A){htmlReplace(A,this.div,true)}else{htmlReplace(translate('Search is failed due "%s"',B),this.div)}};function searchResults(A,C,B){C.Results(A,B)}function selectUpdater(A,D,B){var C=D.select;if(A){C.UpdateStart(A,D)}else{C.UpdateConfirm(A,D,false,B)}}function SELECT(C,A,B){if(typeof A=="undefined"){this.callback=null}else{this.callback=A}if(typeof B=="undefined"){this.cbattr=null}else{this.cbattr=B}this.id=C;this.prop=false;this.url=false;this.cb_success=null;this.cb_failure=null;this.node=document.getElementById(this.id);if(!this.node){adeiReportError(translate('SELECT "%s" is not found',this.id))}this.childs=new Array()}SELECT.prototype.SetupSource=function(A,B){this.url=A;this.prop=B};SELECT.prototype.SetupCompletionCallbacks=function(C,B,A){this.cb_success=C;this.cb_failure=B;if(typeof A=="undefined"){this.cb_completion_attr=this.cbattr}else{this.cb_completion_attr=A}};SELECT.prototype.AddChild=function(A){this.childs.push(A)};SELECT.prototype.ParseError=function(A){var B;var C=A.getElementsByTagName("Error");if(C.length>0){B=C[0].firstChild.data}else{var C=A.getElementsByTagName("parsererror");if(C.length>0){B=C[0].firstChild.data}else{B="Empty response"}}return B};SELECT.prototype.ParseValues=function(A){var D=new Array();var B=A.getElementsByTagName("Value");for(var C=0;C<B.length;C++){var E=B[C];D.push(E.getAttribute("value"))}return D};SELECT.prototype.UpdateStart=function(xmldoc,param,just_childs){var value;if(just_childs){var curvalue=this.GetValue();if((param.value==null)||(param.value==curvalue)){value=curvalue}else{this.SetValue(param.value);value=this.GetValue()}}else{var values=this.ParseValues(xmldoc);if(values.length<=0){error=this.ParseError(xmldoc);return this.UpdateConfirm(xmldoc,param,false,error)}if(param.value==null){var valnum=0;if((typeof param.nexttry!="undefined")&&(param.nexttry>0)){valnum=param.nexttry}value=values[valnum];valnum+=1;if(valnum<values.length){param.nexttry=valnum}else{param.nexttry=-1}}else{if(values.indexOf(param.value)<0){value=values[0]}else{value=param.value}}}if(!this.childs.length){return this.UpdateConfirm(xmldoc,param,false,0)}var url;if(this.url){url=(param.url?(param.url+"&"):"")+this.prop+"="+value}else{url=urlAddProperty(param.url,this.prop,value)}param.child_confirmation=new Array(this.childs.length);for(var i=0;i<this.childs.length;i++){var child=this.childs[i];var prop_name=child.prop;var prop=false;if(prop_name){var opt_prop=eval("param.opts."+prop_name);if(typeof opt_prop!="undefined"){prop=opt_prop}}var opts;if(param.opts){opts=objectClone(param.opts,["parental_confirmation","child_confirmation","cb_attr"])}else{opts=new Array()}opts.parental_confirmation={parent:this,index:i,param:param,xmldoc:xmldoc};child.Update(url,opts,prop)}};SELECT.prototype.UpdateConfirm=function(J,D,B,H,I){if(B){var E=B.index;var F=B.param;if(!F.child_confirmation[E]){F.child_confirmation[E]={xmldoc:J,param:D,error:H,errobj:I}}for(E=0;E<this.childs.length;E++){if(typeof F.child_confirmation[E]=="undefined"){break}}if(E<this.childs.length){return}for(E=0;E<this.childs.length;E++){if(F.child_confirmation[E].error){H=F.child_confirmation[E].error;I=F.child_confirmation[E].errobj;if(typeof I=="undefined"){I=this.childs[E]}}}J=B.xmldoc;D=B.param}if((H)&&(D.nexttry)){this.UpdateStart(J,D,false)}else{if(D.opts.parental_confirmation){var G=D.opts.parental_confirmation;G.parent.UpdateConfirm(J,D,G,H,I)}else{if(H){var C;if((I)&&(I!=this)){C=translate('SELECT "%s" update is failed. Error: %s',I.id,H)}else{C=translate('SELECT "%s" update is failed. Error: %s',this.id,H)}var A=D.opts;if(typeof D.restore!="undefined"){this.SetValue(D.restore)}this.UpdateFailure(A,C)}else{D.opts.succeeded=true;this.UpdateComplete(J,D)}}}};SELECT.prototype.UpdateComplete=function(N,F){for(var I=0;I<this.childs.length;I++){var D=this.childs[I];var G=F.child_confirmation[I];D.UpdateComplete(G.xmldoc,G.param)}if(!N){if(F.value){this.SetValue(F.value)}this.UpdateSuccess(F.opts);return}var M=N.getElementsByTagName("Value");if(M.length>0){var L;var C=this.node;while(C.hasChildNodes()){C.removeChild(C.firstChild)}for(var I=0;I<M.length;I++){var L=M[I];var H=L.getAttribute("value");var J=L.getAttribute("name");if(!J){J=H}var B=document.createElement("option");B.setAttribute("value",H);if(F.value){if(H==F.value){B.setAttribute("selected",1)}}else{if((typeof F.nexttry!="undefined")&&(F.nexttry>1)){if((I+1)==F.nexttry){B.setAttribute("selected",1)}}}B.appendChild(document.createTextNode(J));C.appendChild(B)}this.UpdateSuccess(F.opts)}else{var K=this.ParseError();var E=translate('SELECT "%s" update is unexpectedly failed. Error: %s',this.id,K);var A=F.opts;this.UpdateFailure(A,E)}};SELECT.prototype.UpdateSuccess=function(A){A.confirmed=true;if(this.callback){this.callback(this.cbattr,this.GetValue(),A)}if(A.succeeded){if(this.cb_success){this.cb_success(this.cb_completion_attr,A.success_value,A)}if(A.success_cb){A.success_cb(A.cb_attr,A.success_value,A)}}};SELECT.prototype.UpdateFailure=function(A,B){A.canceled=true;if(this.cb_failure){this.cb_failure(this.cb_completion_attr,A.failure_value,A)}if(A.failure_cb){A.failure_cb(A.cb_attr,A.failure_value,A)}if(typeof B=="undefined"){B=translate("Uncatched failure")}adeiReportError(B)};SELECT.prototype.Update=function(A,B,C){var D=new Object;D.select=this;if(typeof B=="undefined"){D.opts=new Array()}else{D.opts=B}if(typeof C=="undefined"){D.value=null}else{D.value=C}D.url=A;queueXML(this.url?urlConcatenate(this.url,A):A,selectUpdater,D)};SELECT.prototype.UpdateChilds=function(A,C,D,B){var E=new Object;E.select=this;if(typeof C=="undefined"){E.opts=new Array()}else{E.opts=C}if(typeof D=="undefined"){E.value=null}else{E.value=D}if(typeof B=="undefined"){E.restore=undefined}else{E.restore=B}E.url=A;this.UpdateStart(null,E,true)};SELECT.prototype.GetLastIndex=function(){return this.node.length-1};SELECT.prototype.GetValue=function(A){if(typeof A=="undefined"){return this.node.value}else{if((A<this.node.length)&&(A>=0)){return this.node[A].value}}return null};SELECT.prototype.GetIndex=function(B){if(typeof B=="undefined"){return this.node.selectedIndex}else{for(var A=0;A<this.node.length;A++){if(this.node[A].value==B){return A}}return -1}};SELECT.prototype.SetIndex=function(A){if((A<this.node.length)&&(A>=0)){this.node.selectedIndex=A;return true}else{return false}};SELECT.prototype.SetValue=function(B){for(var A=0;A<this.node.length;A++){if(this.node[A].value==B){this.node.selectedIndex=A;return true}}return false};SELECT.prototype.GetTitle=function(A){if(typeof A=="undefined"){A=this.node.selectedIndex}else{if((A<0)||(A>=this.node.length)){return adeiReportError(translate('SELECT "%s". Index (%d) is out of range',this.id,A))}}var B=this.node.childNodes[A];if(B){var C=B.firstChild;if(C){return C.nodeValue}}return null};SELECT.prototype.Next=function(B,C){var D=this.GetIndex();do{var A=this.GetIndex()+1;if(A<this.node.length){this.SetIndex(A)}else{if(B){this.SetIndex(0)}else{this.SetIndex(D);break}}}while((typeof C=="function")&&(C(this.GetIndex(),this.GetValue())))};SELECT.prototype.Prev=function(B,C){var D=this.GetIndex();do{var A=this.GetIndex();if(A>0){this.SetIndex(A-1)}else{if(B){this.SetIndex(this.node.length-1)}else{this.SetIndex(D);break}}}while((typeof C=="function")&&(C(this.GetIndex(),this.GetValue())))};SELECT.prototype.Show=function(){if(this.node){this.node.style.display="inline"}};SELECT.prototype.Hide=function(){if(this.node){this.node.style.display="none"}};SELECT.prototype.Disable=function(){this.node.disabled=true;for(var A=0;A<this.childs.length;A++){this.childs[A].Disable()}};SELECT.prototype.Enable=function(){this.node.disabled=false;for(var A=0;A<this.childs.length;A++){this.childs[A].Enable()}};function SELECTOR(){this.test=null}function SETTINGS(A){this.db_server="";this.db_name;this.db_group;this.control_group;this.db_mask;this.db_item;this.settingprops="&";this.depth=1;this.interval;this.aggrpages=new Object();this.aggrprop="&"}SETTINGS.prototype.setValue=function(B,A){switch(B){case"server":this.db_server=A;this.settingprops=A;break;case"database":this.db_name=A;this.settingprops+=A;break;case"loggroup":this.db_group=A;this.settingprops+=A;break;case"itemmask":this.item=A;this.settingprops+=A;case"controlgroup":this.control_group=A;this.settingprops+=A;break;case"aggr":this.aggrprop+=A;break;default:alert("failed");break}};SETTINGS.prototype.setconf=function(){if(this.settingprops){this.goTo(this.settingprops);this.settingprops="&";this.depth=1;this.db_server=this.db_name=this.db_group=this.db_mask="undefined";this.goTo("p_id=main");adei.OpenModule("graph");adei.updater.Update()}};SETTINGS.prototype.makeRequest=function(G){var A;var C;var F;var D="settingsdyn";var B;switch(G){case"target=servers":A=adei.GetService("list",G+"&skip_uncached=true");F="p_id=sourcefront";C="Server";B="source";break;case"target=databases":if(this.db_server!="undefined"){A=adei.GetService("list",G+"&"+this.db_server);F="target=servers";C="Database";B="source"}else{alert("Define server first")}break;case"target=groups":if(this.db_server!="undefined"&&this.db_name!="undefined"){A=adei.GetService("list",G+"&"+this.db_server+"&"+this.db_name);F="target=databases";C="LogGroup";B="source"}else{alert("Define server and database first")}break;case"target=masks":if(this.db_server!="undefined"&&this.db_name!="undefined"&&this.db_group!="undefined"){A=adei.GetService("list",G+"&menu=1&"+this.db_server+"&"+this.db_name+"&"+this.db_group);F="target=groups";C="ItemMask";B="source"}else{alert("Define server, database and loggroup first")}break;case"target=sourcetimecustom":A=adei.GetService("settings","p_id=sourcetimecustom");D="idatetimepicker";break;case"target=sourcetimewindow":A=adei.GetService("settings","p_id=sourcetimewindow");D="idatetimepicker";break;case"target=items":if(this.db_server!="undefined"&&this.db_name!="undefined"&&this.db_group!="undefined"){A=adei.GetService("list",G+"&"+this.db_server+"&"+this.db_name+"&"+this.db_group);F="target=masks";C="Standalone Item";B="source"}else{alert("Define server, database and loggroup first")}break;case"target=aggregation_modes":A=adei.GetService("list",G);F="p_id=controls";C="Aggregation Modes";B="control";break;case"target=interpolation_modes":A=adei.GetService("list",G);F="target=aggregation_modes";C="Interpolation Modes";B="control";break;case"target=marks_modes":A=adei.GetService("list",G);F="target=interpolation_modes";C="Show Marks";B="control";break;case"target=gaps_modes":A=adei.GetService("list",G);F="target=mark_modes";C="Show Gaps";B="control";break;default:alert("Unknown target");break}var E=getXML(A);if(D=="settingsdyn"){E=this.addElement(E,"pageid",B);E=this.addElement(E,"history",F);E=this.addElement(E,"heading",C)}var H=new Object();H.xml=E;H.xslt=D;settings.Update(H,"false")};SETTINGS.prototype.goTo=function(B,A){adei.SetConfiguration(B);if(A){adei.OpenModule("graph")}};SETTINGS.prototype.updateTime=function(A){adei.SetConfiguration(A+"&p_id=main");adei.OpenModule("graph");adei.updater.Update()};SETTINGS.prototype.addElement=function(F,C,E){var B=F.documentElement;var D=F.createElement(C);var A=F.createTextNode(E);D.appendChild(A);B.appendChild(D);return F};SETTINGS.prototype.ProcessWindow=function(){var B=document.getElementById("startdate").value;var A=document.getElementById("enddate").value;B+=" "+document.getElementById("starttime").value;A+=" "+document.getElementById("endtime").value;B=Date.parse(B);A=Date.parse(A);B=B/1000;A=A/1000;B+="";A+="";this.updateTime("window="+B+"-"+A)};SETTINGS.prototype.HandleBack=function(A){this.depth--;if(A=="p_id=sourcefront"||A=="p_id=controls"){this.goTo(A)}else{this.makeRequest(A)}};SETTINGS.prototype.Search=function(){var A=document.getElementById("searchfield").value;var B=adei.GetService("search","search="+A);var C=getXML(B);C=this.addElement(C,"history","p_id=sourcefront");C=this.addElement(C,"heading","Search");C=this.addElement(C,"page","searchresults");var D=new Object();D.xml=C;D.xslt="settings";settings.Update(D,"false")};SETTINGS.prototype.CreateSpinningWheel=function(F){if(F=="startdate"||F=="enddate"){var A=new Date();var I={};var E={};var B={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"};for(var D=1;D<32;D+=1){I[D]=D}for(D=A.getFullYear()-100;D<A.getFullYear()+1;D+=1){E[D]=D}SpinningWheel.addSlot(B,"",1);SpinningWheel.addSlot(I,"right",1);SpinningWheel.addSlot(E,"right",1999);SpinningWheel.setCancelAction(this.Cancel);SpinningWheel.setDoneAction(this.getResults,F);SpinningWheel.open()}else{if(F=="starttime"||F=="endtime"){var G={};var C={};var H={};var D=1;for(D=0;D<24;D++){if(D<10){G["0"+D]="0"+D}else{G[D]=D}}for(D=0;D<60;D++){if(D<10){C["0"+D]="0"+D;H["0"+D]="0"+D}else{C[D]=D;H[D]=D}}SpinningWheel.addSlot(G,"right",5);SpinningWheel.addSlot({":":"h"},"readonly shrink");SpinningWheel.addSlot(C,"",5);SpinningWheel.addSlot({":":"m"},"readonly shrink");SpinningWheel.addSlot(H,"right",5);SpinningWheel.addSlot({"":"s"},"readonly shrink");SpinningWheel.setCancelAction(this.Cancel);SpinningWheel.setDoneAction(this.getResults,F);SpinningWheel.open()}}};SETTINGS.prototype.getResults=function(B){var A=SpinningWheel.getSelectedValues();switch(B){case"startdate":document.getElementById("startdate").value=A.keys.join("/");break;case"starttime":document.getElementById("starttime").value=A.keys.join("");break;case"enddate":document.getElementById("enddate").value=A.keys.join("/");break;case"endtime":document.getElementById("endtime").value=A.keys.join("");break}};SETTINGS.prototype.Cancel=function(){};SETTINGS.prototype.sendGetRequest=function(B,A){switch(B){case"p_id=sourceselect":switch(this.depth){case 1:this.makeRequest("target=servers");break;case 2:this.setValue("server","&db_server="+A);this.makeRequest("target=databases");break;case 3:this.setValue("database","&db_name="+A);this.makeRequest("target=groups");break;case 4:this.setValue("loggroup","&db_group="+A);this.makeRequest("target=masks");break;case 5:if(A!=-1){this.setValue("itemmask","&db_mask="+A);this.goTo("p_id=main");this.setconf()}else{this.makeRequest("target=items")}break;case 6:this.setValue("itemmask","&db_mask="+A);this.goTo("p_id=main");this.setconf();break}this.depth+=1;break;case"p_id=controlsexp":this.LoadControlsExp();break;case"p_id=sourcetimecustom":this.makeRequest("target=sourcetimecustom");break;case"p_id=sourcetimewindow":this.makeRequest("target=sourcetimewindow");break;case"p_id=controlsaggr":switch(this.depth){case 1:this.makeRequest("target=aggregation_modes");break;case 2:this.setValue("aggr","aggregation="+A);this.makeRequest("target=interpolation_modes");break;case 3:this.setValue("aggr","&interpolation="+A);this.makeRequest("target=marks_modes");break;case 4:this.setValue("aggr","&show_marks="+A);this.makeRequest("target=gaps_modes");break;case 5:this.setValue("aggr","&show_gaps="+A);adei.SetConfiguration(this.aggrprop);this.goTo("p_id=main");adei.OpenModule("graph");this.depth=0;break}this.depth+=1;break;default:this.depth=1;this.goTo(B);break}};function isInt(B){var A=parseInt(B);if(isNaN(A)){return false}if(A.toString()==B){return true}return false}function valueHandler(J,E){var H=J.getElementsByTagName("Value");for(var D=0;D<H.length;D++){var G=H[D];var B=E+"-"+G.getAttribute("id");var C=document.getElementById(B);if((G.firstChild)&&(C)){var A=G.firstChild.data;var I=isInt(A);var F;if((I)&&(A<0)){F=document.createTextNode("No Info")}else{F=document.createTextNode(A)}C.replaceChild(F,C.firstChild);if((I)&&(A<0)){C.setAttribute("class","badvalue")}}}}function valueRun(A,C,D,B){loadXML(A,C,D);setTimeout('valueRun("'+A+'",'+C+',"'+D+'",'+B+");",B)}function valueRunner(A,C,D,E,B){setTimeout('valueRun("'+A+'",'+C+',"'+D+'",'+B+");",E)}function valueRun2(A){loadXML(A.url,A.handler,A.attr);setTimeout(valueRun2,A.renew_time,A)}function valueRunner2(C,E,F,G,D,A){var B=new Object();B.url=C;B.handler=E;B.prefix=F;B.renew_time=D;B.attr=A;setTimeout(valueRun2,G,B)}function SOURCE_CONFIG(){this.db_server=null;this.db_name=null;this.db_group=null;this.control_group=null;this.db_mask=null;this.db_item=null}function SOURCE(C,B,D,I,H,E,G,F,A){this.cfg=new SOURCE_CONFIG;this.interval=C;this.apply_button=document.getElementById(F);this.source_itemsel=new SELECT(G,sourceUpdateItem,this);this.source_masksel=new SELECT(E,sourceUpdateMask,this);this.source_grsel=new SELECT(I,sourceUpdateGroup,this);this.source_cgrsel=new SELECT(H,sourceUpdateCGroup,this);this.source_dbsel=new SELECT(D,sourceUpdateDatabase,this);this.source_srvsel=new SELECT(B,sourceUpdateServer,this);this.source_srvsel.SetupSource(adei.GetSelectService("servers","list_virtual=1&skip_uncached=1"),"db_server");this.source_srvsel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_dbsel.SetupSource(adei.GetSelectService("databases","skip_uncached=1"),"db_name");this.source_dbsel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_grsel.SetupSource(adei.GetSelectService("groups","list_virtual=1&list_complex=1&skip_uncached=1"),"db_group");this.source_grsel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_cgrsel.SetupSource(adei.GetSelectService("cgroups","list_virtual=1"),"control_group");this.source_cgrsel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_masksel.SetupSource(adei.GetSelectService("masks"),"db_mask");this.source_masksel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_itemsel.SetupSource(adei.GetSelectService("items"),"db_item");this.source_itemsel.SetupCompletionCallbacks(sourceEnableControls,sourceEnableControls);this.source_srvsel.AddChild(this.source_dbsel);this.source_dbsel.AddChild(this.source_grsel);this.source_dbsel.AddChild(this.source_cgrsel);this.source_grsel.AddChild(this.source_masksel);this.source_grsel.AddChild(this.source_itemsel);this.source_grsel.AddChild(C.source_expsel);this.config=null;this.updater=null;if(typeof A=="object"){this.opts=A}else{this.opts=new Object()}this.selection_callbacks=[new Array(),new Array(),new Array()];this.submit_callbacks=new Array();this.module_type=HISTORY_MODULE_TYPE;this.fixhidden_ie_mode=false}SOURCE.prototype.FixHiddenIE=function(){this.fixhidden_ie_mode=true};SOURCE.prototype.Init=function(B,A){if(typeof A=="undefined"){A=new Object}A.reload=true;A.confirm=true;A.cb_attr=this;A.success_cb=sourceConfirmInitialization;this.updater=B;this.interval.SetUpdater(B);B.RegisterControl(this);this.Update(A)};function sourceConfirmInitialization(A){A.config.Confirm(A)}SOURCE.prototype.AttachConfig=function(A){this.config=A;this.interval.SetConfig(A);A.Register(this)};SOURCE.prototype.ApplyConfig=function(A){if(this.config){this.config.SetSource(this.cfg.db_server,this.cfg.db_name,this.cfg.db_group,this.cfg.control_group,(isNaN(this.cfg.db_mask)||(this.cfg.db_mask>=0))?this.cfg.db_mask:this.cfg.db_item);this.interval.ApplyConfig(true);this.RunSubmitCallbacks();if(typeof A=="undefined"){if(this.config.GetModule()=="wiki"){adei.OpenModule("graph")}else{this.config.Save()}}}};SOURCE.prototype.ReadConfig=function(B){if(this.config){if(typeof B=="undefined"){B=new Object}B.db_server=this.config.cfg.db_server;B.db_name=this.config.cfg.db_name;B.db_group=this.config.cfg.db_group;B.control_group=this.config.cfg.control_group;if(this.config.cfg.db_mask!=null){var A=this.config.cfg.db_mask;if(A.search(",")>=0){B.db_mask=A;B.db_item=0}else{if(isNaN(A)){B.db_mask=A;B.db_item=0}else{B.db_mask=-1;B.db_item=A}}}else{if((B.db_server)||(B.db_name)||(B.db_group)){B.reset_mask=true}}this.interval.ReadConfig(B);this.Update(B)}};SOURCE.prototype.Apply=function(){this.ApplyConfig();if(this.updater){this.updater.Update()}};SOURCE.prototype.RegisterGraph=function(A){this.graphs.push(A)};SOURCE.prototype.DisableControls=function(){if(this.apply_button){this.apply_button.disabled=true}this.source_srvsel.Disable();this.interval.DisableControls()};SOURCE.prototype.EnableControls=function(){this.interval.EnableControls();this.source_srvsel.Enable();if(this.apply_button){this.apply_button.disabled=false}if(this.fixhidden_ie_mode){this.fix_hidden=true;this.FixHidden()}};SOURCE.prototype.SetupModule=function(A){var B=HISTORY_MODULE_TYPE;if(A){if(typeof A.GetModuleType!="undefined"){B=A.GetModuleType()}}this.module_type=B;this.FixHidden(true)};SOURCE.prototype.RegisterSelectionCallback=function(A,B,C,D){var E;if(typeof D!="undefined"){E=2}else{if(typeof C!="undefined"){E=1}else{if(typeof B!="undefined"){E=0}else{return}}}this.selection_callbacks[E].push({callback:A,db_server_re:B,db_name_re:C,db_group_re:D})};SOURCE.prototype.RegisterSubmitCallback=function(A,B,C,D){this.submit_callbacks.push({callback:A,db_server_re:B,db_name_re:C,db_group_re:D})};SOURCE.prototype.RunSelectionCallbacks=function(F){var E;var C=this.selection_callbacks[F];for(i=0;i<C.length;i++){var B=C[i];var D=this.source_srvsel.GetValue();if(!B.db_server_re.exec(D)){continue}if(F>0){var A=this.source_dbsel.GetValue();if(!B.db_name_re.exec(A)){continue}if(F>1){db_group=this.source_grsel.GetValue();if(!B.db_group_re.exec(db_group)){continue}else{E=db_group}}else{E=A}}else{E=D}B.callback.Call(E)}};SOURCE.prototype.RunSubmitCallbacks=function(F){var E;var C=this.submit_callbacks;for(i=0;i<C.length;i++){var B=C[i];var D=this.source_srvsel.GetValue();if((B.db_server_re)&&(!B.db_server_re.exec(D))){continue}var A=this.source_dbsel.GetValue();if((B.db_name_re)&&(!B.db_name_re.exec(A))){continue}db_group=this.source_grsel.GetValue();if((B.db_group_re)&&(!B.db_group_re.exec(db_group))){continue}B.callback.Call()}};SOURCE.prototype.Update=function(A){if(A){if(A.reload){this.DisableControls();this.source_srvsel.Update(null,A,A.db_server)}else{if((A.reset)||(A.db_server)){this.UpdateServer(A.db_server,A)}}}};SOURCE.prototype.UpdateServer=function(A,B){if(typeof A=="undefined"){A=this.source_srvsel.GetValue()}if((B)&&(B.confirmed)){this.cfg.db_server=A;this.RunSelectionCallbacks(0)}else{if(((B)&&(B.reload))||(A!=this.cfg.db_server)){if(typeof B=="undefined"){B=new Object}B.reload=true;this.DisableControls();this.interval.FixOptions(B);this.source_srvsel.UpdateChilds(null,B,A,this.cfg.db_server)}else{if((B)&&((B.db_name)||(B.reset))){this.UpdateDatabase(B.db_name,B)}}}};SOURCE.prototype.UpdateDatabase=function(B,C){if(typeof B=="undefined"){B=this.source_dbsel.GetValue()}if((C)&&(C.confirmed)){this.cfg.db_name=B;this.RunSelectionCallbacks(1)}else{if(((C)&&(C.reload))||(B!=this.cfg.db_name)){if(typeof C=="undefined"){C=new Object}C.reload=true;this.DisableControls();this.interval.FixOptions(C);this.source_dbsel.UpdateChilds("db_server="+this.cfg.db_server,C,B,this.cfg.db_name)}else{if((C)&&((C.db_group)||(C.control_group)||(C.reset))){if((C.control_group)||(C.reset)){var A=objectClone(C);A.success_cb=null;A.failure_cb=null;this.UpdateCGroup(C.control_group,A)}if((C.db_group)||(C.reset)){this.UpdateGroup(C.db_group,objectClone(C))}else{if(C.success_cb){C.success_cb(C.cb_attr,C.success_value,C)}}}}}};SOURCE.prototype.UpdateGroup=function(C,B){if(typeof C=="undefined"){C=this.source_grsel.GetValue()}if((B)&&(B.confirmed)){this.cfg.db_group=C;this.RunSelectionCallbacks(2)}else{if(((B)&&(B.reload))||(C!=this.cfg.db_group)){if(typeof B=="undefined"){B=new Object}B.reload=true;this.DisableControls();this.interval.FixOptions(B);this.source_grsel.UpdateChilds("db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name,B,C,this.cfg.db_group)}else{if((B)&&((B.db_mask)||(B.db_item)||(B.experiment)||(B.window)||(B.window_width)||(B.reset))){if((B.db_mask)||(B.reset)){var A=objectClone(B);A.success_cb=null;A.failure_cb=null;this.UpdateMask(B.db_mask,A)}if((B.db_item)||(B.reset)){var A=objectClone(B);A.success_cb=null;A.failure_cb=null;this.UpdateItem(B.db_item,A)}if((B.experiment)||(B.window)||(B.window_width)||(B.reset)){this.interval.UpdateExperiment(B.experiment,objectClone(B))}else{if(B.cb_success){B.success_cb(B.cb_attr,B.success_value,B)}}}}}};SOURCE.prototype.UpdateCGroup=function(B,A){if(typeof B=="undefined"){B=this.source_cgrsel.GetValue()}if((A)&&(A.confirmed)){this.cfg.control_group=B}else{if(((A)&&(A.reload))||(B!=this.cfg.control_group)){if(typeof A=="undefined"){A=new Object}A.reload=true;this.DisableControls();this.source_cgrsel.UpdateChilds("db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name,A,B,this.cfg.control_group)}}};SOURCE.prototype.UpdateMask=function(A,B){if(typeof A=="undefined"){A=this.source_masksel.GetValue()}if((B)&&(B.confirmed)){if(A==-1){this.cfg.db_mask=A;this.FixHidden(true);if(typeof this.geometry_cb=="function"){this.geometry_cb(this.geometry_cbattr)}}else{if((this.cfg.db_mask==-1)||(this.cfg.db_mask==null)){this.cfg.db_mask=A;this.FixHidden(true)}else{this.cfg.db_mask=A}}if(B.apply){this.Apply()}}else{if(((B)&&(B.reload))||(A!=this.cfg.db_mask)){if((typeof B=="undefined")&&(A!=-1)){B={apply:true}}this.DisableControls();this.source_masksel.UpdateChilds("db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name+"&db_group="+this.cfg.db_group,B,A,this.cfg.db_mask)}}};SOURCE.prototype.UpdateItem=function(B,A){if(typeof B=="undefined"){B=this.source_itemsel.GetValue()}if((A)&&(A.confirmed)){this.cfg.db_item=B;if(A.apply){this.Apply()}}else{if(((A)&&(A.reload))||(B!=this.cfg.db_item)){if(typeof A=="undefined"){A={apply:true}}this.DisableControls();this.source_itemsel.UpdateChilds("db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name+"&db_group="+this.cfg.db_group,A,B,this.cfg.db_item)}}};SOURCE.prototype.GetSourceProps=function(){return"db_server="+this.cfg.db_server+"&db_name="+this.cfg.db_name+"&db_group="+this.cfg.db_group};SOURCE.prototype.RegisterGeometryCallback=function(A,B){this.interval.RegisterGeometryCallback(A,B);this.geometry_cb=A;this.geometry_cbattr=B};SOURCE.prototype.FixHidden=function(A){if(A){if((!this.fixhidden_ie_mode)||(this.module_on_display)){if(this.module_type&HISTORY_MODULE_TYPE){if(isNaN(this.cfg.db_mask)||(this.cfg.db_mask>=0)){this.source_itemsel.Hide()}else{this.source_itemsel.Show()}cssShowClass(".hide_source_history")}else{this.source_itemsel.Hide();cssHideClass(".hide_source_history")}if(this.module_type&CONTROL_MODULE_TYPE){cssShowClass(".hide_source_control")}else{cssHideClass(".hide_source_control")}this.fix_hidden=false}else{this.fix_hidden=true}}else{if((this.fix_hidden)&&(this.module_on_display)){if(this.module_type&HISTORY_MODULE_TYPE){if(isNaN(this.cfg.db_mask)||(this.cfg.db_mask>=0)){this.source_itemsel.Show();this.source_itemsel.Hide()}else{this.source_itemsel.Hide();this.source_itemsel.Show()}cssHideClass(".hide_source_history");cssShowClass(".hide_source_history")}else{this.source_itemsel.Show();this.source_itemsel.Hide();cssShowClass(".hide_source_history");cssHideClass(".hide_source_history")}if(this.module_type&CONTROL_MODULE_TYPE){cssHideClass(".hide_source_control");cssShowClass(".hide_source_control")}else{cssShowClass(".hide_source_control");cssHideClass(".hide_source_control")}this.fix_hidden=false}}this.interval.FixHidden()};SOURCE.prototype.Alter=function(A,C){var B=new Object({cb_attr:this,success_cb:sourceApply,keep_window:true,reset:true});switch(A){case"s":if(C>0){this.source_srvsel.Next(true)}else{this.source_srvsel.Prev(true)}this.UpdateServer(this.source_srvsel.GetValue(),B);break;case"d":if(C>0){this.source_dbsel.Next(true)}else{this.source_dbsel.Prev(true)}this.UpdateDatabase(this.source_dbsel.GetValue(),B);break;case"g":if(C>0){this.source_grsel.Next(true)}else{this.source_grsel.Prev(true)}this.UpdateGroup(this.source_grsel.GetValue(),B);break;case"m":var D=this.source_masksel.GetValue();if(parseInt(D)<0){this.source_masksel.SetIndex(0)}else{if(C>0){this.source_masksel.Next(true,function(E,F){if(parseInt(F)<0){return true}return false})}else{this.source_masksel.Prev(true,function(E,F){if(parseInt(F)<0){return true}return false})}}this.UpdateMask(this.source_masksel.GetValue(),B);break;case"i":var D=this.source_masksel.GetValue();if(parseInt(D)==-1){if(C>0){this.source_itemsel.Next(true)}else{this.source_itemsel.Prev(true)}}else{this.source_itemsel.SetIndex(0);this.source_masksel.SetValue(-1);this.UpdateMask(this.source_masksel.GetValue(),B)}this.UpdateItem(this.source_itemsel.GetValue(),B);break}};SOURCE.prototype.NextServer=function(){this.Alter("s",1)};SOURCE.prototype.PrevServer=function(){this.Alter("s",-1)};SOURCE.prototype.NextDatabase=function(){this.Alter("d",1)};SOURCE.prototype.PrevDatabase=function(){this.Alter("d",-1)};SOURCE.prototype.NextGroup=function(){this.Alter("g",1)};SOURCE.prototype.PrevGroup=function(){this.Alter("g",-1)};SOURCE.prototype.NextMask=function(){this.Alter("m",1)};SOURCE.prototype.PrevMask=function(){this.Alter("m",-1)};SOURCE.prototype.NextItem=function(){this.Alter("i",1)};SOURCE.prototype.PrevItem=function(){this.Alter("i",-1)};function sourceUpdateServer(C,A,B){return C.UpdateServer(A,B)}function sourceUpdateDatabase(C,A,B){return C.UpdateDatabase(A,B)}function sourceUpdateGroup(C,B,A){return C.UpdateGroup(B,A)}function sourceUpdateCGroup(C,B,A){return C.UpdateCGroup(B,A)}function sourceUpdateMask(C,A,B){return C.UpdateMask(A,B)}function sourceUpdateItem(C,B,A){return C.UpdateItem(B,A)}function sourceEnableControls(A){A.EnableControls()}function sourceDisableControls(A){A.DisableControls()}function sourceFixHidden(A){A.FixHidden()}function sourceApply(A){A.Apply()}var SpinningWheel={cellHeight:44,friction:0.003,slotData:[],handleEvent:function(A){if(A.type=="touchstart"){this.lockScreen(A);if(A.currentTarget.id=="sw-cancel"||A.currentTarget.id=="sw-done"){this.tapDown(A)}else{if(A.currentTarget.id=="sw-frame"){this.scrollStart(A)}}}else{if(A.type=="touchmove"){this.lockScreen(A);if(A.currentTarget.id=="sw-cancel"||A.currentTarget.id=="sw-done"){this.tapCancel(A)}else{if(A.currentTarget.id=="sw-frame"){this.scrollMove(A)}}}else{if(A.type=="touchend"){if(A.currentTarget.id=="sw-cancel"||A.currentTarget.id=="sw-done"){this.tapUp(A)}else{if(A.currentTarget.id=="sw-frame"){this.scrollEnd(A)}}}else{if(A.type=="webkitTransitionEnd"){if(A.target.id=="sw-wrapper"){this.destroy()}else{this.backWithinBoundaries(A)}}else{if(A.type=="orientationchange"){this.onOrientationChange(A)}else{if(A.type=="scroll"){this.onScroll(A)}}}}}}},onOrientationChange:function(A){window.scrollTo(0,0);this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px";this.calculateSlotsWidth()},onScroll:function(A){this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px"},lockScreen:function(A){A.preventDefault();A.stopPropagation()},reset:function(){this.slotEl=[];this.activeSlot=null;this.swWrapper=undefined;this.swSlotWrapper=undefined;this.swSlots=undefined;this.swFrame=undefined},calculateSlotsWidth:function(){var B=this.swSlots.getElementsByTagName("div");for(var A=0;A<B.length;A+=1){this.slotEl[A].slotWidth=B[A].offsetWidth}},create:function(){var D,A,B,C,E;this.reset();E=document.createElement("div");E.id="sw-wrapper";E.style.top=window.innerHeight+window.pageYOffset+"px";E.style.webkitTransitionProperty="-webkit-transform";E.innerHTML='<div id="sw-header"><div id="sw-cancel">Cancel</div><div id="sw-done">Done</div></div><div id="sw-slots-wrapper"><div id="sw-slots"></div></div><div id="sw-frame"></div>';document.body.appendChild(E);this.swWrapper=E;this.swSlotWrapper=document.getElementById("sw-slots-wrapper");this.swSlots=document.getElementById("sw-slots");this.swFrame=document.getElementById("sw-frame");for(A=0;A<this.slotData.length;A+=1){C=document.createElement("ul");B="";for(D in this.slotData[A].values){B+="<li>"+this.slotData[A].values[D]+"</li>"}C.innerHTML=B;E=document.createElement("div");E.className=this.slotData[A].style;E.appendChild(C);this.swSlots.appendChild(E);C.slotPosition=A;C.slotYPosition=0;C.slotWidth=0;C.slotMaxScroll=this.swSlotWrapper.clientHeight-C.clientHeight-86;C.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";this.slotEl.push(C);if(this.slotData[A].defaultValue){this.scrollToValue(A,this.slotData[A].defaultValue)}}this.calculateSlotsWidth();document.addEventListener("touchstart",this,false);document.addEventListener("touchmove",this,false);window.addEventListener("orientationchange",this,true);window.addEventListener("scroll",this,true);document.getElementById("sw-cancel").addEventListener("touchstart",this,false);document.getElementById("sw-done").addEventListener("touchstart",this,false);this.swFrame.addEventListener("touchstart",this,false)},open:function(){this.create();this.swWrapper.style.webkitTransitionTimingFunction="ease-out";this.swWrapper.style.webkitTransitionDuration="400ms";this.swWrapper.style.webkitTransform="translate3d(0, -260px, 0)"},destroy:function(){this.swWrapper.removeEventListener("webkitTransitionEnd",this,false);this.swFrame.removeEventListener("touchstart",this,false);document.getElementById("sw-cancel").removeEventListener("touchstart",this,false);document.getElementById("sw-done").removeEventListener("touchstart",this,false);document.removeEventListener("touchstart",this,false);document.removeEventListener("touchmove",this,false);window.removeEventListener("orientationchange",this,true);window.removeEventListener("scroll",this,true);this.slotData=[];this.cancelAction=function(){return false};this.cancelDone=function(){return true};this.reset();document.body.removeChild(document.getElementById("sw-wrapper"))},close:function(){this.swWrapper.style.webkitTransitionTimingFunction="ease-in";this.swWrapper.style.webkitTransitionDuration="400ms";this.swWrapper.style.webkitTransform="translate3d(0, 0, 0)";this.swWrapper.addEventListener("webkitTransitionEnd",this,false)},addSlot:function(B,D,A){if(!D){D=""}D=D.split(" ");for(var C=0;C<D.length;C+=1){D[C]="sw-"+D[C]}D=D.join(" ");var E={values:B,style:D,defaultValue:A};this.slotData.push(E)},getSelectedValues:function(){var C,F,D,A,E=[],B=[];for(D in this.slotEl){if(this.slotEl[D].slotYPosition>0){this.setPosition(D,0)}else{if(this.slotEl[D].slotYPosition<this.slotEl[D].slotMaxScroll){this.setPosition(D,this.slotEl[D].slotMaxScroll)}}C=-Math.round(this.slotEl[D].slotYPosition/this.cellHeight);F=0;for(A in this.slotData[D].values){if(F==C){E.push(A);B.push(this.slotData[D].values[A]);break}F+=1}}return{keys:E,values:B}},setPosition:function(B,A){this.slotEl[B].slotYPosition=A;this.slotEl[B].style.webkitTransform="translate3d(0, "+A+"px, 0)"},scrollStart:function(C){var D=C.targetTouches[0].clientX-this.swSlots.offsetLeft;var E=0;for(var A=0;A<this.slotEl.length;A+=1){E+=this.slotEl[A].slotWidth;if(D<E){this.activeSlot=A;break}}if(this.slotData[this.activeSlot].style.match("readonly")){this.swFrame.removeEventListener("touchmove",this,false);this.swFrame.removeEventListener("touchend",this,false);return false}this.slotEl[this.activeSlot].removeEventListener("webkitTransitionEnd",this,false);this.slotEl[this.activeSlot].style.webkitTransitionDuration="0";var B=window.getComputedStyle(this.slotEl[this.activeSlot]).webkitTransform;B=new WebKitCSSMatrix(B).m42;if(B!=this.slotEl[this.activeSlot].slotYPosition){this.setPosition(this.activeSlot,B)}this.startY=C.targetTouches[0].clientY;this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition;this.scrollStartTime=C.timeStamp;this.swFrame.addEventListener("touchmove",this,false);this.swFrame.addEventListener("touchend",this,false);return true},scrollMove:function(B){var A=B.targetTouches[0].clientY-this.startY;if(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll){A/=2}this.setPosition(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition+A);this.startY=B.targetTouches[0].clientY;if(B.timeStamp-this.scrollStartTime>80){this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition;this.scrollStartTime=B.timeStamp}},scrollEnd:function(E){this.swFrame.removeEventListener("touchmove",this,false);this.swFrame.removeEventListener("touchend",this,false);if(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll){this.scrollTo(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition>0?0:this.slotEl[this.activeSlot].slotMaxScroll);return false}var B=this.slotEl[this.activeSlot].slotYPosition-this.scrollStartY;if(B<this.cellHeight/1.5&&B>-this.cellHeight/1.5){if(this.slotEl[this.activeSlot].slotYPosition%this.cellHeight){this.scrollTo(this.activeSlot,Math.round(this.slotEl[this.activeSlot].slotYPosition/this.cellHeight)*this.cellHeight,"100ms")}return false}var F=E.timeStamp-this.scrollStartTime;var A=(2*B/F)/this.friction;var D=(this.friction/2)*(A*A);if(A<0){A=-A;D=-D}var C=this.slotEl[this.activeSlot].slotYPosition+D;if(C>0){C/=2;A/=3;if(C>this.swSlotWrapper.clientHeight/4){C=this.swSlotWrapper.clientHeight/4}}else{if(C<this.slotEl[this.activeSlot].slotMaxScroll){C=(C-this.slotEl[this.activeSlot].slotMaxScroll)/2+this.slotEl[this.activeSlot].slotMaxScroll;A/=3;if(C<this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4){C=this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4}}else{C=Math.round(C/this.cellHeight)*this.cellHeight}}this.scrollTo(this.activeSlot,Math.round(C),Math.round(A)+"ms");return true},scrollTo:function(C,A,B){this.slotEl[C].style.webkitTransitionDuration=B?B:"100ms";this.setPosition(C,A?A:0);if(this.slotEl[C].slotYPosition>0||this.slotEl[C].slotYPosition<this.slotEl[C].slotMaxScroll){this.slotEl[C].addEventListener("webkitTransitionEnd",this,false)}},scrollToValue:function(E,D){var C,B,A;this.slotEl[E].removeEventListener("webkitTransitionEnd",this,false);this.slotEl[E].style.webkitTransitionDuration="0";B=0;for(A in this.slotData[E].values){if(A==D){C=B*this.cellHeight;this.setPosition(E,C);break}B-=1}},backWithinBoundaries:function(A){A.target.removeEventListener("webkitTransitionEnd",this,false);this.scrollTo(A.target.slotPosition,A.target.slotYPosition>0?0:A.target.slotMaxScroll,"150ms");return false},tapDown:function(A){A.currentTarget.addEventListener("touchmove",this,false);A.currentTarget.addEventListener("touchend",this,false);A.currentTarget.className="sw-pressed"},tapCancel:function(A){A.currentTarget.removeEventListener("touchmove",this,false);A.currentTarget.removeEventListener("touchend",this,false);A.currentTarget.className=""},tapUp:function(A){this.tapCancel(A);if(A.currentTarget.id=="sw-cancel"){this.cancelAction()}else{this.doneActionFunction(this.doneActionValues)}this.close()},setCancelAction:function(A){this.cancelAction=A},setDoneAction:function(B,A){this.doneActionFunction=B;this.doneActionValues=A},cancelAction:function(){return false},cancelDone:function(){return true}};function STATUS(A){if(typeof A=="string"){var B=document.getElementById(A)}else{var B=A}this.main_node=B;this.node=domGetFirstChildByName(B,"div");this.timeout=null;this.status=null;this.id=false}STATUS.prototype.SetNodeContent=function(A){if(A){this.node.innerHTML=A}else{this.node.innerHTML=""}};STATUS.prototype.UpdateWidth=function(A){this.main_node.style.width=A+"px"};STATUS.prototype.Set=function(C,B,A){if(this.timeout){clearTimeout(this.timeout);this.timeout=null}this.status=C;this.proposed=A;this.SetNodeContent(C);if(B>0){if(B>100){this.timeout=setTimeout(statusCleanFunction(this),B)}else{this.timeout=setTimeout(statusCleanFunction(this),B*adei.cfg.default_status_duration)}}this.id=Math.random();return this.id};STATUS.prototype.Propose=function(B,A){if((!this.status)||(this.proposed)){return this.Set(B,A,true)}return -1};STATUS.prototype.SetComment=function(A,B){if((this.status)&&(typeof B!="number")||(B==this.id)){this.SetNodeContent(this.status+" --- "+A)}};STATUS.prototype.Clean=function(A){if((typeof A!="number")||(A==this.id)){this.SetNodeContent();this.status=null;this.id=false}};function statusCleanFunction(A){return function(){A.Clean();A.timeout=null}}function translate(B){var J=B;if(!arguments||arguments.length<2||!RegExp){return J}var H=/([^%]*)%('.|0|\x20)?(-)?(\d+)?(\.\d+)?(%|b|c|d|u|f|o|s|x|X)(.*)/;var R=b=[],A=0,F=0;while(R=H.exec(J)){var I=R[1],O=R[2],S=R[3],N=R[4];var K=R[5],G=R[6],D=R[7];F++;if(G=="%"){C="%"}else{A++;if(A>=arguments.length){alert("Error! Not enough function arguments for translate ("+(arguments.length-1)+", excluding the string)\nfor the number of substitution parameters in string ("+A+' so far). Message: "'+B+'"')}var E=arguments[A];var P="";if(O&&O.substr(0,1)=="'"){P=I.substr(1,1)}else{if(O){P=O}}var M=true;if(S&&S==="-"){M=false}var Q=-1;if(N){Q=parseInt(N)}var L=-1;if(K&&G=="f"){L=parseInt(K.substring(1))}var C=E;if(G=="b"){C=parseInt(E).toString(2)}else{if(G=="c"){C=String.fromCharCode(parseInt(E))}else{if(G=="d"){C=parseInt(E)?parseInt(E):0}else{if(G=="u"){C=Math.abs(E)}else{if(G=="f"){C=(L>-1)?Math.round(parseFloat(E)*Math.pow(10,L))/Math.pow(10,L):parseFloat(E)}else{if(G=="o"){C=parseInt(E).toString(8)}else{if(G=="s"){C=E}else{if(G=="x"){C=(""+parseInt(E).toString(16)).toLowerCase()}else{if(G=="X"){C=(""+parseInt(E).toString(16)).toUpperCase()}}}}}}}}}}J=I+C+D}return J}function sprintf(){if(!arguments||arguments.length<1||!RegExp){return}var I=arguments[0];var G=/([^%]*)%('.|0|\x20)?(-)?(\d+)?(\.\d+)?(%|b|c|d|u|f|o|s|x|X)(.*)/;var Q=b=[],A=0,E=0;while(Q=G.exec(I)){var H=Q[1],N=Q[2],R=Q[3],M=Q[4];var J=Q[5],F=Q[6],C=Q[7];E++;if(F=="%"){B="%"}else{A++;if(A>=arguments.length){alert("Error! Not enough function arguments for translate ("+(arguments.length-1)+", excluding the string)\nfor the number of substitution parameters in string ("+A+' so far). Message: "'+msg+'"')}var D=arguments[A];var O="";if(N&&N.substr(0,1)=="'"){O=H.substr(1,1)}else{if(N){O=N}}var K=true;if(R&&R==="-"){K=false}var P=-1;if(M){P=parseInt(M)}var L=-1;if(J&&F=="f"){L=parseInt(J.substring(1))}var B=D;if(F=="b"){B=parseInt(D).toString(2)}else{if(F=="c"){B=String.fromCharCode(parseInt(D))}else{if(F=="d"){B=parseInt(D)?parseInt(D):0}else{if(F=="u"){B=Math.abs(D)}else{if(F=="f"){B=(L>-1)?Math.round(parseFloat(D)*Math.pow(10,L))/Math.pow(10,L):parseFloat(D)}else{if(F=="o"){B=parseInt(D).toString(8)}else{if(F=="s"){B=D}else{if(F=="x"){B=(""+parseInt(D).toString(16)).toLowerCase()}else{if(F=="X"){B=(""+parseInt(D).toString(16)).toUpperCase()}}}}}}}}}}I=H+B+C}return I}function nope(){}function objectClone(D,C){if(typeof C=="undefined"){C=new Array()}var B=new Object;for(var A in D){if((D[A])&&(typeof D[A]=="object")&&(C.indexOf(A)<0)){B[A]=objectClone(D[A])}else{B[A]=D[A]}}return B}function parseFloatArray(B){if(typeof B!="object"){B=B.split(",")}for(var A=0;A<B.length;A++){B[A]=parseFloat(B[A])}return B}function parseIntArray(B){if(typeof B!="object"){B=B.split(",")}for(var A=0;A<B.length;A++){B[A]=parseInt(B[A])}return B}function parseStringArray(B){if(typeof B!="object"){B=B.split(",")}else{for(var A=0;A<B.length;A++){B[A]=B[A].toString()}}return B}function parseArray(A){if(typeof A!="object"){A=A.split(",")}return A}function objectToProps(C){if(typeof C=="object"){var B=false;for(var A in C){if((typeof C[A]!="object")&&(typeof C[A]!="function")){if(B){B+="&"+A+"="+C[A]}else{B=A+"="+C[A]}}}return B}return C}function htmlEntityDecode(B){var A=document.createElement("textarea");A.innerHTML=B.replace(/</g,"&lt;").replace(/>/g,"&gt;");return A.value}function TOOLTIP(A){this.isInit=false;this.div;this.divWidth;this.divHeight;this.xincr=10,yincr=10;this.animateToolTip=false;this.isAnimated=false;this.aniSpeed=10;this.Init(A);this.visible=false}TOOLTIP.prototype.SetHTML=function(A){html=A;this.div.innerHTML=html};TOOLTIP.prototype.Hide=function(){this.div.style.display="none";this.div.style.height="0px";this.div.style.width="0px";this.visible=false;if(this.det){this.SetHTML("Loading...")}};TOOLTIP.prototype.Show=function(F,H,E){this.det=E;F=F?F:event;if(this.visible!=false){this.Hide();return}if(this.isInit!=true){return}var I,A,C,B,J,G;if(typeof(document.documentElement.clientWidth)=="number"){A=document.body.clientWidth;I=document.body.clientHeight}else{A=parseInt(window.innerWidth);I=parseInt(window.innerHeight)}var D=getPosition(F);J=D.x;G=D.y;if((J>this.divWidth+20)){C=J-this.divWidth-20}else{C=J-this.divWidth+60}if(this.divHeight+40<G){B=G-this.divHeight-40}else{B=G+40}this.div.style.display="block";this.div.style.top=B+"px";this.div.style.left=C+"px";this.div.style.height=this.divHeight+"px";this.div.style.width=this.divWidth+"px";if(!this.det){this.div.style.backgroundImage="url(tmp/downloads/images/"+H+".png)"}this.div.focus();if(this.det){adei.UpdateDIV(this.div,"services/download.php?target=dlmanager_details&dl_id="+H,"downloaddetails",false)}if(this.animateToolTip){this.div.style.height="0px";this.div.style.width="0px";tooltipAnimate(this.div.id,this.divHeight,this.divWidth)}this.visible=true};function getPosition(C){C=C||window.event;var B={x:0,y:0};if(C.pageX||C.pageY){B.x=C.pageX;B.y=C.pageY}else{var D=document.documentElement;var A=document.body;B.x=C.clientX+(D.scrollLeft||A.scrollLeft)-(D.clientLeft||0);B.y=C.clientY+(D.scrollTop||A.scrollTop)-(D.clientTop||0)}return B}TOOLTIP.prototype.Init=function(A){this.div=document.getElementById(A);if(this.div==null){return}if((this.div.style.width==""||this.div.style.height=="")){alert("Error: Downloadmanager graph div needs width and height");return}this.divWidth=parseInt(this.div.style.width);this.divHeight=parseInt(this.div.style.height);if(this.div.style.visibility!="visible"){this.div.style.visibility="visible"}if(this.div.style.display!="none"){this.div.style.display="none"}if(this.div.style.position!="absolute"){this.div.style.position="absolute"}if(this.isAnimated&&this.aniSpeed>0){xincr=parseInt(divWidth/this.aniSpeed);yincr=parseInt(divHeight/this.aniSpeed);this.animateToolTip=true}this.isInit=true};function UPDATER(B,C,A){this.run_flag=0;this.idle=1;this.tm=null;this.forced=false;this.updating=false;this.queued=false;this.config=B;this.module=C;this.popup=A;this.control=new Array();this.listeners=new Array();B.RegisterUpdater(this)}UPDATER.prototype.RegisterControl=function(A){this.control.push(A)};UPDATER.prototype.RegisterListener=function(A){this.listeners.push(A)};UPDATER.prototype.Start=function(A){if(this.popup){this.popup.RegisterReWidthCallback(updaterUpdate,this)}this.rate=A*1000;this.run_flag=1;this.Run()};UPDATER.prototype.Stop=function(){this.run_flag=0};UPDATER.prototype.Run=function(){if(this.run_flag){this.tm=setTimeout(function(A){return function(){A.Run()}}(this),this.rate);if(this.idle){this.idle=0;this.Iteration();this.idle=1}}};UPDATER.prototype.Update=function(){if(this.tm){clearTimeout(this.tm);this.tm=null}this.forced=true;this.Run()};UPDATER.prototype.Notify=function(notifier,mod){if(typeof mod!="undefined"){if(mod){var m=this.module.GetModule(mod)}else{var m=this.module.GetOpenModule(mod)}if(m){eval("if (m.Notify"+notifier+") m.Notify"+notifier+"();")}}else{for(var i=0;i<this.module.names.length;i++){this.Notify(notifier,this.module.names[i])}for(var i=0;i<this.listeners.length;i++){eval("if (this.listeners[i].Notify"+notifier+") this.listeners[i].Notify"+notifier+"();")}}};function updaterRequest(A){return function(E){if((!E)||(!E.responseText)){adei.SetStatus(translate("Update failed: No data is returned by ADEI service"))}else{if(E.responseText.charAt(0)=="{"){var D=E.responseText.evalJSON(false);if(typeof D.module=="undefined"){if(D.error){adei.SetStatus(translate("Update failed: %s",D.error),0)}else{adei.SetStatus(translate("Done"))}}else{var C=A.module.GetModule(D.module);if((C)&&(typeof C.Update!="undefined")){var B=C.Update(D,A.forced);if(B){if(typeof B=="string"){adei.SetStatus(translate("Update failed: %s",B),0)}else{if(D.error){adei.SetStatus(translate("Update failed: %s",D.error),0)}}}A.forced=false}else{adei.SetStatus(translate("Update failed: Invalid module is specified"),0)}}}else{adeiReportError(translate("Unexpected content: ")+E.responseText)}}A.updating=false}}function updaterFailure(A){return function(){adei.SetStatus(translate("Update is failed: POST request is failed"),0);A.updating=false}}UPDATER.prototype.Request=function(B,D){var A=this.module.GetOpenModule();if(!B){if(!A){return false}if(this.updating){adei.SetExtraStatus("Busy, skipping update request");if((this.forced)&&((D)||(!this.queued))){this.queued=true;setTimeout(function(E){return function(){E.Request(false,true)}}(this),25)}return false}else{if(D){this.queued=false}}}this.updating=true;if(this.config.ready){if(this.forced){adei.SetStatus(translate("Updating..."),0)}else{adei.SetStatus(translate("Starting Pereodic Update..."),0)}}if(typeof A.Prepare!="undefined"){A.Prepare()}var C=this.config.Get(B);if(typeof A.Request=="undefined"){new Ajax.Request(adei.GetServiceURL("update"),{method:"post",requestHeaders:{Accept:"application/json"},parameters:{props:Object.toJSON(C)},onSuccess:updaterRequest(this),onFailure:updaterFailure(this)});return true}else{this.updating=false;return A.Request(C)}};UPDATER.prototype.Iteration=function(){return this.Request()};function updaterUpdate(A){return A.Update()}function urlConcatenate(B,A){if(A){if(/\?/.exec(B)){return B+"&"+A}else{return B+"?"+A}}return B}function urlAddProperty(C,A,B){if(/\?/.exec(C)){return C+"&"+A+"="+B}else{return C+"?"+A+"="+B}}function urlJoinProps(F,E,C,B,A){var D=false;if(F){if(D){D+="&"+F}else{D=F}}if(E){if(D){D+="&"+E}else{D=E}}if(C){if(D){D+="&"+C}else{D=C}}return D}function VIRTUAL(C,B,A){this.node=document.getElementById(C);this.control=B;this.controls_node=A;this.srctree=new dhtmlXTreeObject(C,"100%","100%",0,false);if(adei.cfg.dhtmlx_iconset){this.srctree.setImagePath(adei.cfg.dhtmlx_iconset)}this.srctree.setXMLAutoLoading(adei.GetServiceURL("srctree"));this.srctree.setDataMode("xml");this.srctree.enableCheckBoxes(1);this.srctree.enableThreeStateCheckboxes(true)}VIRTUAL.prototype.UpdateTreeGeometry=function(){var A=domGetNodeSize(this.controls_node);if(A[1]>0){domSetHeight(this.node,A[1],true,this.controls_node,A[1],true)}};VIRTUAL.prototype.AttachConfig=function(A){this.config=A;A.Register(this)};VIRTUAL.prototype.Start=function(){adei.source.RegisterSelectionCallback(new CALLBACK(adei.virtual,"OnSelect"),/^virtual$/,/^srctree$/);adei.source.RegisterSubmitCallback(new CALLBACK(adei.virtual,"ApplyConfig"),/^virtual$/);this.srctree.loadXML(adei.GetServiceURL("srctree"))};VIRTUAL.prototype.OnSelect=function(){adei.popup.OpenControl(this.control)};VIRTUAL.prototype.ApplyConfig=function(){this.config.SetVirtualSettings("srctree",this.srctree.getAllChecked())};VIRTUAL.prototype.OpenItem=function(D,A){var E=D.split("__");var C=false;for(var B=0;B<E.length-1;B++){if(B){C=C+"__"+E[B]}else{C=E[B]}this.srctree.openItem(C);if(typeof A!="undefined"){this.srctree.setCheck(C,A)}}};VIRTUAL.prototype.SimpleReadConfig=function(){var D=false;var C=this.srctree.getAllChecked();if(C){C=C.split(",")}else{C=false}while((C)&&(C.length>0)){for(var A=0;A<C.length;A++){this.OpenItem(C[A],0);this.srctree.setCheck(C[A],0)}var C=this.srctree.getAllChecked();if(C){C=C.split(",")}else{C=false}}if(this.config.cfg.srctree){var C=this.config.cfg.srctree.split(",");for(var A=0;A<C.length;A++){var B=C[A];if(D){var E=B.substr(0,D.length);if(E!=D){this.OpenItem(D,"unsure");this.srctree.setCheck(D,1)}D=false}D=B}if(D){this.OpenItem(D,"unsure");this.srctree.setCheck(D,1)}}};function WINDOW_CONFIG(){this.width=0}function WINDOW(C,I,D,F,A,B,G){this.cfg=new WINDOW_CONFIG;this.props=null;this.source_winsel=new SELECT(C,windowUpdateWidth,this);this.source_winsel.SetupSource(adei.GetSelectService("window_modes"),"window_width");this.sin=document.getElementById(I);if(!this.sin){alert('Custom window start time input field ("'+I+'") is not found')}this.ein=document.getElementById(D);if(!this.ein){alert('Custom window end time input field ("'+D+'") is not found')}this.minin=document.getElementById(A);if(!this.minin){alert('Y-axis min input field ("'+A+'") is not found')}this.maxin=document.getElementById(B);if(!this.maxin){alert('Y-axis max input field ("'+B+'") is not found')}this.login=document.getElementById(G);if(!this.login){alert('Y-axis log-scale checkbox ("'+B+'") is not found')}this.axestbl=document.getElementById(F);this.axes={"0":{name:"default",minin:this.minin,maxin:this.maxin,login:this.login,def_log_scale:false}};var E=this.axestbl.getElementsByTagName("td");for(var H=0;H<E.length;H++){if(E[H].firstChild){cssSetClass(E[H].firstChild,"window_axis_0")}}}WINDOW.prototype.NewGraph=function(K,A,H){var F=/[^\w\d_]/;if(K.xsize>this.minval){this.sub_edge_mode=false}for(var D in this.axes){var L=("window_axis_"+D).replace(F,"_");cssHideClass("."+L)}for(var G=0;G<K.axis.length;G++){var D=K.axis[G];var L=("window_axis_"+D).replace(F,"_");if(typeof this.axes[D]=="undefined"){var E=['<div class="'+L+'"><span class="axis_name">'+K.name[G]+"</span>&nbsp;[<a href='javascript:source_window.ResetY(\""+D+"\")'>"+translate("R")+"</a>]</div>",'<div class="'+L+'"><span class="source_yrange"><input type="text" maxlength="16" onchange="javascript:source_window.UpdateRange()"/></span></div>','<div class="'+L+'"><span class="source_yrange">&nbsp;-&nbsp;</span></div>','<div class="'+L+'"><span class="source_yrange"><input type="text" maxlength="16" onchange="javascript:source_window.UpdateRange()"/></span></div>','<div class="'+L+'"><span class="source_ymode"><input type="checkbox" onchange="javascript:source_window.UpdateRange()"/></span></div>','<div class="'+L+'">Log</div>'];var M=tableAddRow(this.axestbl,E);var I=M.getElementsByTagName("input");var C=K.ylog[G]?true:false;var B;var J=this.config.GetAxisMode(D);if(J){B=null}else{B=C}this.axes[D]={minin:I[0],maxin:I[1],login:I[2],name:K.name[G],def_log_scale:B};this.SetCustomAxis(D);this.axes[D].login.checked=C;if(B==C){this.config.SetAxisMode(D)}else{this.config.SetAxisMode(D,C)}}cssShowClass("."+L);cssSetProperty("."+L,"color",K.color[G])}if(!this.axes_on_display){this.fix_hidden_axes=true}};WINDOW.prototype.DisableControls=function(){this.source_winsel.Disable()};WINDOW.prototype.EnableControls=function(){this.source_winsel.Enable()};WINDOW.prototype.SetConfig=function(A){this.config=A};WINDOW.prototype.SetUpdater=function(A){this.updater=A};WINDOW.prototype.RegisterGraph=function(A){if(!this.graph){this.graph=A;if(!A.window){A.AttachWindow(this)}}};WINDOW.prototype.FixOptions=function(A){if((!A.window_width)&&(this.cfg.width>0)){A.window_width=this.cfg.width}};WINDOW.prototype.Update=function(A,B){if(B){if(B.reload){this.minval=false;this.source_winsel.Update(A,B,B?B.window_width:null)}else{if((B.window_width)||(B.reset)){this.UpdateWidth(B.window_width,B)}}}};WINDOW.prototype.UpdateWidth=function(F,E){if(typeof F=="undefined"){F=this.source_winsel.GetValue()}if((E)&&(E.confirmed)){if(!this.minval){var A=this.source_winsel.GetLastIndex();this.minval=this.source_winsel.GetValue(A-1)}var D=true;if((E)&&(E.window=="auto")){this.SetCustomWindow();this.SetCustomAxes();this.SetAxesMode();D=false}var C;var B=false;if(F<0){if(this.cfg.width>=0){if((D)&&((!E)||(!E.keep_custom))){this.sin.value="";this.ein.value=""}cssShowClass(".hide_window_custom");if(!this.module_on_display){this.fix_hidden=true}if(typeof this.geometry_cb=="function"){this.geometry_cb(this.geometry_cbattr)}}}else{if(this.cfg.width<0){cssHideClass(".hide_window_custom");if(!this.module_on_display){this.fix_hidden=true}}if(this.cfg.width!=F){B=true}}this.cfg.width=F;if((B)&&(E.apply)){this.Apply()}}else{if(((E)&&(E.reload))||(this.cfg.width!=F)||(E.window)){if(typeof E=="undefined"){E={apply:true}}this.source_winsel.UpdateChilds(null,E,F,this.cfg.width)}}};WINDOW.prototype.UpdateRange=function(){if(this.graph){this.graph.Clear()}};WINDOW.prototype.ApplyConfig=function(I){if(this.config){var G,F;var C,H;var A=this.cfg.width;if(A<0){var D=this.sin.value;if(D){G=adeiDateParse(D)}else{G=""}D=this.ein.value;if(D){F=adeiDateParse(D)}else{F=""}}else{G="";F=""}this.config.SetWindow(A,G,F,"","");for(var E in this.axes){var D=this.axes[E].minin.value;if(D){minin=D}else{minin=0}D=this.axes[E].maxin.value;if(D){maxin=D}else{maxin=0}var B=this.axes[E].login.checked;this.config.SetAxisRange(E,minin,maxin);if(B==this.axes[E].def_log_scale){this.config.SetAxisMode(E)}else{this.config.SetAxisMode(E,B)}}if(typeof I=="undefined"){this.config.Save()}}if(this.graph){this.graph.Clear()}};WINDOW.prototype.ReadConfig=function(A){A.window="auto";A.window_width=this.config.win_width};WINDOW.prototype.Apply=function(){this.ApplyConfig();if(this.updater){this.updater.Update()}};WINDOW.prototype.ResetXY=function(A){if(typeof A=="undefined"){this.SetCustomAxes(0,0)}else{this.SetCustomAxis(A,0,0)}if(this.source_winsel.GetValue()==0){this.Apply()}else{this.source_winsel.SetValue(0);this.UpdateWidth(0)}};WINDOW.prototype.ResetX=function(){this.source_winsel.SetValue(0);this.UpdateWidth(0)};WINDOW.prototype.ResetY=function(A){this.config.win_min=0;this.config.win_max=0;if(typeof A=="undefined"){this.SetCustomAxes(0,0)}else{this.SetCustomAxis(A,0,0)}this.Apply()};WINDOW.prototype.SetAxesMode=function(){for(aid in this.axes){var A=this.config.GetAxisMode(aid);if(A){this.axes[aid].login.checked=A[0]}else{this.axes[aid].login.checked=false}}};WINDOW.prototype.SetCustomAxes=function(A,B){if(typeof A=="undefined"){for(aid in this.axes){this.SetCustomAxis(aid)}}else{for(aid in this.axes){this.SetCustomAxis(aid,A,B)}}};WINDOW.prototype.SetCustomAxis=function(C,A,D){if(typeof A!="undefined"){if(A==D){this.axes[C].minin.value="";this.axes[C].maxin.value=""}else{this.axes[C].minin.value=isNaN(A)?A:A.toPrecision(7);this.axes[C].maxin.value=isNaN(D)?D:D.toPrecision(7)}}else{var B;B=this.config.GetAxisRange(C);if(B){this.axes[C].minin.value=B[0];this.axes[C].maxin.value=B[1]}else{this.axes[C].minin.value="";this.axes[C].maxin.value=""}}};WINDOW.prototype.SetCustomWindow=function(C,B){if(typeof C!="undefined"){this.config.SetSelection(C,B);C+="";B+="";if(C&&B){var A=adeiMathPreciseSubstract(B,C);this.sin.value=adeiDateFormat(C,A);this.ein.value=adeiDateFormat(B,A)}else{if(C){this.sin.value=adeiDateFormat(C)}else{this.sin.value=C}if(B){this.ein.value=adeiDateFormat(B)}else{this.ein.value=B}}this.UpdateWidth(-1,new Object({keep_custom:true}));this.source_winsel.SetValue(-1)}else{if(!this.config){return}this.config.SetSelection();if(this.config.win_width<0){if((this.config.win_from&&this.config.win_to)){var A=adeiMathPreciseSubstract(this.config.win_to,this.config.win_from);this.sin.value=adeiDateFormat(this.config.win_from,A);this.ein.value=adeiDateFormat(this.config.win_to,A)}else{if(this.config.win_from){this.sin.value=adeiDateFormat(this.config.win_from)}else{this.sin.value=""}if(this.config.win_to){this.ein.value=adeiDateFormat(this.config.win_to)}else{this.ein.value=""}}}else{this.sin.value="";this.ein.value="";this.UpdateWidth(this.config.win_width,new Object({keep_custom:true}));this.source_winsel.SetValue(this.config.win_width)}}};WINDOW.prototype.PinchZoom=function(C){var H=isiPhone();var B=isiPad();if(H){var F=0.34;var A=3.5}if(B){var F=0.26;var A=10}if(C.device){if(C.scale>A){C.scale=A}if(C.startX>C.marginsLeft){if(C.scale>1){var G=C.x;var D=adeiMathPreciseAdd(G,(this.graph.xmax-G)/A*C.scale);this.SetCustomWindow(G,D)}if(C.scale<1){this.CenterZoomOut()}}else{if(C.scale<1){for(var E=0;E<C.y.length;E++){this.YZoomOut(E,C.y[E])}}else{if(C.scale>1){for(var E=0;E<C.y.length;E++){this.YZoomIn(E,C.y[E])}}}C=null}}else{alert("Unknown touchdevice")}};WINDOW.prototype.Swipe=function(A){switch(A){case 1:this.MoveRight();break;case 2:this.MoveLeft();break;case 3:this.MoveDown();break;case 4:this.MoveUp();break}};WINDOW.prototype.Lock=function(){if((this.graph)&&(this.cfg.width>=0)){var B=this.graph.xmin;var A=this.graph.xmax;if((B)&&(A)){this.SetCustomWindow(B,A);this.Apply()}}};WINDOW.prototype.MoveUp=function(C){if(typeof C=="undefined"){for(var E=0;E<this.graph.axis.length;E++){this.MoveUp(E)}return}if(this.graph.yzoom[C]){var B=this.graph.ysize[C]/adei.cfg.step_ratio;var D=this.graph.ymin[C]+B;var A=this.graph.ymax[C]+B;var F=this.graph.axis[C];this.SetCustomAxis(F,D,A)}this.Apply()};WINDOW.prototype.MoveDown=function(C){if(typeof C=="undefined"){for(var E=0;E<this.graph.axis.length;E++){this.MoveDown(E)}return}if(this.graph.yzoom[C]){var B=this.graph.ysize[C]/adei.cfg.step_ratio;var D=this.graph.ymin[C]-B;var A=this.graph.ymax[C]-B;var F=this.graph.axis[C];this.SetCustomAxis(F,D,A)}this.Apply()};WINDOW.prototype.MoveLeft=function(){if(this.graph.xmin>this.graph.imin){var A=this.graph.xsize/adei.cfg.step_ratio;var C=adeiMathPreciseSubstract(this.graph.xmin,A);if(C<this.graph.imin){A=adeiMathPreciseSubstract(this.graph.xmin,this.graph.imin);C=this.graph.imin}var B=adeiMathPreciseSubstract(this.graph.xmax,A);this.SetCustomWindow(C,B)}this.Apply()};WINDOW.prototype.MoveRight=function(){if(this.graph.xmax<this.graph.imax){var A=this.graph.xsize/adei.cfg.step_ratio;var C=adeiMathPreciseAdd(this.graph.xmax,A);if((this.graph.imax)&&(C>this.graph.imax)){A=adeiMathPreciseSubstract(this.graph.imax,this.graph.xmax);C=this.graph.imax}var B=adeiMathPreciseAdd(this.graph.xmin,A);this.SetCustomWindow(B,C)}this.Apply()};WINDOW.prototype.Center=function(B,G){for(var E=0;E<G.length;E++){if(this.graph.yzoom[E]){var D=this.graph.ysize[E]/2;var C=G[E]-D;var A=G[E]+D;var F=this.graph.axis[E];this.SetCustomAxis(F,C,A)}}var D=this.graph.xsize/2;from=adeiMathPreciseSubstract(B,D);to=adeiMathPreciseAdd(B,D);if(from<this.graph.imin){from=this.graph.imin;to=adeiMathPreciseAdd(B,adeiMathPreciseSubstract(B,this.graph.imin))}else{if((this.graph.imax)&&(to>this.graph.imax)){from=adeiMathPreciseSubstract(B,adeiMathPreciseSubstract(this.graph.imax,B));to=this.graph.imax}}this.SetCustomWindow(from,to);this.Apply()};WINDOW.prototype.IncreaseWidth=function(){var A=this.config.win_width;if(A<0){this.source_winsel.SetValue(0)}else{this.source_winsel.Prev(false)}this.UpdateWidth(this.source_winsel.GetValue())};WINDOW.prototype.DecreaseWidth=function(){var B=this.config.win_width;if(B<0){var A=this.source_winsel.GetLastIndex();if(A>0){this.source_winsel.SetIndex(A-1)}}else{this.source_winsel.Next(false,function(C,D){if(parseInt(D)<0){return true}return false})}this.UpdateWidth(this.source_winsel.GetValue())};WINDOW.prototype.YZoomIn=function(B,G){var F=this.graph.ysize[B]/adei.cfg.zoom_ratio;if(typeof G=="undefined"){var E=(this.graph.ysize[B]-F)/2;var C=this.graph.ymin[B]+E;var A=this.graph.ymax[B]-E}else{var C=G-F/2;var A=G+F/2}var D=this.graph.axis[B];this.SetCustomAxis(D,C,A);this.Apply()};WINDOW.prototype.YZoomOut=function(B,G){if(typeof G=="undefined"){var F=(adei.cfg.zoom_ratio-1)*this.graph.ysize[B]/2;var C=this.graph.ymin[B]-F;var A=this.graph.ymax[B]+F}else{var E=this.graph.ysize[B]*adei.cfg.zoom_ratio/2;var C=G-E;var A=G+E}var D=this.graph.axis[B];this.SetCustomAxis(D,C,A);this.Apply()};WINDOW.prototype.CenterZoomIn=function(){var B=this.graph.xsize/adei.cfg.zoom_ratio;var A=adeiMathPreciseSubstract(this.graph.xsize,B)/2;var D=adeiMathPreciseAdd(this.graph.xmin,A);var C=adeiMathPreciseSubstract(this.graph.xmax,A);this.SetCustomWindow(D,C);this.Apply()};WINDOW.prototype.CenterZoomOut=function(){if((this.graph.xmin)&&(this.graph.xmax)){var C=(adei.cfg.zoom_ratio-1)*this.graph.xsize/2;var F=adeiMathPreciseSubstract(this.graph.xmin,C);var E=adeiMathPreciseAdd(this.graph.xmax,C)}else{var B=this.config.win_from;var A=this.config.win_to;var D=adeiMathPreciseSubstract(A,B);var C=(adei.cfg.zoom_ratio-1)*D/2;var F=adeiMathPreciseSubstract(B,C);var E=adeiMathPreciseAdd(A,C)}this.SetCustomWindow(F,E);this.Apply()};WINDOW.prototype.DeepZoom=function(A){var B=this.graph.GetPrecision(adei.cfg.deepzoom_area);var D=adeiMathPreciseSubstract(A,B);var C=adeiMathPreciseAdd(A,B);this.SetCustomWindow(D,C);this.Apply()};WINDOW.prototype.LocalZoomIn=function(A){var B=this.graph.xsize/(2*adei.cfg.zoom_ratio);var D=adeiMathPreciseSubstract(A,B);var C=adeiMathPreciseAdd(A,B);this.SetCustomWindow(D,C);this.Apply()};WINDOW.prototype.LocalZoomOut=function(A){var B=adei.cfg.zoom_ratio*this.graph.xsize/2;var D=adeiMathPreciseSubstract(A,B);var C=adeiMathPreciseAdd(A,B);this.SetCustomWindow(D,C);this.Apply()};WINDOW.prototype.ZoomIn=function(B){var C=this.config.win_width;if(C>0){var A=this.source_winsel.GetLastIndex();if(this.source_winsel.GetIndex()==(A-1)){this.LocalZoomIn(this.graph.xmax);this.sub_edge_mode=true}else{this.DecreaseWidth()}return}else{if(C==0){if(((this.graph.xmax-B)<=0)||((this.graph.xsize/(this.graph.xmax-B))>adei.cfg.edge_ratio)){this.DecreaseWidth();return}}}this.LocalZoomIn(B)};WINDOW.prototype.ZoomOut=function(A){var B=this.config.win_width;if(!B){return}if(B>0){this.IncreaseWidth();return}else{if(B<0){if((this.sub_edge_mode)&&(((this.graph.xmax-A)<=0)||((this.graph.xsize/(this.graph.xmax-A))>adei.cfg.edge_ratio))){if(this.graph.xsize<this.minval){var C=adei.cfg.zoom_ratio*this.graph.xsize;if(C>this.minval){this.DecreaseWidth();return}}}var C=adei.cfg.zoom_ratio*this.graph.xsize;if(C>Math.ceil(this.graph.imax-this.graph.imin)){this.source_winsel.SetValue(0);this.UpdateWidth(0);return}}}this.CenterZoomOut()};WINDOW.prototype.RegisterGeometryCallback=function(A,B){this.geometry_cb=A;this.geometry_cbattr=B};WINDOW.prototype.FixHiddenAxes=function(){if((this.fix_hidden_axes)&&(this.axes_on_display)){this.fix_hidden_axes=false;for(var A in this.axes){cssHideClass(".window_axis_"+A)}for(var A=0;A<this.graph.axis.length;A++){var C=this.graph.axis[A];var B=".window_axis_"+C;cssShowClass(B)}}};WINDOW.prototype.FixHidden=function(){if((this.fix_hidden)&&(this.module_on_display)){if(this.cfg.width<0){cssHideClass(".hide_window_custom");cssShowClass(".hide_window_custom")}else{cssShowClass(".hide_window_custom");cssHideClass(".hide_window_custom")}this.fix_hidden=false}this.FixHiddenAxes()};function windowUpdateWidth(B,C,A){B.UpdateWidth(C,A)}function windowUpdateRange(A){A.UpdateRange()}function windowUpdateRangeFunction(A){return function(){A.UpdateRange()}}function NSResolver(A){if(A=="xhtml"){return"http://www.w3.org/1999/xhtml"}else{return null}}function DSXMLParser(C,B,A){this.req=C;this.data_handler=B;this.data_attr=A;this.ready=function(){try{if(this.req.readyState==4){if(this.req.status==200){this.data_handler(this.req.responseXML,this.data_attr,0)}else{this.data_handler(null,this.data_attr,translate("XML: HTTP Error %u",this.req.status))}}}catch(D){adeiReportException(D,translate("XML: error catched while loading XML"))}};return this}function getXML(A){if(window.XMLHttpRequest){req=new XMLHttpRequest()}else{if(window.ActiveXObject){try{req=new ActiveXObject("Msxml2.XMLHTTP")}catch(B){req=new ActiveXObject("Microsoft.XMLHTTP")}}}try{req.open("GET",A,false);req.send(null);return req.responseXML}catch(B){adeiReportException(B,translate("getXML(%s) request is failed",A))}}function serverGetResult(D){var C=0;var A=getXML(D);if(A){var B=A.getElementsByTagName("result");if(B.length>1){C=translate("serverGetResult(%s) returned multiple result nodes",D)}else{if(B.length>0){return B[0].firstChild.data}else{var E=A.getElementsByTagName("error");if(E.length>0){C=E[0].firstChild.data}else{C=translate("serverGetResult(%s) returned no result or error nodes",D)}}}}else{C=translate("serverGetResult(%s) got no data from server",D)}if(C){adeiReportError(C)}}function doLoadXML(B,C,A){var D;if(window.XMLHttpRequest){D=new XMLHttpRequest()}else{if(window.ActiveXObject){try{D=new ActiveXObject("Msxml2.XMLHTTP")}catch(E){D=new ActiveXObject("Microsoft.XMLHTTP")}}}var F=DSXMLParser(D,C,A);try{if(window.XMLHttpRequest){D.data_attr=A;D.data_handler=C;D.onreadystatechange=function(){try{if(D.readyState==4){D.onreadystatechange=null;if(D.status==200){if(D.responseXML){D.data_handler(D.responseXML,D.data_attr,0)}else{D.data_handler(null,D.data_attr,translate("loadXML(%s) is failed: Non-xml response, check headers",B))}}else{D.data_handler(null,D.data_attr,translate("loadXML(%s) is failed: HTTP Error %u",B,D.status))}}}catch(G){adeiReportException(G,translate("loadXML(%s) handler is failed",B))}}}else{if(window.ActiveXObject){D.onreadystatechange=F.ready}}D.open("GET",B,true);D.send(null)}catch(E){adeiReportException(E,translate("loadXML(%s) request is failed",B))}}function loadXML(B,C,A){if(isIE6()){queueXML(B,C,A)}else{doLoadXML(B,C,A)}}function DSXMLQueue(){this.queue=new Array();this.busy=0;this.inside=0;this.completed=0;this.ProcessNext=dsXMLQueueProcessNext}function DSXMLQueueElement(B,C,A){this.url=B;this.handler=C;this.attr=A}function dsXMLQueueProcessNext(){if(this.queue.length>0){var A=this.queue.shift();this.inside=1;doLoadXML(A.url,dsXMLQueueHandler,A);this.inside=0;if(this.completed){this.completed=0;return 1}}else{this.busy=0}return 0}var ds_xml_queue=new DSXMLQueue;function dsXMLQueueHandler(A,C,B){C.handler(A,C.attr,B);if(ds_xml_queue.inside){ds_xml_queue.completed=1}else{while(ds_xml_queue.ProcessNext()){}}}function queueXML(B,D,A){var C=new DSXMLQueueElement(B,D,A);if(ds_xml_queue.busy){ds_xml_queue.queue.push(C)}else{ds_xml_queue.busy=1;doLoadXML(B,dsXMLQueueHandler,C)}}function htmlReplace(htmldoc,place,jsexec){if(typeof jsexec=="undefined"){jsexec=false}if(typeof place=="string"){place=document.getElementById(place);if(!place){adei.ReportError(translate("Node %s is not found",place));return}}if(typeof htmldoc!="string"){var serializer=new XMLSerializer();var htmldoc=serializer.serializeToString(htmldoc)}place.innerHTML=htmldoc;if(jsexec){var x=place.getElementsByTagName("script");for(var i=0;i<x.length;i++){eval(x[i].text)}}}function xsltApply(D,A,C){if(typeof C=="string"){C=document.getElementById(C);if(!C){adei.ReportError(translate("Node %s is not found",C));return}}var B;if(typeof XSLTProcessor!="undefined"){B=D.transformToFragment(A,document);if(C){C.innerHTML="";C.appendChild(B)}}else{if(typeof A.transformNode!="undefined"){B=A.transformNode(D);if(C){C.innerHTML=B}}else{adei.ReportError(translate("Browser is not supporting XSL transform"))}}return B}function xsltHandler(C,B,A){if(A){B.handler(null,B.attr,A);return}if(isKonqueror()){B.xslt_processor=false}else{if(typeof XSLTProcessor!="undefined"){B.xslt_processor=new XSLTProcessor();B.xslt_processor.importStylesheet(C)}else{if(typeof C.transformNode!="undefined"){B.xslt_processor=C}else{B.xslt_processor=false}}}B.handler(B.xslt_processor,B.attr)}function loadXSLT(B,D,A){var C=new Object();C.attr=A;C.handler=D;loadXML(B,xsltHandler,C)}function XMLMODULE(B,A){if(typeof B=="object"){this.div=B}else{if(B){this.div=document.getElementById(B);if(!this.div){adei.ReportError(translate('Element "%s" is not present in current document model',B))}}else{return}}if(typeof A=="undefined"){this.root_node=this.div}else{if(typeof A=="object"){this.root_node=A}else{this.root_node=document.getElementById(A)}}this.module_type=HISTORY_MODULE_TYPE;this.jsexec=false}XMLMODULE.prototype.EnableJS=function(){this.jsexec=true};XMLMODULE.prototype.Update=function(A,B){if((A.xml)&&(A.xslt)){adei.UpdateDIV(this.div,A.xml,A.xslt,this.jsexec);adei.SetSuccessStatus(translate("Done"))}else{adei.SetStatus(translate("Update failed: Incomplete response received by the module"))}};XMLMODULE.prototype.GetNode=function(){return this.root_node};XMLMODULE.prototype.SetModuleType=function(A){this.module_type=A};XMLMODULE.prototype.GetModuleType=function(){return this.module_type};function XSLPOOL(A){if(typeof A=="undefined"){this.use_cache=false}this.use_cache=A;this.cache=new Array();this.xsl_supported=true}XSLPOOL.prototype.ProcessXML=function(A,D,C){if(!A){if(D.handler){D.handler(null,D.attr,C)}else{adei.ReportError(C)}return}if(D.handler){var B=xsltApply(D.xsltdoc,A);D.handler(B,D.attr)}else{xsltApply(D.xsltdoc,A,D.attr)}};XSLPOOL.prototype.ApplyXSLT=function(D,F,E,C,A){var B=new Object;B.self=this;B.handler=C;B.attr=A;B.xsltdoc=F;if(F){if(typeof E=="object"){this.ProcessXML(E,B)}else{loadXML(E,function(H,G,I){G.self.ProcessXML(H,G,I)},B)}}else{this.xsl_supported=false;if((!D)||(typeof E=="object")){adei.ReportError(translate("Browser is not supporting XSL transform"))}else{if(!C){C=htmlReplace}loadXML(urlAddProperty(E,"xslt",D),C,A)}}};XSLPOOL.prototype.ProcessXSLT=function(B,A){if(this.use_cache){this.cache[A.xslt]=B}return this.ApplyXSLT(A.xslt,B,A.xmlurl,A.handler,A.attr)};XSLPOOL.prototype.Load=function(D,E,C,A){if(!this.xsl_supported){return this.ApplyXSLT(D,false,E,C,A)}if(typeof this.cache[D]!="undefined"){return this.ApplyXSLT(D,this.cache[D],E,C,A)}var B=new Object;B.self=this;B.handler=C;B.attr=A;B.xslt=D;B.xmlurl=E;loadXSLT("services/get.php?target=xslt&xslt="+D,function(G,F){B.self.ProcessXSLT(G,B)},B)};XSLPOOL.prototype.HTMLReplaceCallback=function(B,A,C){if((typeof B!="undefined")&&(B)){htmlReplace(B,A)}else{adei.ReportError(C)}};XSLPOOL.prototype.HTMLReplaceAndExecuteCallback=function(B,A,C){if((typeof B!="undefined")&&(B)){htmlReplace(B,A,true)}else{adei.ReportError(C)}};function CONTROL(A){CONTROL.superclass.call(this,A);this.SetModuleType(CONTROL_MODULE_TYPE)}classExtend(CONTROL,XMLMODULE);CONTROL.prototype.Set=function(A){var D=false;var E=false;var F=new Object();F.target="set";F.control_values=false;var G=this.div.getElementsByTagName("input");if(G){var I=/^control_id_(\d+)$/;var H=new Array();for(var C=0;C<G.length;C++){var B=I.exec(G[C].id);if(B){H[B[1]]=G[C].value}}if(H.length>0){for(var C=0;C<H.length;C++){if(typeof H[C]=="undefined"){D=true}else{if(F.control_values){F.control_values+=","+H[C]}else{F.control_values=H[C]}if(E){E+=","+C}else{E=""+C}}}if(D){F.control_mask=E}adei.updater.Request(F);return}}adei.ReportError(translate("Internal error, no input elements is found"))};function EVENTDATA(C,B,A){EVENTDATA.superclass.call(this,C);this.module=null;this.event_name=B;this.search_module=A;adei.RegisterCropperButton({name:B,tooltip:translate("Search "+B),object:this,callback:"onSelect",css:"imgCrop_button_"+B,vertical:true,keep_selection:true})}classExtend(EVENTDATA,XMLMODULE);EVENTDATA.prototype.onSelect=function(B,A){adei.Search("{"+this.search_module+"} interval:"+B+"-"+A)};EVENTDATA.prototype.SetAutoOpen=function(A){this.module=A};EVENTDATA.prototype.SetCustomProperties=function(A){adei.SetCustomProperties(A+"&module="+this.module)};function WIKI(A){WIKI.superclass.call(this,A);this.pageid=1}classExtend(WIKI,XMLMODULE);WIKI.prototype.SetID=function(A){this.div.innerHTML=translate("Loading...");adei.config.SetWikiSettings(A);adei.config.Save();adei.updater.Update()};WIKI.prototype.SetConfiguration=function(A){adei.config.Load(A,true)};